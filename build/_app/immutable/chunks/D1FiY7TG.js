import{d as ae,l as Ae,m as He,c as Xe,u as Qe}from"./DUlFqCOB.js";import{s as _e,W as qe,q as Ze,y as ie,A as fe,j as re,p as Se,e as k,t as A,k as x,c as $,a as E,b as F,d as f,o as O,f as g,i as B,g as d,u as ee,h as L,r as et,v as tt,w as rt,x as at,B as Fe,z as nt,G as st}from"./osRMcaoZ.js";import{S as ge,i as we,b as R,d as J,m as q,t as j,a as U,e as G,f as ce,g as $e,c as Ee}from"./Cz_TVcYH.js";import{a as lt,b as ot,u as ze,e as Le,f as it,h as ye,s as ft,i as ct}from"./BiJCbRrE.js";import{T as ut}from"./pvJazfKD.js";import{t as Ie}from"./CvcJvn8o.js";import{d as dt}from"./C3cxvGum.js";import{M as Ge}from"./BbL-Ydhu.js";import{L as mt}from"./CjF1PMaH.js";import{X as Ke}from"./YHUoul5_.js";import"./BWrnINzs.js";import{M as ke}from"./EBD6j5Xg.js";import{b as ht}from"./zuTWMoVs.js";import{f as pt}from"./CBc5jlPY.js";import{D as _t}from"./D8FxhTRD.js";import{G as gt}from"./DI_efbNH.js";import{P as wt}from"./BeAkhgfO.js";import{T as bt}from"./BOoEfdYa.js";import{D as vt}from"./Ba9RO0z0.js";import{S as yt}from"./XYvaYOQu.js";import"./1eR21JWE.js";import{T as kt}from"./B3sn4-90.js";import{K as $t}from"./Dwz7WGHO.js";const gr=async(l,e)=>{let r=null;const t=await fetch(`${ae}/folders/`,{method:"POST",headers:{Accept:"application/json","Content-Type":"application/json",authorization:`Bearer ${l}`},body:JSON.stringify(e)}).then(async a=>{if(!a.ok)throw await a.json();return a.json()}).catch(a=>(r=a.detail,null));if(r)throw r;return t},wr=async(l="")=>{let e=null;const r=await fetch(`${ae}/folders/`,{method:"GET",headers:{Accept:"application/json","Content-Type":"application/json",authorization:`Bearer ${l}`}}).then(async t=>{if(!t.ok)throw await t.json();return t.json()}).then(t=>t).catch(t=>(e=t.detail,console.error(t),null));if(e)throw e;return r},br=async(l,e,r)=>{let t=null;const a=await fetch(`${ae}/folders/${e}/update`,{method:"POST",headers:{Accept:"application/json","Content-Type":"application/json",authorization:`Bearer ${l}`},body:JSON.stringify(r)}).then(async o=>{if(!o.ok)throw await o.json();return o.json()}).then(o=>o).catch(o=>(t=o.detail,console.error(o),null));if(t)throw t;return a},vr=async(l,e,r)=>{let t=null;const a=await fetch(`${ae}/folders/${e}/update/expanded`,{method:"POST",headers:{Accept:"application/json","Content-Type":"application/json",authorization:`Bearer ${l}`},body:JSON.stringify({is_expanded:r})}).then(async o=>{if(!o.ok)throw await o.json();return o.json()}).then(o=>o).catch(o=>(t=o.detail,console.error(o),null));if(t)throw t;return a},yr=async(l,e,r)=>{let t=null;const a=await fetch(`${ae}/folders/${e}/update/parent`,{method:"POST",headers:{Accept:"application/json","Content-Type":"application/json",authorization:`Bearer ${l}`},body:JSON.stringify({parent_id:r})}).then(async o=>{if(!o.ok)throw await o.json();return o.json()}).then(o=>o).catch(o=>(t=o.detail,console.error(o),null));if(t)throw t;return a},kr=async(l,e)=>{let r=null;const t=await fetch(`${ae}/folders/${e}`,{method:"DELETE",headers:{Accept:"application/json","Content-Type":"application/json",authorization:`Bearer ${l}`}}).then(async a=>{if(!a.ok)throw await a.json();return a.json()}).then(a=>a).catch(a=>(r=a.detail,console.error(a),null));if(r)throw r;return t};function Et(l){let e,r;return e=new ut({props:{tags:l[0]}}),e.$on("delete",l[4]),e.$on("add",l[5]),{c(){R(e.$$.fragment)},l(t){J(e.$$.fragment,t)},m(t,a){q(e,t,a),r=!0},p(t,[a]){const o={};a&1&&(o.tags=t[0]),e.$set(o)},i(t){r||(j(e.$$.fragment,t),r=!0)},o(t){U(e.$$.fragment,t),r=!1},d(t){G(e,t)}}}function It(l,e,r){const t=qe();let{chatId:a=""}=e,o=[];const s=async()=>await lt(localStorage.token,a).catch(async c=>[]),n=async c=>{await ot(localStorage.token,a,c).catch(async h=>(Ie.error(`${h}`),null))&&(r(0,o=await s()),await ze(localStorage.token,a,{tags:o}),await Ae.set(await Le(localStorage.token)),t("add",{name:c}))},i=async c=>{await it(localStorage.token,a,c),r(0,o=await s()),await ze(localStorage.token,a,{tags:o}),await Ae.set(await Le(localStorage.token)),t("delete",{name:c})};Ze(async()=>{a&&r(0,o=await s())});const _=c=>{i(c.detail)},m=c=>{n(c.detail)};return l.$$set=c=>{"chatId"in c&&r(3,a=c.chatId)},[o,n,i,a,_,m]}class $r extends ge{constructor(e){super(),we(this,e,It,Et,_e,{chatId:3})}}function Pe(l){var S;let e,r,t,a,o,s,n,i,_,m,c,p,h;function b(u,y){return u[2].share_id?Dt:St}let D=b(l),T=D(l),v=((S=l[4])==null?void 0:S.features.enable_community_sharing)&&We(l);_=new mt({});function I(u,y){return u[2].share_id?Ct:Tt}let w=I(l),V=w(l);return{c(){e=k("div"),r=k("div"),T.c(),t=x(),a=k("div"),o=k("div"),s=k("div"),v&&v.c(),n=x(),i=k("button"),R(_.$$.fragment),m=x(),V.c(),this.h()},l(u){e=$(u,"DIV",{class:!0});var y=E(e);r=$(y,"DIV",{class:!0});var P=E(r);T.l(P),P.forEach(f),t=O(y),a=$(y,"DIV",{class:!0});var X=E(a);o=$(X,"DIV",{class:!0});var te=E(o);s=$(te,"DIV",{class:!0});var K=E(s);v&&v.l(K),n=O(K),i=$(K,"BUTTON",{class:!0,type:!0,id:!0});var W=E(i);J(_.$$.fragment,W),m=O(W),V.l(W),W.forEach(f),K.forEach(f),te.forEach(f),X.forEach(f),y.forEach(f),this.h()},h(){g(r,"class","text-sm dark:text-gray-300 mb-1"),g(i,"class","self-center flex items-center gap-1 px-3.5 py-2 text-sm font-medium bg-black hover:bg-gray-900 text-white dark:bg-white dark:text-black dark:hover:bg-gray-100 transition rounded-full"),g(i,"type","button"),g(i,"id","copy-and-share-chat-button"),g(s,"class","flex gap-1"),g(o,"class","flex flex-col items-end space-x-1 mt-3"),g(a,"class","flex justify-end"),g(e,"class","px-5 pt-4 pb-5 w-full flex flex-col justify-center")},m(u,y){B(u,e,y),d(e,r),T.m(r,null),d(e,t),d(e,a),d(a,o),d(o,s),v&&v.m(s,null),d(s,n),d(s,i),q(_,i,null),d(i,m),V.m(i,null),c=!0,p||(h=ee(i,"click",l[11]),p=!0)},p(u,y){var P;D===(D=b(u))&&T?T.p(u,y):(T.d(1),T=D(u),T&&(T.c(),T.m(r,null))),(P=u[4])!=null&&P.features.enable_community_sharing?v?v.p(u,y):(v=We(u),v.c(),v.m(s,n)):v&&(v.d(1),v=null),w===(w=I(u))&&V?V.p(u,y):(V.d(1),V=w(u),V&&(V.c(),V.m(i,null)))},i(u){c||(j(_.$$.fragment,u),c=!0)},o(u){U(_.$$.fragment,u),c=!1},d(u){u&&f(e),T.d(),v&&v.d(),G(_),V.d(),p=!1,h()}}}function St(l){let e=l[3].t("Messages you send after creating your link won't be shared. Users with the URL will be able to view the shared chat.")+"",r;return{c(){r=A(e)},l(t){r=F(t,e)},m(t,a){B(t,r,a)},p(t,a){a&8&&e!==(e=t[3].t("Messages you send after creating your link won't be shared. Users with the URL will be able to view the shared chat.")+"")&&L(r,e)},d(t){t&&f(r)}}}function Dt(l){let e,r=l[3].t("You have shared this chat")+"",t,a,o,s=l[3].t("before")+"",n,i,_,m,c=l[3].t("Click here to")+"",p,h,b,D=l[3].t("delete this link")+"",T,v,I=l[3].t("and create a new shared link.")+"",w,V,S;return{c(){e=k("a"),t=A(r),a=x(),o=k("span"),n=A(s),i=A("."),m=x(),p=A(c),h=x(),b=k("button"),T=A(D),v=x(),w=A(I),this.h()},l(u){e=$(u,"A",{href:!0,target:!0});var y=E(e);t=F(y,r),a=O(y),o=$(y,"SPAN",{class:!0});var P=E(o);n=F(P,s),P.forEach(f),i=F(y,"."),y.forEach(f),m=O(u),p=F(u,c),h=O(u),b=$(u,"BUTTON",{class:!0});var X=E(b);T=F(X,D),X.forEach(f),v=O(u),w=F(u,I),this.h()},h(){g(o,"class","underline"),g(e,"href",_="/s/"+l[2].share_id),g(e,"target","_blank"),g(b,"class","underline")},m(u,y){B(u,e,y),d(e,t),d(e,a),d(e,o),d(o,n),d(e,i),B(u,m,y),B(u,p,y),B(u,h,y),B(u,b,y),d(b,T),B(u,v,y),B(u,w,y),V||(S=ee(b,"click",l[9]),V=!0)},p(u,y){y&8&&r!==(r=u[3].t("You have shared this chat")+"")&&L(t,r),y&8&&s!==(s=u[3].t("before")+"")&&L(n,s),y&4&&_!==(_="/s/"+u[2].share_id)&&g(e,"href",_),y&8&&c!==(c=u[3].t("Click here to")+"")&&L(p,c),y&8&&D!==(D=u[3].t("delete this link")+"")&&L(T,D),y&8&&I!==(I=u[3].t("and create a new shared link.")+"")&&L(w,I)},d(u){u&&(f(e),f(m),f(p),f(h),f(b),f(v),f(w)),V=!1,S()}}}function We(l){let e,r=l[3].t("Share to Open WebUI Community")+"",t,a,o;return{c(){e=k("button"),t=A(r),this.h()},l(s){e=$(s,"BUTTON",{class:!0,type:!0});var n=E(e);t=F(n,r),n.forEach(f),this.h()},h(){g(e,"class","self-center flex items-center gap-1 px-3.5 py-2 text-sm font-medium bg-gray-100 hover:bg-gray-200 text-gray-800 dark:bg-gray-850 dark:text-white dark:hover:bg-gray-800 transition rounded-full"),g(e,"type","button")},m(s,n){B(s,e,n),d(e,t),a||(o=ee(e,"click",l[10]),a=!0)},p(s,n){n&8&&r!==(r=s[3].t("Share to Open WebUI Community")+"")&&L(t,r)},d(s){s&&f(e),a=!1,o()}}}function Tt(l){let e=l[3].t("Copy Link")+"",r;return{c(){r=A(e)},l(t){r=F(t,e)},m(t,a){B(t,r,a)},p(t,a){a&8&&e!==(e=t[3].t("Copy Link")+"")&&L(r,e)},d(t){t&&f(r)}}}function Ct(l){let e=l[3].t("Update and Copy Link")+"",r;return{c(){r=A(e)},l(t){r=F(t,e)},m(t,a){B(t,r,a)},p(t,a){a&8&&e!==(e=t[3].t("Update and Copy Link")+"")&&L(r,e)},d(t){t&&f(r)}}}function jt(l){let e,r,t,a=l[3].t("Share Chat")+"",o,s,n,i,_,m,c,p;i=new Ke({props:{className:"size-5"}});let h=l[2]&&Pe(l);return{c(){e=k("div"),r=k("div"),t=k("div"),o=A(a),s=x(),n=k("button"),R(i.$$.fragment),_=x(),h&&h.c(),this.h()},l(b){e=$(b,"DIV",{});var D=E(e);r=$(D,"DIV",{class:!0});var T=E(r);t=$(T,"DIV",{class:!0});var v=E(t);o=F(v,a),v.forEach(f),s=O(T),n=$(T,"BUTTON",{class:!0});var I=E(n);J(i.$$.fragment,I),I.forEach(f),T.forEach(f),_=O(D),h&&h.l(D),D.forEach(f),this.h()},h(){g(t,"class","text-lg font-medium self-center"),g(n,"class","self-center"),g(r,"class","flex justify-between dark:text-gray-300 px-5 pt-4 pb-0.5")},m(b,D){B(b,e,D),d(e,r),d(r,t),d(t,o),d(r,s),d(r,n),q(i,n,null),d(e,_),h&&h.m(e,null),m=!0,c||(p=ee(n,"click",l[8]),c=!0)},p(b,D){(!m||D&8)&&a!==(a=b[3].t("Share Chat")+"")&&L(o,a),b[2]?h?(h.p(b,D),D&4&&j(h,1)):(h=Pe(b),h.c(),j(h,1),h.m(e,null)):h&&($e(),U(h,1,1,()=>{h=null}),Ee())},i(b){m||(j(i.$$.fragment,b),j(h),m=!0)},o(b){U(i.$$.fragment,b),U(h),m=!1},d(b){b&&f(e),G(i),h&&h.d(),c=!1,p()}}}function Bt(l){let e,r,t;function a(s){l[12](s)}let o={size:"md",$$slots:{default:[jt]},$$scope:{ctx:l}};return l[0]!==void 0&&(o.show=l[0]),e=new Ge({props:o}),ie.push(()=>ce(e,"show",a)),{c(){R(e.$$.fragment)},l(s){J(e.$$.fragment,s)},m(s,n){q(e,s,n),t=!0},p(s,[n]){const i={};n&65567&&(i.$$scope={dirty:n,ctx:s}),!r&&n&1&&(r=!0,i.show=s[0],fe(()=>r=!1)),e.$set(i)},i(s){t||(j(e.$$.fragment,s),t=!0)},o(s){U(e.$$.fragment,s),t=!1},d(s){G(e,s)}}}function Vt(l,e,r){let t,a,o;re(l,He,w=>r(14,t=w)),re(l,Xe,w=>r(4,o=w));let{chatId:s}=e,n=null,i=null;const _=Se("i18n");re(l,_,w=>r(3,a=w));const m=async()=>{const w=await ft(localStorage.token,s);return i=`${window.location.origin}/s/${w.id}`,r(2,n=await ye(localStorage.token,s)),i},c=async()=>{const w=n.chat;Ie.success(a.t("Redirecting you to Open WebUI Community"));const V="https://openwebui.com",S=await window.open(`${V}/chats/upload`,"_blank");window.addEventListener("message",u=>{u.origin===V&&u.data==="loaded"&&S.postMessage(JSON.stringify({chat:w,models:t.filter(y=>w.models.includes(y.id))}),"*")},!1)};let{show:p=!1}=e;const h=w=>n?w?n.id!==w.id||n.share_id!==w.share_id:!1:!0,b=()=>{r(0,p=!1)},D=async()=>{await ct(localStorage.token,s)&&r(2,n=await ye(localStorage.token,s))},T=()=>{c(),r(0,p=!1)},v=async()=>{if(/^((?!chrome|android).)*safari/i.test(navigator.userAgent)){const V=async()=>{const S=await m();return new Blob([S],{type:"text/plain"})};navigator.clipboard.write([new ClipboardItem({"text/plain":V()})]).then(()=>!0).catch(S=>(console.error("Async: Could not copy text: ",S),!1))}else dt(await m());Ie.success(a.t("Copied shared chat URL to clipboard!")),r(0,p=!1)};function I(w){p=w,r(0,p)}return l.$$set=w=>{"chatId"in w&&r(1,s=w.chatId),"show"in w&&r(0,p=w.show)},l.$$.update=()=>{l.$$.dirty&7&&p&&(async()=>{if(s){const w=await ye(localStorage.token,s);h(w)&&r(2,n=w)}else r(2,n=null)})()},[p,s,n,a,o,_,m,c,b,D,T,v,I]}class Er extends ge{constructor(e){super(),we(this,e,Vt,Bt,_e,{chatId:1,show:0})}}function Ut(l){let e;const r=l[8].default,t=et(r,l,l[14],null);return{c(){t&&t.c()},l(a){t&&t.l(a)},m(a,o){t&&t.m(a,o),e=!0},p(a,o){t&&t.p&&(!e||o&16384)&&tt(t,r,a,a[14],e?at(r,a[14],o,null):rt(a[14]),null)},i(a){e||(j(t,a),e=!0)},o(a){U(t,a),e=!1},d(a){t&&t.d(a)}}}function xt(l){let e,r;return e=new bt({props:{content:l[5].t("More"),$$slots:{default:[Ut]},$$scope:{ctx:l}}}),{c(){R(e.$$.fragment)},l(t){J(e.$$.fragment,t)},m(t,a){q(e,t,a),r=!0},p(t,a){const o={};a&32&&(o.content=t[5].t("More")),a&16384&&(o.$$scope={dirty:a,ctx:t}),e.$set(o)},i(t){r||(j(e.$$.fragment,t),r=!0)},o(t){U(e.$$.fragment,t),r=!1},d(t){G(e,t)}}}function Ot(l){let e,r,t,a=l[5].t("Edit")+"",o,s;return e=new wt({props:{strokeWidth:"2"}}),{c(){R(e.$$.fragment),r=x(),t=k("div"),o=A(a),this.h()},l(n){J(e.$$.fragment,n),r=O(n),t=$(n,"DIV",{class:!0});var i=E(t);o=F(i,a),i.forEach(f),this.h()},h(){g(t,"class","flex items-center")},m(n,i){q(e,n,i),B(n,r,i),B(n,t,i),d(t,o),s=!0},p(n,i){(!s||i&32)&&a!==(a=n[5].t("Edit")+"")&&L(o,a)},i(n){s||(j(e.$$.fragment,n),s=!0)},o(n){U(e.$$.fragment,n),s=!1},d(n){n&&(f(r),f(t)),G(e,n)}}}function Mt(l){let e,r,t,a=l[5].t("Export")+"",o,s;return e=new vt({props:{strokeWidth:"2"}}),{c(){R(e.$$.fragment),r=x(),t=k("div"),o=A(a),this.h()},l(n){J(e.$$.fragment,n),r=O(n),t=$(n,"DIV",{class:!0});var i=E(t);o=F(i,a),i.forEach(f),this.h()},h(){g(t,"class","flex items-center")},m(n,i){q(e,n,i),B(n,r,i),B(n,t,i),d(t,o),s=!0},p(n,i){(!s||i&32)&&a!==(a=n[5].t("Export")+"")&&L(o,a)},i(n){s||(j(e.$$.fragment,n),s=!0)},o(n){U(e.$$.fragment,n),s=!1},d(n){n&&(f(r),f(t)),G(e,n)}}}function Nt(l){let e,r,t,a=l[5].t("Delete")+"",o,s;return e=new gt({props:{strokeWidth:"2"}}),{c(){R(e.$$.fragment),r=x(),t=k("div"),o=A(a),this.h()},l(n){J(e.$$.fragment,n),r=O(n),t=$(n,"DIV",{class:!0});var i=E(t);o=F(i,a),i.forEach(f),this.h()},h(){g(t,"class","flex items-center")},m(n,i){q(e,n,i),B(n,r,i),B(n,t,i),d(t,o),s=!0},p(n,i){(!s||i&32)&&a!==(a=n[5].t("Delete")+"")&&L(o,a)},i(n){s||(j(e.$$.fragment,n),s=!0)},o(n){U(e.$$.fragment,n),s=!1},d(n){n&&(f(r),f(t)),G(e,n)}}}function At(l){let e,r,t,a,o,s;return e=new ke({props:{class:"flex gap-2 items-center px-3 py-1.5 text-sm  cursor-pointer hover:bg-gray-50 dark:hover:bg-gray-800 rounded-md",$$slots:{default:[Ot]},$$scope:{ctx:l}}}),e.$on("click",l[9]),t=new ke({props:{class:"flex gap-2 items-center px-3 py-1.5 text-sm  cursor-pointer hover:bg-gray-50 dark:hover:bg-gray-800 rounded-md",$$slots:{default:[Mt]},$$scope:{ctx:l}}}),t.$on("click",l[10]),o=new ke({props:{class:"flex  gap-2  items-center px-3 py-1.5 text-sm  cursor-pointer hover:bg-gray-50 dark:hover:bg-gray-800 rounded-md",$$slots:{default:[Nt]},$$scope:{ctx:l}}}),o.$on("click",l[11]),{c(){R(e.$$.fragment),r=x(),R(t.$$.fragment),a=x(),R(o.$$.fragment)},l(n){J(e.$$.fragment,n),r=O(n),J(t.$$.fragment,n),a=O(n),J(o.$$.fragment,n)},m(n,i){q(e,n,i),B(n,r,i),q(t,n,i),B(n,a,i),q(o,n,i),s=!0},p(n,i){const _={};i&16416&&(_.$$scope={dirty:i,ctx:n}),e.$set(_);const m={};i&16416&&(m.$$scope={dirty:i,ctx:n}),t.$set(m);const c={};i&16416&&(c.$$scope={dirty:i,ctx:n}),o.$set(c)},i(n){s||(j(e.$$.fragment,n),j(t.$$.fragment,n),j(o.$$.fragment,n),s=!0)},o(n){U(e.$$.fragment,n),U(t.$$.fragment,n),U(o.$$.fragment,n),s=!1},d(n){n&&(f(r),f(a)),G(e,n),G(t,n),G(o,n)}}}function Ft(l){let e,r,t;return r=new ht({props:{class:"w-full max-w-[170px] rounded-lg px-1 py-1.5  z-50 bg-white dark:bg-gray-850 dark:text-white shadow-lg",sideOffset:-2,side:"bottom",align:l[0],transition:pt,$$slots:{default:[At]},$$scope:{ctx:l}}}),{c(){e=k("div"),R(r.$$.fragment),this.h()},l(a){e=$(a,"DIV",{slot:!0});var o=E(e);J(r.$$.fragment,o),o.forEach(f),this.h()},h(){g(e,"slot","content")},m(a,o){B(a,e,o),q(r,e,null),t=!0},p(a,o){const s={};o&1&&(s.align=a[0]),o&16430&&(s.$$scope={dirty:o,ctx:a}),r.$set(s)},i(a){t||(j(r.$$.fragment,a),t=!0)},o(a){U(r.$$.fragment,a),t=!1},d(a){a&&f(e),G(r)}}}function zt(l){let e,r,t;function a(s){l[12](s)}let o={$$slots:{content:[Ft],default:[xt]},$$scope:{ctx:l}};return l[4]!==void 0&&(o.show=l[4]),e=new _t({props:o}),ie.push(()=>ce(e,"show",a)),e.$on("change",l[13]),{c(){R(e.$$.fragment)},l(s){J(e.$$.fragment,s)},m(s,n){q(e,s,n),t=!0},p(s,[n]){const i={};n&16431&&(i.$$scope={dirty:n,ctx:s}),!r&&n&16&&(r=!0,i.show=s[4],fe(()=>r=!1)),e.$set(i)},i(s){t||(j(e.$$.fragment,s),t=!0)},o(s){U(e.$$.fragment,s),t=!1},d(s){G(e,s)}}}function Lt(l,e,r){let t,{$$slots:a={},$$scope:o}=e;const s=Se("i18n");re(l,s,I=>r(5,t=I));const n=qe();let{align:i="start"}=e,{onEdit:_=()=>{}}=e,{onExport:m=()=>{}}=e,{onDelete:c=()=>{}}=e,p=!1;const h=()=>{_()},b=()=>{m()},D=()=>{c()};function T(I){p=I,r(4,p)}const v=I=>{I.detail===!1&&n("close")};return l.$$set=I=>{"align"in I&&r(0,i=I.align),"onEdit"in I&&r(1,_=I.onEdit),"onExport"in I&&r(2,m=I.onExport),"onDelete"in I&&r(3,c=I.onDelete),"$$scope"in I&&r(14,o=I.$$scope)},[i,_,m,c,p,t,s,n,a,h,b,D,T,v,o]}class Ir extends ge{constructor(e){super(),we(this,e,Lt,zt,_e,{align:0,onEdit:1,onExport:2,onDelete:3})}}function Pt(l){let e=l[5].t("Create Folder")+"",r;return{c(){r=A(e)},l(t){r=F(t,e)},m(t,a){B(t,r,a)},p(t,a){a&32&&e!==(e=t[5].t("Create Folder")+"")&&L(r,e)},d(t){t&&f(r)}}}function Wt(l){let e=l[5].t("Edit Folder")+"",r;return{c(){r=A(e)},l(t){r=F(t,e)},m(t,a){B(t,r,a)},p(t,a){a&32&&e!==(e=t[5].t("Edit Folder")+"")&&L(r,e)},d(t){t&&f(r)}}}function Re(l){let e,r,t=l[5].t("System Prompt")+"",a,o,s,n,i,_;function m(p){l[13](p)}let c={className:" text-sm w-full bg-transparent outline-hidden ",placeholder:`Write your model system prompt content here
e.g.) You are Mario from Super Mario Bros, acting as an assistant.`,maxSize:200};return l[3].system_prompt!==void 0&&(c.value=l[3].system_prompt),n=new kt({props:c}),ie.push(()=>ce(n,"value",m)),{c(){e=k("div"),r=k("div"),a=A(t),o=x(),s=k("div"),R(n.$$.fragment),this.h()},l(p){e=$(p,"DIV",{class:!0});var h=E(e);r=$(h,"DIV",{class:!0});var b=E(r);a=F(b,t),b.forEach(f),o=O(h),s=$(h,"DIV",{});var D=E(s);J(n.$$.fragment,D),D.forEach(f),h.forEach(f),this.h()},h(){g(r,"class","mb-2 text-xs text-gray-500"),g(e,"class","my-1")},m(p,h){B(p,e,h),d(e,r),d(r,a),d(e,o),d(e,s),q(n,s,null),_=!0},p(p,h){(!_||h&32)&&t!==(t=p[5].t("System Prompt")+"")&&L(a,t);const b={};!i&&h&8&&(i=!0,b.value=p[3].system_prompt,fe(()=>i=!1)),n.$set(b)},i(p){_||(j(n.$$.fragment,p),_=!0)},o(p){U(n.$$.fragment,p),_=!1},d(p){p&&f(e),G(n)}}}function Rt(l){let e,r,t,a=l[5].t("Knowledge")+"",o;return{c(){e=k("div"),r=k("div"),t=k("div"),o=A(a),this.h()},l(s){e=$(s,"DIV",{slot:!0});var n=E(e);r=$(n,"DIV",{class:!0});var i=E(r);t=$(i,"DIV",{class:!0});var _=E(t);o=F(_,a),_.forEach(f),i.forEach(f),n.forEach(f),this.h()},h(){g(t,"class","mb-2 text-xs text-gray-500"),g(r,"class","flex w-full justify-between"),g(e,"slot","label")},m(s,n){B(s,e,n),d(e,r),d(r,t),d(t,o)},p(s,n){n&32&&a!==(a=s[5].t("Knowledge")+"")&&L(o,a)},d(s){s&&f(e)}}}function Je(l){let e,r,t;return r=new yt({}),{c(){e=k("div"),R(r.$$.fragment),this.h()},l(a){e=$(a,"DIV",{class:!0});var o=E(e);J(r.$$.fragment,o),o.forEach(f),this.h()},h(){g(e,"class","ml-2 self-center")},m(a,o){B(a,e,o),q(r,e,null),t=!0},i(a){t||(j(r.$$.fragment,a),t=!0)},o(a){U(r.$$.fragment,a),t=!1},d(a){a&&f(e),G(r)}}}function Jt(l){var je,Be,Ve;let e,r,t,a,o,s,n,i,_,m,c,p,h=l[5].t("Folder Name")+"",b,D,T,v,I,w,V,S,u,y,P,X,te,K,W,ne=l[5].t("Save")+"",ue,be,de,Q,ve,De;function Te(C,M){return C[1]?Wt:Pt}let me=Te(l),Y=me(l);s=new Ke({props:{className:"size-5"}});let N=(((je=l[6])==null?void 0:je.role)==="admin"||(((Ve=(Be=l[6])==null?void 0:Be.permissions.chat)==null?void 0:Ve.system_prompt)??!0))&&Re(l);function Ye(C){l[14](C)}let Ce={$$slots:{label:[Rt]},$$scope:{ctx:l}};l[3].files!==void 0&&(Ce.selectedItems=l[3].files),P=new $t({props:Ce}),ie.push(()=>ce(P,"selectedItems",Ye));let z=l[4]&&Je();return{c(){e=k("div"),r=k("div"),t=k("div"),Y.c(),a=x(),o=k("button"),R(s.$$.fragment),n=x(),i=k("div"),_=k("div"),m=k("form"),c=k("div"),p=k("div"),b=A(h),D=x(),T=k("div"),v=k("input"),w=x(),V=k("hr"),S=x(),N&&N.c(),u=x(),y=k("div"),R(P.$$.fragment),te=x(),K=k("div"),W=k("button"),ue=A(ne),be=x(),z&&z.c(),this.h()},l(C){e=$(C,"DIV",{});var M=E(e);r=$(M,"DIV",{class:!0});var Z=E(r);t=$(Z,"DIV",{class:!0});var se=E(t);Y.l(se),se.forEach(f),a=O(Z),o=$(Z,"BUTTON",{class:!0});var le=E(o);J(s.$$.fragment,le),le.forEach(f),Z.forEach(f),n=O(M),i=$(M,"DIV",{class:!0});var oe=E(i);_=$(oe,"DIV",{class:!0});var Ue=E(_);m=$(Ue,"FORM",{class:!0});var H=E(m);c=$(H,"DIV",{class:!0});var he=E(c);p=$(he,"DIV",{class:!0});var xe=E(p);b=F(xe,h),xe.forEach(f),D=O(he),T=$(he,"DIV",{class:!0});var Oe=E(T);v=$(Oe,"INPUT",{class:!0,type:!0,placeholder:!0,autocomplete:!0}),Oe.forEach(f),he.forEach(f),w=O(H),V=$(H,"HR",{class:!0}),S=O(H),N&&N.l(H),u=O(H),y=$(H,"DIV",{class:!0});var Me=E(y);J(P.$$.fragment,Me),Me.forEach(f),te=O(H),K=$(H,"DIV",{class:!0});var Ne=E(K);W=$(Ne,"BUTTON",{class:!0,type:!0});var pe=E(W);ue=F(pe,ne),be=O(pe),z&&z.l(pe),pe.forEach(f),Ne.forEach(f),H.forEach(f),Ue.forEach(f),oe.forEach(f),M.forEach(f),this.h()},h(){g(t,"class","text-lg font-medium self-center"),g(o,"class","self-center"),g(r,"class","flex justify-between dark:text-gray-300 px-5 pt-4 pb-1"),g(p,"class","mb-1 text-xs text-gray-500"),g(v,"class","w-full text-sm bg-transparent placeholder:text-gray-300 dark:placeholder:text-gray-700 outline-hidden"),g(v,"type","text"),g(v,"placeholder",I=l[5].t("Enter folder name")),g(v,"autocomplete","off"),g(T,"class","flex-1"),g(c,"class","flex flex-col w-full mt-1"),g(V,"class","border-gray-50 dark:border-gray-850 my-2.5 w-full"),g(y,"class","my-2"),g(W,"class",de="px-3.5 py-1.5 text-sm font-medium bg-black hover:bg-gray-950 text-white dark:bg-white dark:text-black dark:hover:bg-gray-100 transition rounded-full flex flex-row space-x-1 items-center "+(l[4]?" cursor-not-allowed":"")),g(W,"type","submit"),W.disabled=l[4],g(K,"class","flex justify-end pt-3 text-sm font-medium gap-1.5"),g(m,"class","flex flex-col w-full"),g(_,"class","flex flex-col w-full sm:flex-row sm:justify-center sm:space-x-6"),g(i,"class","flex flex-col md:flex-row w-full px-5 pb-4 md:space-x-4 dark:text-gray-200")},m(C,M){B(C,e,M),d(e,r),d(r,t),Y.m(t,null),d(r,a),d(r,o),q(s,o,null),d(e,n),d(e,i),d(i,_),d(_,m),d(m,c),d(c,p),d(p,b),d(c,D),d(c,T),d(T,v),Fe(v,l[2]),d(m,w),d(m,V),d(m,S),N&&N.m(m,null),d(m,u),d(m,y),q(P,y,null),d(m,te),d(m,K),d(K,W),d(W,ue),d(W,be),z&&z.m(W,null),Q=!0,ve||(De=[ee(o,"click",l[11]),ee(v,"input",l[12]),ee(m,"submit",nt(l[15]))],ve=!0)},p(C,M){var se,le,oe;me===(me=Te(C))&&Y?Y.p(C,M):(Y.d(1),Y=me(C),Y&&(Y.c(),Y.m(t,null))),(!Q||M&32)&&h!==(h=C[5].t("Folder Name")+"")&&L(b,h),(!Q||M&32&&I!==(I=C[5].t("Enter folder name")))&&g(v,"placeholder",I),M&4&&v.value!==C[2]&&Fe(v,C[2]),((se=C[6])==null?void 0:se.role)==="admin"||(((oe=(le=C[6])==null?void 0:le.permissions.chat)==null?void 0:oe.system_prompt)??!0)?N?(N.p(C,M),M&64&&j(N,1)):(N=Re(C),N.c(),j(N,1),N.m(m,u)):N&&($e(),U(N,1,1,()=>{N=null}),Ee());const Z={};M&262176&&(Z.$$scope={dirty:M,ctx:C}),!X&&M&8&&(X=!0,Z.selectedItems=C[3].files,fe(()=>X=!1)),P.$set(Z),(!Q||M&32)&&ne!==(ne=C[5].t("Save")+"")&&L(ue,ne),C[4]?z?M&16&&j(z,1):(z=Je(),z.c(),j(z,1),z.m(W,null)):z&&($e(),U(z,1,1,()=>{z=null}),Ee()),(!Q||M&16&&de!==(de="px-3.5 py-1.5 text-sm font-medium bg-black hover:bg-gray-950 text-white dark:bg-white dark:text-black dark:hover:bg-gray-100 transition rounded-full flex flex-row space-x-1 items-center "+(C[4]?" cursor-not-allowed":"")))&&g(W,"class",de),(!Q||M&16)&&(W.disabled=C[4])},i(C){Q||(j(s.$$.fragment,C),j(N),j(P.$$.fragment,C),j(z),Q=!0)},o(C){U(s.$$.fragment,C),U(N),U(P.$$.fragment,C),U(z),Q=!1},d(C){C&&f(e),Y.d(),G(s),N&&N.d(),G(P),z&&z.d(),ve=!1,st(De)}}}function qt(l){let e,r,t;function a(s){l[16](s)}let o={size:"md",$$slots:{default:[Jt]},$$scope:{ctx:l}};return l[0]!==void 0&&(o.show=l[0]),e=new Ge({props:o}),ie.push(()=>ce(e,"show",a)),{c(){R(e.$$.fragment)},l(s){J(e.$$.fragment,s)},m(s,n){q(e,s,n),t=!0},p(s,[n]){const i={};n&262271&&(i.$$scope={dirty:n,ctx:s}),!r&&n&1&&(r=!0,i.show=s[0],fe(()=>r=!1)),e.$set(i)},i(s){t||(j(e.$$.fragment,s),t=!0)},o(s){U(e.$$.fragment,s),t=!1},d(s){G(e,s)}}}function Gt(l,e,r){let t,a;re(l,Qe,S=>r(6,a=S));const o=Se("i18n");re(l,o,S=>r(5,t=S));let{show:s=!1}=e,{onSubmit:n=S=>{}}=e,{edit:i=!1}=e,{folder:_=null}=e,m="",c={system_prompt:"",files:[]},p=!1;const h=async()=>{r(4,p=!0),await n({name:m,data:c}),r(0,s=!1),r(4,p=!1)},b=()=>{r(2,m=_.name),r(3,c=_.data||{system_prompt:"",files:[]})},D=()=>{r(0,s=!1)};function T(){m=this.value,r(2,m),r(0,s),r(1,i)}function v(S){l.$$.not_equal(c.system_prompt,S)&&(c.system_prompt=S,r(3,c),r(0,s),r(1,i))}function I(S){l.$$.not_equal(c.files,S)&&(c.files=S,r(3,c),r(0,s),r(1,i))}const w=()=>{h()};function V(S){s=S,r(0,s)}return l.$$set=S=>{"show"in S&&r(0,s=S.show),"onSubmit"in S&&r(9,n=S.onSubmit),"edit"in S&&r(1,i=S.edit),"folder"in S&&r(10,_=S.folder)},l.$$.update=()=>{l.$$.dirty&1024&&_&&b(),l.$$.dirty&3&&!s&&!i&&(r(2,m=""),r(3,c={system_prompt:"",files:[]}))},[s,i,m,c,p,t,a,o,h,n,_,D,T,v,I,w,V]}class Sr extends ge{constructor(e){super(),we(this,e,Gt,qt,_e,{show:0,onSubmit:9,edit:1,folder:10})}}export{Sr as F,Er as S,$r as T,Ir as a,vr as b,yr as c,kr as d,gr as e,wr as g,br as u};
//# sourceMappingURL=D1FiY7TG.js.map
