{"version":3,"file":"20.CLLLJAYd.js","sources":["../../../../../../src/lib/components/channel/Messages/Message/ProfilePreview.svelte","../../../../../../src/lib/components/icons/ChatBubbleOvalEllipsis.svelte","../../../../../../src/lib/components/icons/FaceSmile.svelte","../../../../../../node_modules/@sveltejs/svelte-virtual-list/VirtualList.svelte","../../../../../../src/lib/components/channel/Messages/Message/ReactionPicker.svelte","../../../../../../src/lib/components/channel/Messages/Message.svelte","../../../../../../src/lib/components/channel/Messages.svelte","../../../../../../src/lib/components/channel/Navbar.svelte","../../../../../../src/lib/components/channel/Thread.svelte","../../../../../../src/lib/components/channel/Channel.svelte","../../../../../../src/routes/(app)/channels/[id]/+page.svelte"],"sourcesContent":["<script lang=\"ts\">\n\timport { DropdownMenu } from 'bits-ui';\n\n\timport { flyAndScale } from '$lib/utils/transitions';\n\timport { WEBUI_BASE_URL } from '$lib/constants';\n\timport { getUserActiveStatusById } from '$lib/apis/users';\n\n\texport let side = 'right';\n\texport let align = 'top';\n\n\texport let user = null;\n\tlet show = false;\n\n\tlet active = false;\n\n\tconst getActiveStatus = async () => {\n\t\tconst res = await getUserActiveStatusById(localStorage.token, user.id).catch((error) => {\n\t\t\tconsole.error('Error fetching user active status:', error);\n\t\t});\n\n\t\tif (res) {\n\t\t\tactive = res.active;\n\t\t} else {\n\t\t\tactive = false;\n\t\t}\n\t};\n\n\t$: if (show) {\n\t\tgetActiveStatus();\n\t}\n</script>\n\n<DropdownMenu.Root\n\tbind:open={show}\n\tcloseFocus={false}\n\tonOpenChange={(state) => {}}\n\ttypeahead={false}\n>\n\t<DropdownMenu.Trigger>\n\t\t<slot />\n\t</DropdownMenu.Trigger>\n\n\t<slot name=\"content\">\n\t\t<DropdownMenu.Content\n\t\t\tclass=\"max-w-full w-[240px] rounded-lg z-9999 bg-white dark:bg-black dark:text-white shadow-lg\"\n\t\t\tsideOffset={8}\n\t\t\t{side}\n\t\t\t{align}\n\t\t\ttransition={flyAndScale}\n\t\t>\n\t\t\t{#if user}\n\t\t\t\t<div class=\" flex flex-col gap-2 w-full rounded-lg\">\n\t\t\t\t\t<div class=\"py-8 relative bg-gray-900 rounded-t-lg\">\n\t\t\t\t\t\t<img\n\t\t\t\t\t\t\tcrossorigin=\"anonymous\"\n\t\t\t\t\t\t\tsrc={user?.profile_image_url ?? `${WEBUI_BASE_URL}/static/favicon.png`}\n\t\t\t\t\t\t\tclass=\" absolute -bottom-5 left-3 size-12 ml-0.5 object-cover rounded-full -translate-y-[1px]\"\n\t\t\t\t\t\t\talt=\"profile\"\n\t\t\t\t\t\t/>\n\t\t\t\t\t</div>\n\n\t\t\t\t\t<div class=\" flex flex-col pt-4 pb-2.5 px-4\">\n\t\t\t\t\t\t<div class=\" -mb-1\">\n\t\t\t\t\t\t\t<span class=\"font-medium text-sm line-clamp-1\"> {user.name} </span>\n\t\t\t\t\t\t</div>\n\n\t\t\t\t\t\t<div class=\" flex items-center gap-2\">\n\t\t\t\t\t\t\t{#if active}\n\t\t\t\t\t\t\t\t<div>\n\t\t\t\t\t\t\t\t\t<span class=\"relative flex size-2\">\n\t\t\t\t\t\t\t\t\t\t<span\n\t\t\t\t\t\t\t\t\t\t\tclass=\"animate-ping absolute inline-flex h-full w-full rounded-full bg-green-400 opacity-75\"\n\t\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t\t\t<span class=\"relative inline-flex rounded-full size-2 bg-green-500\" />\n\t\t\t\t\t\t\t\t\t</span>\n\t\t\t\t\t\t\t\t</div>\n\n\t\t\t\t\t\t\t\t<div class=\" -translate-y-[1px]\">\n\t\t\t\t\t\t\t\t\t<span class=\"text-xs\"> Active </span>\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t{:else}\n\t\t\t\t\t\t\t\t<div>\n\t\t\t\t\t\t\t\t\t<span class=\"relative flex size-2\">\n\t\t\t\t\t\t\t\t\t\t<span class=\"relative inline-flex rounded-full size-2 bg-gray-500\" />\n\t\t\t\t\t\t\t\t\t</span>\n\t\t\t\t\t\t\t\t</div>\n\n\t\t\t\t\t\t\t\t<div class=\" -translate-y-[1px]\">\n\t\t\t\t\t\t\t\t\t<span class=\"text-xs\"> Away </span>\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t{/if}\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t{/if}\n\t\t</DropdownMenu.Content>\n\t</slot>\n</DropdownMenu.Root>\n","<script lang=\"ts\">\n\texport let className = 'size-4';\n\texport let strokeWidth = '1.5';\n</script>\n\n<svg\n\txmlns=\"http://www.w3.org/2000/svg\"\n\tfill=\"none\"\n\tviewBox=\"0 0 24 24\"\n\tstroke-width={strokeWidth}\n\tstroke=\"currentColor\"\n\tclass={className}\n>\n\t<path\n\t\tstroke-linecap=\"round\"\n\t\tstroke-linejoin=\"round\"\n\t\td=\"M8.625 12a.375.375 0 1 1-.75 0 .375.375 0 0 1 .75 0Zm0 0H8.25m4.125 0a.375.375 0 1 1-.75 0 .375.375 0 0 1 .75 0Zm0 0H12m4.125 0a.375.375 0 1 1-.75 0 .375.375 0 0 1 .75 0Zm0 0h-.375M21 12c0 4.556-4.03 8.25-9 8.25a9.764 9.764 0 0 1-2.555-.337A5.972 5.972 0 0 1 5.41 20.97a5.969 5.969 0 0 1-.474-.065 4.48 4.48 0 0 0 .978-2.025c.09-.457-.133-.901-.467-1.226C3.93 16.178 3 14.189 3 12c0-4.556 4.03-8.25 9-8.25s9 3.694 9 8.25Z\"\n\t/>\n</svg>\n","<script lang=\"ts\">\n\texport let className = 'size-4';\n\texport let strokeWidth = '1.5';\n</script>\n\n<svg\n\txmlns=\"http://www.w3.org/2000/svg\"\n\tfill=\"none\"\n\tviewBox=\"0 0 24 24\"\n\tstroke-width={strokeWidth}\n\tstroke=\"currentColor\"\n\tclass={className}\n>\n\t<path\n\t\tstroke-linecap=\"round\"\n\t\tstroke-linejoin=\"round\"\n\t\td=\"M15.182 15.182a4.5 4.5 0 0 1-6.364 0M21 12a9 9 0 1 1-18 0 9 9 0 0 1 18 0ZM9.75 9.75c0 .414-.168.75-.375.75S9 10.164 9 9.75 9.168 9 9.375 9s.375.336.375.75Zm-.375 0h.008v.015h-.008V9.75Zm5.625 0c0 .414-.168.75-.375.75s-.375-.336-.375-.75.168-.75.375-.75.375.336.375.75Zm-.375 0h.008v.015h-.008V9.75Z\"\n\t/>\n</svg>\n","<script>\n\timport { onMount, tick } from 'svelte';\n\n\t// props\n\texport let items;\n\texport let height = '100%';\n\texport let itemHeight = undefined;\n\n\tlet foo;\n\n\t// read-only, but visible to consumers via bind:start\n\texport let start = 0;\n\texport let end = 0;\n\n\t// local state\n\tlet height_map = [];\n\tlet rows;\n\tlet viewport;\n\tlet contents;\n\tlet viewport_height = 0;\n\tlet visible;\n\tlet mounted;\n\n\tlet top = 0;\n\tlet bottom = 0;\n\tlet average_height;\n\n\t$: visible = items.slice(start, end).map((data, i) => {\n\t\treturn { index: i + start, data };\n\t});\n\n\t// whenever `items` changes, invalidate the current heightmap\n\t$: if (mounted) refresh(items, viewport_height, itemHeight);\n\n\tasync function refresh(items, viewport_height, itemHeight) {\n\t\tconst { scrollTop } = viewport;\n\n\t\tawait tick(); // wait until the DOM is up to date\n\n\t\tlet content_height = top - scrollTop;\n\t\tlet i = start;\n\n\t\twhile (content_height < viewport_height && i < items.length) {\n\t\t\tlet row = rows[i - start];\n\n\t\t\tif (!row) {\n\t\t\t\tend = i + 1;\n\t\t\t\tawait tick(); // render the newly visible row\n\t\t\t\trow = rows[i - start];\n\t\t\t}\n\n\t\t\tconst row_height = height_map[i] = itemHeight || row.offsetHeight;\n\t\t\tcontent_height += row_height;\n\t\t\ti += 1;\n\t\t}\n\n\t\tend = i;\n\n\t\tconst remaining = items.length - end;\n\t\taverage_height = (top + content_height) / end;\n\n\t\tbottom = remaining * average_height;\n\t\theight_map.length = items.length;\n\n\t}\n\n\tasync function handle_scroll() {\n\t\tconst { scrollTop } = viewport;\n\n\t\tconst old_start = start;\n\n\t\tfor (let v = 0; v < rows.length; v += 1) {\n\t\t\theight_map[start + v] = itemHeight || rows[v].offsetHeight;\n\t\t}\n\n\t\tlet i = 0;\n\t\tlet y = 0;\n\n\t\twhile (i < items.length) {\n\t\t\tconst row_height = height_map[i] || average_height;\n\t\t\tif (y + row_height > scrollTop) {\n\t\t\t\tstart = i;\n\t\t\t\ttop = y;\n\n\t\t\t\tbreak;\n\t\t\t}\n\n\t\t\ty += row_height;\n\t\t\ti += 1;\n\t\t}\n\n\t\twhile (i < items.length) {\n\t\t\ty += height_map[i] || average_height;\n\t\t\ti += 1;\n\n\t\t\tif (y > scrollTop + viewport_height) break;\n\t\t}\n\n\t\tend = i;\n\n\t\tconst remaining = items.length - end;\n\t\taverage_height = y / end;\n\n\t\twhile (i < items.length) height_map[i++] = average_height;\n\t\tbottom = remaining * average_height;\n\n\t\t// prevent jumping if we scrolled up into unknown territory\n\t\tif (start < old_start) {\n\t\t\tawait tick();\n\n\t\t\tlet expected_height = 0;\n\t\t\tlet actual_height = 0;\n\n\t\t\tfor (let i = start; i < old_start; i +=1) {\n\t\t\t\tif (rows[i - start]) {\n\t\t\t\t\texpected_height += height_map[i];\n\t\t\t\t\tactual_height += itemHeight || rows[i - start].offsetHeight;\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tconst d = actual_height - expected_height;\n\t\t\tviewport.scrollTo(0, scrollTop + d);\n\t\t}\n\n\t\t// TODO if we overestimated the space these\n\t\t// rows would occupy we may need to add some\n\t\t// more. maybe we can just call handle_scroll again?\n\t}\n\n\t// trigger initial refresh\n\tonMount(() => {\n\t\trows = contents.getElementsByTagName('svelte-virtual-list-row');\n\t\tmounted = true;\n\t});\n</script>\n\n<style>\n\tsvelte-virtual-list-viewport {\n\t\tposition: relative;\n\t\toverflow-y: auto;\n\t\t-webkit-overflow-scrolling:touch;\n\t\tdisplay: block;\n\t}\n\n\tsvelte-virtual-list-contents, svelte-virtual-list-row {\n\t\tdisplay: block;\n\t}\n\n\tsvelte-virtual-list-row {\n\t\toverflow: hidden;\n\t}\n</style>\n\n<svelte-virtual-list-viewport\n\tbind:this={viewport}\n\tbind:offsetHeight={viewport_height}\n\ton:scroll={handle_scroll}\n\tstyle=\"height: {height};\"\n>\n\t<svelte-virtual-list-contents\n\t\tbind:this={contents}\n\t\tstyle=\"padding-top: {top}px; padding-bottom: {bottom}px;\"\n\t>\n\t\t{#each visible as row (row.index)}\n\t\t\t<svelte-virtual-list-row>\n\t\t\t\t<slot item={row.data}>Missing template</slot>\n\t\t\t</svelte-virtual-list-row>\n\t\t{/each}\n\t</svelte-virtual-list-contents>\n</svelte-virtual-list-viewport>\n","<script lang=\"ts\">\n\timport { DropdownMenu } from 'bits-ui';\n\timport { flyAndScale } from '$lib/utils/transitions';\n\timport emojiGroups from '$lib/emoji-groups.json';\n\timport emojiShortCodes from '$lib/emoji-shortcodes.json';\n\timport Tooltip from '$lib/components/common/Tooltip.svelte';\n\timport VirtualList from '@sveltejs/svelte-virtual-list';\n\timport { WEBUI_BASE_URL } from '$lib/constants';\n\n\texport let onClose = () => {};\n\texport let onSubmit = (name) => {};\n\texport let side = 'top';\n\texport let align = 'start';\n\texport let user = null;\n\n\tlet show = false;\n\tlet emojis = emojiShortCodes;\n\tlet search = '';\n\tlet flattenedEmojis = [];\n\tlet emojiRows = [];\n\n\t// Reactive statement to filter the emojis based on search query\n\t$: {\n\t\tif (search) {\n\t\t\temojis = Object.keys(emojiShortCodes).reduce((acc, key) => {\n\t\t\t\tif (key.includes(search)) {\n\t\t\t\t\tacc[key] = emojiShortCodes[key];\n\t\t\t\t} else {\n\t\t\t\t\tif (Array.isArray(emojiShortCodes[key])) {\n\t\t\t\t\t\tconst filtered = emojiShortCodes[key].filter((emoji) => emoji.includes(search));\n\t\t\t\t\t\tif (filtered.length) {\n\t\t\t\t\t\t\tacc[key] = filtered;\n\t\t\t\t\t\t}\n\t\t\t\t\t} else {\n\t\t\t\t\t\tif (emojiShortCodes[key].includes(search)) {\n\t\t\t\t\t\t\tacc[key] = emojiShortCodes[key];\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\treturn acc;\n\t\t\t}, {});\n\t\t} else {\n\t\t\temojis = emojiShortCodes;\n\t\t}\n\t}\n\t// Flatten emoji groups and group them into rows of 8 for virtual scrolling\n\t$: {\n\t\tflattenedEmojis = [];\n\t\tObject.keys(emojiGroups).forEach((group) => {\n\t\t\tconst groupEmojis = emojiGroups[group].filter((emoji) => emojis[emoji]);\n\t\t\tif (groupEmojis.length > 0) {\n\t\t\t\tflattenedEmojis.push({ type: 'group', label: group });\n\t\t\t\tflattenedEmojis.push(\n\t\t\t\t\t...groupEmojis.map((emoji) => ({\n\t\t\t\t\t\ttype: 'emoji',\n\t\t\t\t\t\tname: emoji,\n\t\t\t\t\t\tshortCodes:\n\t\t\t\t\t\t\ttypeof emojiShortCodes[emoji] === 'string'\n\t\t\t\t\t\t\t\t? [emojiShortCodes[emoji]]\n\t\t\t\t\t\t\t\t: emojiShortCodes[emoji]\n\t\t\t\t\t}))\n\t\t\t\t);\n\t\t\t}\n\t\t});\n\t\t// Group emojis into rows of 8\n\t\temojiRows = [];\n\t\tlet currentRow = [];\n\t\tflattenedEmojis.forEach((item) => {\n\t\t\tif (item.type === 'emoji') {\n\t\t\t\tcurrentRow.push(item);\n\t\t\t\tif (currentRow.length === 8) {\n\t\t\t\t\temojiRows.push(currentRow);\n\t\t\t\t\tcurrentRow = [];\n\t\t\t\t}\n\t\t\t} else if (item.type === 'group') {\n\t\t\t\tif (currentRow.length > 0) {\n\t\t\t\t\temojiRows.push(currentRow); // Push the remaining row\n\t\t\t\t\tcurrentRow = [];\n\t\t\t\t}\n\t\t\t\temojiRows.push([item]); // Add the group label as a separate row\n\t\t\t}\n\t\t});\n\t\tif (currentRow.length > 0) {\n\t\t\temojiRows.push(currentRow); // Push the final row\n\t\t}\n\t}\n\tconst ROW_HEIGHT = 48; // Approximate height for a row with multiple emojis\n\t// Handle emoji selection\n\tfunction selectEmoji(emoji) {\n\t\tconst selectedCode = emoji.shortCodes[0];\n\t\tonSubmit(selectedCode);\n\t\tshow = false;\n\t}\n</script>\n\n<DropdownMenu.Root\n\tbind:open={show}\n\tcloseFocus={false}\n\tonOpenChange={(state) => {\n\t\tif (!state) {\n\t\t\tsearch = '';\n\t\t\tonClose();\n\t\t}\n\t}}\n\ttypeahead={false}\n>\n\t<DropdownMenu.Trigger>\n\t\t<slot />\n\t</DropdownMenu.Trigger>\n\t<DropdownMenu.Content\n\t\tclass=\"max-w-full w-80 bg-gray-50 dark:bg-gray-850 rounded-lg z-9999 shadow-lg dark:text-white\"\n\t\tsideOffset={8}\n\t\t{side}\n\t\t{align}\n\t\ttransition={flyAndScale}\n\t>\n\t\t<div class=\"mb-1 px-3 pt-2 pb-2\">\n\t\t\t<input\n\t\t\t\ttype=\"text\"\n\t\t\t\tclass=\"w-full text-sm bg-transparent outline-hidden\"\n\t\t\t\tplaceholder=\"Search all emojis\"\n\t\t\t\tbind:value={search}\n\t\t\t/>\n\t\t</div>\n\t\t<!-- Virtualized Emoji List -->\n\t\t<div class=\"w-full flex justify-start h-96 overflow-y-auto px-3 pb-3 text-sm\">\n\t\t\t{#if emojiRows.length === 0}\n\t\t\t\t<div class=\"text-center text-xs text-gray-500 dark:text-gray-400\">No results</div>\n\t\t\t{:else}\n\t\t\t\t<div class=\"w-full flex ml-0.5\">\n\t\t\t\t\t<VirtualList rowHeight={ROW_HEIGHT} items={emojiRows} height={384} let:item>\n\t\t\t\t\t\t<div class=\"w-full\">\n\t\t\t\t\t\t\t{#if item.length === 1 && item[0].type === 'group'}\n\t\t\t\t\t\t\t\t<!-- Render group header -->\n\t\t\t\t\t\t\t\t<div class=\"text-xs font-medium mb-2 text-gray-500 dark:text-gray-400\">\n\t\t\t\t\t\t\t\t\t{item[0].label}\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t{:else}\n\t\t\t\t\t\t\t\t<!-- Render emojis in a row -->\n\t\t\t\t\t\t\t\t<div class=\"flex items-center gap-1.5 w-full\">\n\t\t\t\t\t\t\t\t\t{#each item as emojiItem}\n\t\t\t\t\t\t\t\t\t\t<Tooltip\n\t\t\t\t\t\t\t\t\t\t\tcontent={emojiItem.shortCodes.map((code) => `:${code}:`).join(', ')}\n\t\t\t\t\t\t\t\t\t\t\tplacement=\"top\"\n\t\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\t\t<button\n\t\t\t\t\t\t\t\t\t\t\t\tclass=\"p-1.5 rounded-lg cursor-pointer hover:bg-gray-200 dark:hover:bg-gray-700 transition\"\n\t\t\t\t\t\t\t\t\t\t\t\ton:click={() => selectEmoji(emojiItem)}\n\t\t\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\t\t\t<img\n\t\t\t\t\t\t\t\t\t\t\t\t\tsrc=\"{WEBUI_BASE_URL}/assets/emojis/{emojiItem.name.toLowerCase()}.svg\"\n\t\t\t\t\t\t\t\t\t\t\t\t\talt={emojiItem.name}\n\t\t\t\t\t\t\t\t\t\t\t\t\tclass=\"size-5\"\n\t\t\t\t\t\t\t\t\t\t\t\t\tloading=\"lazy\"\n\t\t\t\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t\t\t\t</button>\n\t\t\t\t\t\t\t\t\t\t</Tooltip>\n\t\t\t\t\t\t\t\t\t{/each}\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t{/if}\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</VirtualList>\n\t\t\t\t</div>\n\t\t\t{/if}\n\t\t</div>\n\t</DropdownMenu.Content>\n</DropdownMenu.Root>\n","<script lang=\"ts\">\n\timport dayjs from 'dayjs';\n\timport relativeTime from 'dayjs/plugin/relativeTime';\n\timport isToday from 'dayjs/plugin/isToday';\n\timport isYesterday from 'dayjs/plugin/isYesterday';\n\timport localizedFormat from 'dayjs/plugin/localizedFormat';\n\n\tdayjs.extend(relativeTime);\n\tdayjs.extend(isToday);\n\tdayjs.extend(isYesterday);\n\tdayjs.extend(localizedFormat);\n\n\timport { getContext, onMount } from 'svelte';\n\tconst i18n = getContext<Writable<i18nType>>('i18n');\n\n\timport { settings, user, shortCodesToEmojis } from '$lib/stores';\n\n\timport { WEBUI_BASE_URL } from '$lib/constants';\n\n\timport Markdown from '$lib/components/chat/Messages/Markdown.svelte';\n\timport ProfileImage from '$lib/components/chat/Messages/ProfileImage.svelte';\n\timport Name from '$lib/components/chat/Messages/Name.svelte';\n\timport ConfirmDialog from '$lib/components/common/ConfirmDialog.svelte';\n\timport GarbageBin from '$lib/components/icons/GarbageBin.svelte';\n\timport Pencil from '$lib/components/icons/Pencil.svelte';\n\timport Tooltip from '$lib/components/common/Tooltip.svelte';\n\timport Textarea from '$lib/components/common/Textarea.svelte';\n\timport Image from '$lib/components/common/Image.svelte';\n\timport FileItem from '$lib/components/common/FileItem.svelte';\n\timport ProfilePreview from './Message/ProfilePreview.svelte';\n\timport ChatBubbleOvalEllipsis from '$lib/components/icons/ChatBubbleOvalEllipsis.svelte';\n\timport FaceSmile from '$lib/components/icons/FaceSmile.svelte';\n\timport ReactionPicker from './Message/ReactionPicker.svelte';\n\timport ChevronRight from '$lib/components/icons/ChevronRight.svelte';\n\timport { formatDate } from '$lib/utils';\n\n\texport let message;\n\texport let showUserProfile = true;\n\texport let thread = false;\n\n\texport let onDelete: Function = () => {};\n\texport let onEdit: Function = () => {};\n\texport let onThread: Function = () => {};\n\texport let onReaction: Function = () => {};\n\n\tlet showButtons = false;\n\n\tlet edit = false;\n\tlet editedContent = null;\n\tlet showDeleteConfirmDialog = false;\n</script>\n\n<ConfirmDialog\n\tbind:show={showDeleteConfirmDialog}\n\ttitle={$i18n.t('Delete Message')}\n\tmessage={$i18n.t('Are you sure you want to delete this message?')}\n\tonConfirm={async () => {\n\t\tawait onDelete();\n\t}}\n/>\n\n{#if message}\n\t<div\n\t\tclass=\"flex flex-col justify-between px-5 {showUserProfile\n\t\t\t? 'pt-1.5 pb-0.5'\n\t\t\t: ''} w-full {($settings?.widescreenMode ?? null)\n\t\t\t? 'max-w-full'\n\t\t\t: 'max-w-5xl'} mx-auto group hover:bg-gray-300/5 dark:hover:bg-gray-700/5 transition relative\"\n\t>\n\t\t{#if !edit}\n\t\t\t<div\n\t\t\t\tclass=\" absolute {showButtons ? '' : 'invisible group-hover:visible'} right-1 -top-2 z-10\"\n\t\t\t>\n\t\t\t\t<div\n\t\t\t\t\tclass=\"flex gap-1 rounded-lg bg-white dark:bg-gray-850 shadow-md p-0.5 border border-gray-100 dark:border-gray-850\"\n\t\t\t\t>\n\t\t\t\t\t<ReactionPicker\n\t\t\t\t\t\tonClose={() => (showButtons = false)}\n\t\t\t\t\t\tonSubmit={(name) => {\n\t\t\t\t\t\t\tshowButtons = false;\n\t\t\t\t\t\t\tonReaction(name);\n\t\t\t\t\t\t}}\n\t\t\t\t\t>\n\t\t\t\t\t\t<Tooltip content={$i18n.t('Add Reaction')}>\n\t\t\t\t\t\t\t<button\n\t\t\t\t\t\t\t\tclass=\"hover:bg-gray-100 dark:hover:bg-gray-800 transition rounded-lg p-1\"\n\t\t\t\t\t\t\t\ton:click={() => {\n\t\t\t\t\t\t\t\t\tshowButtons = true;\n\t\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t<FaceSmile />\n\t\t\t\t\t\t\t</button>\n\t\t\t\t\t\t</Tooltip>\n\t\t\t\t\t</ReactionPicker>\n\n\t\t\t\t\t{#if !thread}\n\t\t\t\t\t\t<Tooltip content={$i18n.t('Reply in Thread')}>\n\t\t\t\t\t\t\t<button\n\t\t\t\t\t\t\t\tclass=\"hover:bg-gray-100 dark:hover:bg-gray-800 transition rounded-lg p-1\"\n\t\t\t\t\t\t\t\ton:click={() => {\n\t\t\t\t\t\t\t\t\tonThread(message.id);\n\t\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t<ChatBubbleOvalEllipsis />\n\t\t\t\t\t\t\t</button>\n\t\t\t\t\t\t</Tooltip>\n\t\t\t\t\t{/if}\n\n\t\t\t\t\t{#if message.user_id === $user?.id || $user?.role === 'admin'}\n\t\t\t\t\t\t<Tooltip content={$i18n.t('Edit')}>\n\t\t\t\t\t\t\t<button\n\t\t\t\t\t\t\t\tclass=\"hover:bg-gray-100 dark:hover:bg-gray-800 transition rounded-lg p-1\"\n\t\t\t\t\t\t\t\ton:click={() => {\n\t\t\t\t\t\t\t\t\tedit = true;\n\t\t\t\t\t\t\t\t\teditedContent = message.content;\n\t\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t<Pencil />\n\t\t\t\t\t\t\t</button>\n\t\t\t\t\t\t</Tooltip>\n\n\t\t\t\t\t\t<Tooltip content={$i18n.t('Delete')}>\n\t\t\t\t\t\t\t<button\n\t\t\t\t\t\t\t\tclass=\"hover:bg-gray-100 dark:hover:bg-gray-800 transition rounded-lg p-1\"\n\t\t\t\t\t\t\t\ton:click={() => (showDeleteConfirmDialog = true)}\n\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t<GarbageBin />\n\t\t\t\t\t\t\t</button>\n\t\t\t\t\t\t</Tooltip>\n\t\t\t\t\t{/if}\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t{/if}\n\n\t\t<div\n\t\t\tclass=\" flex w-full message-{message.id}\"\n\t\t\tid=\"message-{message.id}\"\n\t\t\tdir={$settings.chatDirection}\n\t\t>\n\t\t\t<div\n\t\t\t\tclass={`shrink-0 ${($settings?.chatDirection ?? 'LTR') === 'LTR' ? 'mr-3' : 'ml-3'} w-9`}\n\t\t\t>\n\t\t\t\t{#if showUserProfile}\n\t\t\t\t\t<ProfilePreview user={message.user}>\n\t\t\t\t\t\t<ProfileImage\n\t\t\t\t\t\t\tsrc={message.user?.profile_image_url ??\n\t\t\t\t\t\t\t\t($i18n.language === 'dg-DG'\n\t\t\t\t\t\t\t\t\t? `${WEBUI_BASE_URL}/doge.png`\n\t\t\t\t\t\t\t\t\t: `${WEBUI_BASE_URL}/static/favicon.png`)}\n\t\t\t\t\t\t\tclassName={'size-8 translate-y-1 ml-0.5'}\n\t\t\t\t\t\t/>\n\t\t\t\t\t</ProfilePreview>\n\t\t\t\t{:else}\n\t\t\t\t\t<!-- <div class=\"w-7 h-7 rounded-full bg-transparent\" /> -->\n\n\t\t\t\t\t{#if message.created_at}\n\t\t\t\t\t\t<div\n\t\t\t\t\t\t\tclass=\"mt-1.5 flex shrink-0 items-center text-xs self-center invisible group-hover:visible text-gray-500 font-medium first-letter:capitalize\"\n\t\t\t\t\t\t>\n\t\t\t\t\t\t\t<Tooltip content={dayjs(message.created_at / 1000000).format('LLLL')}>\n\t\t\t\t\t\t\t\t{dayjs(message.created_at / 1000000).format('HH:mm')}\n\t\t\t\t\t\t\t</Tooltip>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t{/if}\n\t\t\t\t{/if}\n\t\t\t</div>\n\n\t\t\t<div class=\"flex-auto w-0 pl-1\">\n\t\t\t\t{#if showUserProfile}\n\t\t\t\t\t<Name>\n\t\t\t\t\t\t<div class=\" self-end text-base shrink-0 font-medium truncate\">\n\t\t\t\t\t\t\t{message?.user?.name}\n\t\t\t\t\t\t</div>\n\n\t\t\t\t\t\t{#if message.created_at}\n\t\t\t\t\t\t\t<div\n\t\t\t\t\t\t\t\tclass=\" self-center text-xs invisible group-hover:visible text-gray-400 font-medium first-letter:capitalize ml-0.5 translate-y-[1px]\"\n\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t<Tooltip content={dayjs(message.created_at / 1000000).format('LLLL')}>\n\t\t\t\t\t\t\t\t\t<span class=\"line-clamp-1\">{formatDate(message.created_at / 1000000)}</span>\n\t\t\t\t\t\t\t\t</Tooltip>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t{/if}\n\t\t\t\t\t</Name>\n\t\t\t\t{/if}\n\n\t\t\t\t{#if (message?.data?.files ?? []).length > 0}\n\t\t\t\t\t<div class=\"my-2.5 w-full flex overflow-x-auto gap-2 flex-wrap\">\n\t\t\t\t\t\t{#each message?.data?.files as file}\n\t\t\t\t\t\t\t<div>\n\t\t\t\t\t\t\t\t{#if file.type === 'image'}\n\t\t\t\t\t\t\t\t\t<Image src={file.url} alt={file.name} imageClassName=\" max-h-96 rounded-lg\" />\n\t\t\t\t\t\t\t\t{:else}\n\t\t\t\t\t\t\t\t\t<FileItem\n\t\t\t\t\t\t\t\t\t\titem={file}\n\t\t\t\t\t\t\t\t\t\turl={file.url}\n\t\t\t\t\t\t\t\t\t\tname={file.name}\n\t\t\t\t\t\t\t\t\t\ttype={file.type}\n\t\t\t\t\t\t\t\t\t\tsize={file?.size}\n\t\t\t\t\t\t\t\t\t\tcolorClassName=\"bg-white dark:bg-gray-850 \"\n\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t{/if}\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t{/each}\n\t\t\t\t\t</div>\n\t\t\t\t{/if}\n\n\t\t\t\t{#if edit}\n\t\t\t\t\t<div class=\"py-2\">\n\t\t\t\t\t\t<Textarea\n\t\t\t\t\t\t\tclassName=\" bg-transparent outline-hidden w-full resize-none\"\n\t\t\t\t\t\t\tbind:value={editedContent}\n\t\t\t\t\t\t\tonKeydown={(e) => {\n\t\t\t\t\t\t\t\tif (e.key === 'Escape') {\n\t\t\t\t\t\t\t\t\tdocument.getElementById('close-edit-message-button')?.click();\n\t\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\t\tconst isCmdOrCtrlPressed = e.metaKey || e.ctrlKey;\n\t\t\t\t\t\t\t\tconst isEnterPressed = e.key === 'Enter';\n\n\t\t\t\t\t\t\t\tif (isCmdOrCtrlPressed && isEnterPressed) {\n\t\t\t\t\t\t\t\t\tdocument.getElementById('confirm-edit-message-button')?.click();\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t/>\n\t\t\t\t\t\t<div class=\" mt-2 mb-1 flex justify-end text-sm font-medium\">\n\t\t\t\t\t\t\t<div class=\"flex space-x-1.5\">\n\t\t\t\t\t\t\t\t<button\n\t\t\t\t\t\t\t\t\tid=\"close-edit-message-button\"\n\t\t\t\t\t\t\t\t\tclass=\"px-4 py-2 bg-white dark:bg-gray-900 hover:bg-gray-100 text-gray-800 dark:text-gray-100 transition rounded-3xl\"\n\t\t\t\t\t\t\t\t\ton:click={() => {\n\t\t\t\t\t\t\t\t\t\tedit = false;\n\t\t\t\t\t\t\t\t\t\teditedContent = null;\n\t\t\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t{$i18n.t('Cancel')}\n\t\t\t\t\t\t\t\t</button>\n\n\t\t\t\t\t\t\t\t<button\n\t\t\t\t\t\t\t\t\tid=\"confirm-edit-message-button\"\n\t\t\t\t\t\t\t\t\tclass=\" px-4 py-2 bg-gray-900 dark:bg-white hover:bg-gray-850 text-gray-100 dark:text-gray-800 transition rounded-3xl\"\n\t\t\t\t\t\t\t\t\ton:click={async () => {\n\t\t\t\t\t\t\t\t\t\tonEdit(editedContent);\n\t\t\t\t\t\t\t\t\t\tedit = false;\n\t\t\t\t\t\t\t\t\t\teditedContent = null;\n\t\t\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t{$i18n.t('Save')}\n\t\t\t\t\t\t\t\t</button>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\t\t\t\t{:else}\n\t\t\t\t\t<div class=\" min-w-full markdown-prose\">\n\t\t\t\t\t\t<Markdown\n\t\t\t\t\t\t\tid={message.id}\n\t\t\t\t\t\t\tcontent={message.content}\n\t\t\t\t\t\t/>{#if message.created_at !== message.updated_at}<span class=\"text-gray-500 text-[10px]\"\n\t\t\t\t\t\t\t\t>(edited)</span\n\t\t\t\t\t\t\t>{/if}\n\t\t\t\t\t</div>\n\n\t\t\t\t\t{#if (message?.reactions ?? []).length > 0}\n\t\t\t\t\t\t<div>\n\t\t\t\t\t\t\t<div class=\"flex items-center flex-wrap gap-y-1.5 gap-1 mt-1 mb-2\">\n\t\t\t\t\t\t\t\t{#each message.reactions as reaction}\n\t\t\t\t\t\t\t\t\t<Tooltip content={`:${reaction.name}:`}>\n\t\t\t\t\t\t\t\t\t\t<button\n\t\t\t\t\t\t\t\t\t\t\tclass=\"flex items-center gap-1.5 transition rounded-xl px-2 py-1 cursor-pointer {reaction.user_ids.includes(\n\t\t\t\t\t\t\t\t\t\t\t\t$user?.id\n\t\t\t\t\t\t\t\t\t\t\t)\n\t\t\t\t\t\t\t\t\t\t\t\t? ' bg-blue-300/10 outline outline-blue-500/50 outline-1'\n\t\t\t\t\t\t\t\t\t\t\t\t: 'bg-gray-300/10 dark:bg-gray-500/10 hover:outline hover:outline-gray-700/30 dark:hover:outline-gray-300/30 hover:outline-1'}\"\n\t\t\t\t\t\t\t\t\t\t\ton:click={() => {\n\t\t\t\t\t\t\t\t\t\t\t\tonReaction(reaction.name);\n\t\t\t\t\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\t\t{#if $shortCodesToEmojis[reaction.name]}\n\t\t\t\t\t\t\t\t\t\t\t\t<img\n\t\t\t\t\t\t\t\t\t\t\t\t\tsrc=\"{WEBUI_BASE_URL}/assets/emojis/{$shortCodesToEmojis[\n\t\t\t\t\t\t\t\t\t\t\t\t\t\treaction.name\n\t\t\t\t\t\t\t\t\t\t\t\t\t].toLowerCase()}.svg\"\n\t\t\t\t\t\t\t\t\t\t\t\t\talt={reaction.name}\n\t\t\t\t\t\t\t\t\t\t\t\t\tclass=\" size-4\"\n\t\t\t\t\t\t\t\t\t\t\t\t\tloading=\"lazy\"\n\t\t\t\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t\t\t\t{:else}\n\t\t\t\t\t\t\t\t\t\t\t\t<div>\n\t\t\t\t\t\t\t\t\t\t\t\t\t{reaction.name}\n\t\t\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t\t\t{/if}\n\n\t\t\t\t\t\t\t\t\t\t\t{#if reaction.user_ids.length > 0}\n\t\t\t\t\t\t\t\t\t\t\t\t<div class=\"text-xs font-medium text-gray-500 dark:text-gray-400\">\n\t\t\t\t\t\t\t\t\t\t\t\t\t{reaction.user_ids?.length}\n\t\t\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t\t\t{/if}\n\t\t\t\t\t\t\t\t\t\t</button>\n\t\t\t\t\t\t\t\t\t</Tooltip>\n\t\t\t\t\t\t\t\t{/each}\n\n\t\t\t\t\t\t\t\t<ReactionPicker\n\t\t\t\t\t\t\t\t\tonSubmit={(name) => {\n\t\t\t\t\t\t\t\t\t\tonReaction(name);\n\t\t\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t<Tooltip content={$i18n.t('Add Reaction')}>\n\t\t\t\t\t\t\t\t\t\t<div\n\t\t\t\t\t\t\t\t\t\t\tclass=\"flex items-center gap-1.5 bg-gray-500/10 hover:outline hover:outline-gray-700/30 dark:hover:outline-gray-300/30 hover:outline-1 transition rounded-xl px-1 py-1 cursor-pointer text-gray-500 dark:text-gray-400\"\n\t\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\t\t<FaceSmile />\n\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t</Tooltip>\n\t\t\t\t\t\t\t\t</ReactionPicker>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t{/if}\n\n\t\t\t\t\t{#if !thread && message.reply_count > 0}\n\t\t\t\t\t\t<div class=\"flex items-center gap-1.5 -mt-0.5 mb-1.5\">\n\t\t\t\t\t\t\t<button\n\t\t\t\t\t\t\t\tclass=\"flex items-center text-xs py-1 text-gray-500 dark:text-gray-400 hover:text-gray-700 dark:hover:text-gray-300 transition\"\n\t\t\t\t\t\t\t\ton:click={() => {\n\t\t\t\t\t\t\t\t\tonThread(message.id);\n\t\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t<span class=\"font-medium mr-1\">\n\t\t\t\t\t\t\t\t\t{$i18n.t('{{COUNT}} Replies', { COUNT: message.reply_count })}</span\n\t\t\t\t\t\t\t\t><span>\n\t\t\t\t\t\t\t\t\t{' - '}{$i18n.t('Last reply')}\n\t\t\t\t\t\t\t\t\t{dayjs.unix(message.latest_reply_at / 1000000000).fromNow()}</span\n\t\t\t\t\t\t\t\t>\n\n\t\t\t\t\t\t\t\t<span class=\"ml-1\">\n\t\t\t\t\t\t\t\t\t<ChevronRight className=\"size-2.5\" strokeWidth=\"3\" />\n\t\t\t\t\t\t\t\t</span>\n\t\t\t\t\t\t\t\t<!-- {$i18n.t('View Replies')} -->\n\t\t\t\t\t\t\t</button>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t{/if}\n\t\t\t\t{/if}\n\t\t\t</div>\n\t\t</div>\n\t</div>\n{/if}\n","<script lang=\"ts\">\n\timport { toast } from 'svelte-sonner';\n\n\timport dayjs from 'dayjs';\n\timport relativeTime from 'dayjs/plugin/relativeTime';\n\timport isToday from 'dayjs/plugin/isToday';\n\timport isYesterday from 'dayjs/plugin/isYesterday';\n\n\tdayjs.extend(relativeTime);\n\tdayjs.extend(isToday);\n\tdayjs.extend(isYesterday);\n\timport { tick, getContext, onMount, createEventDispatcher } from 'svelte';\n\n\timport { settings, user } from '$lib/stores';\n\n\timport Message from './Messages/Message.svelte';\n\timport Loader from '../common/Loader.svelte';\n\timport Spinner from '../common/Spinner.svelte';\n\timport { addReaction, deleteMessage, removeReaction, updateMessage } from '$lib/apis/channels';\n\n\tconst i18n = getContext('i18n');\n\n\texport let id = null;\n\texport let channel = null;\n\texport let messages = [];\n\texport let top = false;\n\texport let thread = false;\n\n\texport let onLoad: Function = () => {};\n\texport let onThread: Function = () => {};\n\n\tlet messagesLoading = false;\n\n\tconst loadMoreMessages = async () => {\n\t\t// scroll slightly down to disable continuous loading\n\t\tconst element = document.getElementById('messages-container');\n\t\telement.scrollTop = element.scrollTop + 100;\n\n\t\tmessagesLoading = true;\n\n\t\tawait onLoad();\n\n\t\tawait tick();\n\t\tmessagesLoading = false;\n\t};\n</script>\n\n{#if messages}\n\t{@const messageList = messages.slice().reverse()}\n\t<div>\n\t\t{#if !top}\n\t\t\t<Loader\n\t\t\t\ton:visible={(e) => {\n\t\t\t\t\tconsole.info('visible');\n\t\t\t\t\tif (!messagesLoading) {\n\t\t\t\t\t\tloadMoreMessages();\n\t\t\t\t\t}\n\t\t\t\t}}\n\t\t\t>\n\t\t\t\t<div class=\"w-full flex justify-center py-1 text-xs animate-pulse items-center gap-2\">\n\t\t\t\t\t<Spinner className=\" size-4\" />\n\t\t\t\t\t<div class=\" \">Loading...</div>\n\t\t\t\t</div>\n\t\t\t</Loader>\n\t\t{:else if !thread}\n\t\t\t<div\n\t\t\t\tclass=\"px-5\n\t\t\t\n\t\t\t{($settings?.widescreenMode ?? null) ? 'max-w-full' : 'max-w-5xl'} mx-auto\"\n\t\t\t>\n\t\t\t\t{#if channel}\n\t\t\t\t\t<div class=\"flex flex-col gap-1.5 pb-5 pt-10\">\n\t\t\t\t\t\t<div class=\"text-2xl font-medium capitalize\">{channel.name}</div>\n\n\t\t\t\t\t\t<div class=\" text-gray-500\">\n\t\t\t\t\t\t\t{$i18n.t(\n\t\t\t\t\t\t\t\t'This channel was created on {{createdAt}}. This is the very beginning of the {{channelName}} channel.',\n\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\tcreatedAt: dayjs(channel.created_at / 1000000).format('MMMM D, YYYY'),\n\t\t\t\t\t\t\t\t\tchannelName: channel.name\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\t\t\t\t{:else}\n\t\t\t\t\t<div class=\"flex justify-center text-xs items-center gap-2 py-5\">\n\t\t\t\t\t\t<div class=\" \">Start of the channel</div>\n\t\t\t\t\t</div>\n\t\t\t\t{/if}\n\n\t\t\t\t{#if messageList.length > 0}\n\t\t\t\t\t<hr class=\" border-gray-50 dark:border-gray-700/20 py-2.5 w-full\" />\n\t\t\t\t{/if}\n\t\t\t</div>\n\t\t{/if}\n\n\t\t{#each messageList as message, messageIdx (id ? `${id}-${message.id}` : message.id)}\n\t\t\t<Message\n\t\t\t\t{message}\n\t\t\t\t{thread}\n\t\t\t\tshowUserProfile={messageIdx === 0 ||\n\t\t\t\t\tmessageList.at(messageIdx - 1)?.user_id !== message.user_id}\n\t\t\t\tonDelete={() => {\n\t\t\t\t\tmessages = messages.filter((m) => m.id !== message.id);\n\n\t\t\t\t\tconst res = deleteMessage(localStorage.token, message.channel_id, message.id).catch(\n\t\t\t\t\t\t(error) => {\n\t\t\t\t\t\t\ttoast.error(`${error}`);\n\t\t\t\t\t\t\treturn null;\n\t\t\t\t\t\t}\n\t\t\t\t\t);\n\t\t\t\t}}\n\t\t\t\tonEdit={(content) => {\n\t\t\t\t\tmessages = messages.map((m) => {\n\t\t\t\t\t\tif (m.id === message.id) {\n\t\t\t\t\t\t\tm.content = content;\n\t\t\t\t\t\t}\n\t\t\t\t\t\treturn m;\n\t\t\t\t\t});\n\n\t\t\t\t\tconst res = updateMessage(localStorage.token, message.channel_id, message.id, {\n\t\t\t\t\t\tcontent: content\n\t\t\t\t\t}).catch((error) => {\n\t\t\t\t\t\ttoast.error(`${error}`);\n\t\t\t\t\t\treturn null;\n\t\t\t\t\t});\n\t\t\t\t}}\n\t\t\t\tonThread={(id) => {\n\t\t\t\t\tonThread(id);\n\t\t\t\t}}\n\t\t\t\tonReaction={(name) => {\n\t\t\t\t\tif (\n\t\t\t\t\t\t(message?.reactions ?? [])\n\t\t\t\t\t\t\t.find((reaction) => reaction.name === name)\n\t\t\t\t\t\t\t?.user_ids?.includes($user?.id) ??\n\t\t\t\t\t\tfalse\n\t\t\t\t\t) {\n\t\t\t\t\t\tmessages = messages.map((m) => {\n\t\t\t\t\t\t\tif (m.id === message.id) {\n\t\t\t\t\t\t\t\tconst reaction = m.reactions.find((reaction) => reaction.name === name);\n\n\t\t\t\t\t\t\t\tif (reaction) {\n\t\t\t\t\t\t\t\t\treaction.user_ids = reaction.user_ids.filter((id) => id !== $user?.id);\n\t\t\t\t\t\t\t\t\treaction.count = reaction.user_ids.length;\n\n\t\t\t\t\t\t\t\t\tif (reaction.count === 0) {\n\t\t\t\t\t\t\t\t\t\tm.reactions = m.reactions.filter((r) => r.name !== name);\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\treturn m;\n\t\t\t\t\t\t});\n\n\t\t\t\t\t\tconst res = removeReaction(\n\t\t\t\t\t\t\tlocalStorage.token,\n\t\t\t\t\t\t\tmessage.channel_id,\n\t\t\t\t\t\t\tmessage.id,\n\t\t\t\t\t\t\tname\n\t\t\t\t\t\t).catch((error) => {\n\t\t\t\t\t\t\ttoast.error(`${error}`);\n\t\t\t\t\t\t\treturn null;\n\t\t\t\t\t\t});\n\t\t\t\t\t} else {\n\t\t\t\t\t\tmessages = messages.map((m) => {\n\t\t\t\t\t\t\tif (m.id === message.id) {\n\t\t\t\t\t\t\t\tif (m.reactions) {\n\t\t\t\t\t\t\t\t\tconst reaction = m.reactions.find((reaction) => reaction.name === name);\n\n\t\t\t\t\t\t\t\t\tif (reaction) {\n\t\t\t\t\t\t\t\t\t\treaction.user_ids.push($user?.id);\n\t\t\t\t\t\t\t\t\t\treaction.count = reaction.user_ids.length;\n\t\t\t\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\t\t\tm.reactions.push({\n\t\t\t\t\t\t\t\t\t\t\tname: name,\n\t\t\t\t\t\t\t\t\t\t\tuser_ids: [$user?.id],\n\t\t\t\t\t\t\t\t\t\t\tcount: 1\n\t\t\t\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\treturn m;\n\t\t\t\t\t\t});\n\n\t\t\t\t\t\tconst res = addReaction(localStorage.token, message.channel_id, message.id, name).catch(\n\t\t\t\t\t\t\t(error) => {\n\t\t\t\t\t\t\t\ttoast.error(`${error}`);\n\t\t\t\t\t\t\t\treturn null;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t);\n\t\t\t\t\t}\n\t\t\t\t}}\n\t\t\t/>\n\t\t{/each}\n\n\t\t<div class=\"pb-6\" />\n\t</div>\n{/if}\n","<script lang=\"ts\">\n\timport { getContext } from 'svelte';\n\timport { toast } from 'svelte-sonner';\n\n\timport { showArchivedChats, showSidebar, user } from '$lib/stores';\n\n\timport { slide } from 'svelte/transition';\n\timport { page } from '$app/stores';\n\n\timport UserMenu from '$lib/components/layout/Sidebar/UserMenu.svelte';\n\timport MenuLines from '../icons/MenuLines.svelte';\n\timport PencilSquare from '../icons/PencilSquare.svelte';\n\n\tconst i18n = getContext('i18n');\n\n\texport let channel;\n</script>\n\n<nav class=\"sticky top-0 z-30 w-full px-1.5 py-1.5 -mb-8 flex items-center drag-region\">\n\t<div\n\t\tclass=\" bg-linear-to-b via-50% from-white via-white to-transparent dark:from-gray-900 dark:via-gray-900 dark:to-transparent pointer-events-none absolute inset-0 -bottom-7 z-[-1]\"\n\t></div>\n\n\t<div class=\" flex max-w-full w-full mx-auto px-1 pt-0.5 bg-transparent\">\n\t\t<div class=\"flex items-center w-full max-w-full\">\n\t\t\t<div\n\t\t\t\tclass=\"{$showSidebar\n\t\t\t\t\t? 'md:hidden'\n\t\t\t\t\t: ''} mr-1 self-start flex flex-none items-center text-gray-600 dark:text-gray-400\"\n\t\t\t>\n\t\t\t\t<button\n\t\t\t\t\tid=\"sidebar-toggle-button\"\n\t\t\t\t\tclass=\"cursor-pointer px-2 py-2 flex rounded-xl hover:bg-gray-50 dark:hover:bg-gray-850 transition\"\n\t\t\t\t\ton:click={() => {\n\t\t\t\t\t\tshowSidebar.set(!$showSidebar);\n\t\t\t\t\t}}\n\t\t\t\t\taria-label=\"Toggle Sidebar\"\n\t\t\t\t>\n\t\t\t\t\t<div class=\" m-auto self-center\">\n\t\t\t\t\t\t<MenuLines />\n\t\t\t\t\t</div>\n\t\t\t\t</button>\n\t\t\t</div>\n\n\t\t\t<div\n\t\t\t\tclass=\"flex-1 overflow-hidden max-w-full py-0.5\n\t\t\t{$showSidebar ? 'ml-1' : ''}\n\t\t\t\"\n\t\t\t>\n\t\t\t\t{#if channel}\n\t\t\t\t\t<div class=\"line-clamp-1 capitalize font-medium font-primary text-lg\">\n\t\t\t\t\t\t{channel.name}\n\t\t\t\t\t</div>\n\t\t\t\t{/if}\n\t\t\t</div>\n\n\t\t\t<div class=\"self-start flex flex-none items-center text-gray-600 dark:text-gray-400\">\n\t\t\t\t{#if $user !== undefined}\n\t\t\t\t\t<UserMenu\n\t\t\t\t\t\tclassName=\"max-w-[240px]\"\n\t\t\t\t\t\trole={$user?.role}\n\t\t\t\t\t\thelp={true}\n\t\t\t\t\t\ton:show={(e) => {\n\t\t\t\t\t\t\tif (e.detail === 'archived-chat') {\n\t\t\t\t\t\t\t\tshowArchivedChats.set(true);\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}}\n\t\t\t\t\t>\n\t\t\t\t\t\t<button\n\t\t\t\t\t\t\tclass=\"select-none flex rounded-xl p-1.5 w-full hover:bg-gray-50 dark:hover:bg-gray-850 transition\"\n\t\t\t\t\t\t\taria-label=\"User Menu\"\n\t\t\t\t\t\t>\n\t\t\t\t\t\t\t<div class=\" self-center\">\n\t\t\t\t\t\t\t\t<img\n\t\t\t\t\t\t\t\t\tsrc={$user?.profile_image_url}\n\t\t\t\t\t\t\t\t\tclass=\"size-6 object-cover rounded-full\"\n\t\t\t\t\t\t\t\t\talt=\"User profile\"\n\t\t\t\t\t\t\t\t\tdraggable=\"false\"\n\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t</button>\n\t\t\t\t\t</UserMenu>\n\t\t\t\t{/if}\n\t\t\t</div>\n\t\t</div>\n\t</div>\n</nav>\n","<script lang=\"ts\">\n\timport { goto } from '$app/navigation';\n\n\timport { socket, user } from '$lib/stores';\n\n\timport { getChannelThreadMessages, sendMessage } from '$lib/apis/channels';\n\n\timport XMark from '$lib/components/icons/XMark.svelte';\n\timport MessageInput from './MessageInput.svelte';\n\timport Messages from './Messages.svelte';\n\timport { onDestroy, onMount, tick } from 'svelte';\n\timport { toast } from 'svelte-sonner';\n\n\texport let threadId = null;\n\texport let channel = null;\n\n\texport let onClose = () => {};\n\n\tlet messages = null;\n\tlet top = false;\n\n\tlet typingUsers = [];\n\tlet typingUsersTimeout = {};\n\n\tlet messagesContainerElement = null;\n\n\t$: if (threadId) {\n\t\tinitHandler();\n\t}\n\n\tconst scrollToBottom = () => {\n\t\tmessagesContainerElement.scrollTop = messagesContainerElement.scrollHeight;\n\t};\n\n\tconst initHandler = async () => {\n\t\tmessages = null;\n\t\ttop = false;\n\n\t\ttypingUsers = [];\n\t\ttypingUsersTimeout = {};\n\n\t\tif (channel) {\n\t\t\tmessages = await getChannelThreadMessages(localStorage.token, channel.id, threadId);\n\n\t\t\tif (messages.length < 50) {\n\t\t\t\ttop = true;\n\t\t\t}\n\n\t\t\tawait tick();\n\t\t\tscrollToBottom();\n\t\t} else {\n\t\t\tgoto('/');\n\t\t}\n\t};\n\n\tconst channelEventHandler = async (event) => {\n\t\tconsole.debug(event);\n\t\tif (event.channel_id === channel.id) {\n\t\t\tconst type = event?.data?.type ?? null;\n\t\t\tconst data = event?.data?.data ?? null;\n\n\t\t\tif (type === 'message') {\n\t\t\t\tif ((data?.parent_id ?? null) === threadId) {\n\t\t\t\t\tif (messages) {\n\t\t\t\t\t\tmessages = [data, ...messages];\n\n\t\t\t\t\t\tif (typingUsers.find((user) => user.id === event.user.id)) {\n\t\t\t\t\t\t\ttypingUsers = typingUsers.filter((user) => user.id !== event.user.id);\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t} else if (type === 'message:update') {\n\t\t\t\tif (messages) {\n\t\t\t\t\tconst idx = messages.findIndex((message) => message.id === data.id);\n\n\t\t\t\t\tif (idx !== -1) {\n\t\t\t\t\t\tmessages[idx] = data;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t} else if (type === 'message:delete') {\n\t\t\t\tif (messages) {\n\t\t\t\t\tmessages = messages.filter((message) => message.id !== data.id);\n\t\t\t\t}\n\t\t\t} else if (type.includes('message:reaction')) {\n\t\t\t\tif (messages) {\n\t\t\t\t\tconst idx = messages.findIndex((message) => message.id === data.id);\n\t\t\t\t\tif (idx !== -1) {\n\t\t\t\t\t\tmessages[idx] = data;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t} else if (type === 'typing' && event.message_id === threadId) {\n\t\t\t\tif (event.user.id === $user?.id) {\n\t\t\t\t\treturn;\n\t\t\t\t}\n\n\t\t\t\ttypingUsers = data.typing\n\t\t\t\t\t? [\n\t\t\t\t\t\t\t...typingUsers,\n\t\t\t\t\t\t\t...(typingUsers.find((user) => user.id === event.user.id)\n\t\t\t\t\t\t\t\t? []\n\t\t\t\t\t\t\t\t: [\n\t\t\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\t\t\tid: event.user.id,\n\t\t\t\t\t\t\t\t\t\t\tname: event.user.name\n\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t])\n\t\t\t\t\t\t]\n\t\t\t\t\t: typingUsers.filter((user) => user.id !== event.user.id);\n\n\t\t\t\tif (typingUsersTimeout[event.user.id]) {\n\t\t\t\t\tclearTimeout(typingUsersTimeout[event.user.id]);\n\t\t\t\t}\n\n\t\t\t\ttypingUsersTimeout[event.user.id] = setTimeout(() => {\n\t\t\t\t\ttypingUsers = typingUsers.filter((user) => user.id !== event.user.id);\n\t\t\t\t}, 5000);\n\t\t\t}\n\t\t}\n\t};\n\n\tconst submitHandler = async ({ content, data }) => {\n\t\tif (!content && (data?.files ?? []).length === 0) {\n\t\t\treturn;\n\t\t}\n\n\t\tconst res = await sendMessage(localStorage.token, channel.id, {\n\t\t\tparent_id: threadId,\n\t\t\tcontent: content,\n\t\t\tdata: data\n\t\t}).catch((error) => {\n\t\t\ttoast.error(`${error}`);\n\t\t\treturn null;\n\t\t});\n\t};\n\n\tconst onChange = async () => {\n\t\t$socket?.emit('channel-events', {\n\t\t\tchannel_id: channel.id,\n\t\t\tmessage_id: threadId,\n\t\t\tdata: {\n\t\t\t\ttype: 'typing',\n\t\t\t\tdata: {\n\t\t\t\t\ttyping: true\n\t\t\t\t}\n\t\t\t}\n\t\t});\n\t};\n\n\tonMount(() => {\n\t\t$socket?.on('channel-events', channelEventHandler);\n\t});\n\n\tonDestroy(() => {\n\t\t$socket?.off('channel-events', channelEventHandler);\n\t});\n</script>\n\n{#if channel}\n\t<div class=\"flex flex-col w-full h-full bg-gray-50 dark:bg-gray-850\">\n\t\t<div class=\"flex items-center justify-between px-3.5 pt-3\">\n\t\t\t<div class=\" font-medium text-lg\">Thread</div>\n\n\t\t\t<div>\n\t\t\t\t<button\n\t\t\t\t\tclass=\"text-gray-500 hover:text-gray-700 dark:text-gray-400 dark:hover:text-gray-300 p-2\"\n\t\t\t\t\ton:click={() => {\n\t\t\t\t\t\tonClose();\n\t\t\t\t\t}}\n\t\t\t\t>\n\t\t\t\t\t<XMark />\n\t\t\t\t</button>\n\t\t\t</div>\n\t\t</div>\n\n\t\t<div class=\" max-h-full w-full overflow-y-auto pt-3\" bind:this={messagesContainerElement}>\n\t\t\t<Messages\n\t\t\t\tid={threadId}\n\t\t\t\t{channel}\n\t\t\t\t{messages}\n\t\t\t\t{top}\n\t\t\t\tthread={true}\n\t\t\t\tonLoad={async () => {\n\t\t\t\t\tconst newMessages = await getChannelThreadMessages(\n\t\t\t\t\t\tlocalStorage.token,\n\t\t\t\t\t\tchannel.id,\n\t\t\t\t\t\tthreadId,\n\t\t\t\t\t\tmessages.length\n\t\t\t\t\t);\n\n\t\t\t\t\tmessages = [...messages, ...newMessages];\n\n\t\t\t\t\tif (newMessages.length < 50) {\n\t\t\t\t\t\ttop = true;\n\t\t\t\t\t\treturn;\n\t\t\t\t\t}\n\t\t\t\t}}\n\t\t\t/>\n\n\t\t\t<div class=\" pb-[1rem] px-2.5\">\n\t\t\t\t<MessageInput id={threadId} {typingUsers} {onChange} onSubmit={submitHandler} />\n\t\t\t</div>\n\t\t</div>\n\t</div>\n{/if}\n","<script lang=\"ts\">\n\timport { toast } from 'svelte-sonner';\n\timport { Pane, PaneGroup, PaneResizer } from 'paneforge';\n\n\timport { onDestroy, onMount, tick } from 'svelte';\n\timport { goto } from '$app/navigation';\n\n\timport { chatId, showSidebar, socket, user } from '$lib/stores';\n\timport { getChannelById, getChannelMessages, sendMessage } from '$lib/apis/channels';\n\n\timport Messages from './Messages.svelte';\n\timport MessageInput from './MessageInput.svelte';\n\timport Navbar from './Navbar.svelte';\n\timport Drawer from '../common/Drawer.svelte';\n\timport EllipsisVertical from '../icons/EllipsisVertical.svelte';\n\timport Thread from './Thread.svelte';\n\n\texport let id = '';\n\n\tlet scrollEnd = true;\n\tlet messagesContainerElement = null;\n\n\tlet top = false;\n\n\tlet channel = null;\n\tlet messages = null;\n\n\tlet threadId = null;\n\n\tlet typingUsers = [];\n\tlet typingUsersTimeout = {};\n\n\t$: if (id) {\n\t\tinitHandler();\n\t}\n\n\tconst scrollToBottom = () => {\n\t\tif (messagesContainerElement) {\n\t\t\tmessagesContainerElement.scrollTop = messagesContainerElement.scrollHeight;\n\t\t}\n\t};\n\n\tconst initHandler = async () => {\n\t\ttop = false;\n\t\tmessages = null;\n\t\tchannel = null;\n\t\tthreadId = null;\n\n\t\ttypingUsers = [];\n\t\ttypingUsersTimeout = {};\n\n\t\tchannel = await getChannelById(localStorage.token, id).catch((error) => {\n\t\t\treturn null;\n\t\t});\n\n\t\tif (channel) {\n\t\t\tmessages = await getChannelMessages(localStorage.token, id, 0);\n\n\t\t\tif (messages) {\n\t\t\t\tscrollToBottom();\n\n\t\t\t\tif (messages.length < 50) {\n\t\t\t\t\ttop = true;\n\t\t\t\t}\n\t\t\t}\n\t\t} else {\n\t\t\tgoto('/');\n\t\t}\n\t};\n\n\tconst channelEventHandler = async (event) => {\n\t\tif (event.channel_id === id) {\n\t\t\tconst type = event?.data?.type ?? null;\n\t\t\tconst data = event?.data?.data ?? null;\n\n\t\t\tif (type === 'message') {\n\t\t\t\tif ((data?.parent_id ?? null) === null) {\n\t\t\t\t\tmessages = [data, ...messages];\n\n\t\t\t\t\tif (typingUsers.find((user) => user.id === event.user.id)) {\n\t\t\t\t\t\ttypingUsers = typingUsers.filter((user) => user.id !== event.user.id);\n\t\t\t\t\t}\n\n\t\t\t\t\tawait tick();\n\t\t\t\t\tif (scrollEnd) {\n\t\t\t\t\t\tscrollToBottom();\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t} else if (type === 'message:update') {\n\t\t\t\tconst idx = messages.findIndex((message) => message.id === data.id);\n\n\t\t\t\tif (idx !== -1) {\n\t\t\t\t\tmessages[idx] = data;\n\t\t\t\t}\n\t\t\t} else if (type === 'message:delete') {\n\t\t\t\tmessages = messages.filter((message) => message.id !== data.id);\n\t\t\t} else if (type === 'message:reply') {\n\t\t\t\tconst idx = messages.findIndex((message) => message.id === data.id);\n\n\t\t\t\tif (idx !== -1) {\n\t\t\t\t\tmessages[idx] = data;\n\t\t\t\t}\n\t\t\t} else if (type.includes('message:reaction')) {\n\t\t\t\tconst idx = messages.findIndex((message) => message.id === data.id);\n\t\t\t\tif (idx !== -1) {\n\t\t\t\t\tmessages[idx] = data;\n\t\t\t\t}\n\t\t\t} else if (type === 'typing' && event.message_id === null) {\n\t\t\t\tif (event.user.id === $user?.id) {\n\t\t\t\t\treturn;\n\t\t\t\t}\n\n\t\t\t\ttypingUsers = data.typing\n\t\t\t\t\t? [\n\t\t\t\t\t\t\t...typingUsers,\n\t\t\t\t\t\t\t...(typingUsers.find((user) => user.id === event.user.id)\n\t\t\t\t\t\t\t\t? []\n\t\t\t\t\t\t\t\t: [\n\t\t\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\t\t\tid: event.user.id,\n\t\t\t\t\t\t\t\t\t\t\tname: event.user.name\n\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t])\n\t\t\t\t\t\t]\n\t\t\t\t\t: typingUsers.filter((user) => user.id !== event.user.id);\n\n\t\t\t\tif (typingUsersTimeout[event.user.id]) {\n\t\t\t\t\tclearTimeout(typingUsersTimeout[event.user.id]);\n\t\t\t\t}\n\n\t\t\t\ttypingUsersTimeout[event.user.id] = setTimeout(() => {\n\t\t\t\t\ttypingUsers = typingUsers.filter((user) => user.id !== event.user.id);\n\t\t\t\t}, 5000);\n\t\t\t}\n\t\t}\n\t};\n\n\tconst submitHandler = async ({ content, data }) => {\n\t\tif (!content && (data?.files ?? []).length === 0) {\n\t\t\treturn;\n\t\t}\n\n\t\tconst res = await sendMessage(localStorage.token, id, { content: content, data: data }).catch(\n\t\t\t(error) => {\n\t\t\t\ttoast.error(`${error}`);\n\t\t\t\treturn null;\n\t\t\t}\n\t\t);\n\n\t\tif (res) {\n\t\t\tmessagesContainerElement.scrollTop = messagesContainerElement.scrollHeight;\n\t\t}\n\t};\n\n\tconst onChange = async () => {\n\t\t$socket?.emit('channel-events', {\n\t\t\tchannel_id: id,\n\t\t\tmessage_id: null,\n\t\t\tdata: {\n\t\t\t\ttype: 'typing',\n\t\t\t\tdata: {\n\t\t\t\t\ttyping: true\n\t\t\t\t}\n\t\t\t}\n\t\t});\n\t};\n\n\tlet mediaQuery;\n\tlet largeScreen = false;\n\n\tonMount(() => {\n\t\tif ($chatId) {\n\t\t\tchatId.set('');\n\t\t}\n\n\t\t$socket?.on('channel-events', channelEventHandler);\n\n\t\tmediaQuery = window.matchMedia('(min-width: 1024px)');\n\n\t\tconst handleMediaQuery = async (e) => {\n\t\t\tif (e.matches) {\n\t\t\t\tlargeScreen = true;\n\t\t\t} else {\n\t\t\t\tlargeScreen = false;\n\t\t\t}\n\t\t};\n\n\t\tmediaQuery.addEventListener('change', handleMediaQuery);\n\t\thandleMediaQuery(mediaQuery);\n\t});\n\n\tonDestroy(() => {\n\t\t$socket?.off('channel-events', channelEventHandler);\n\t});\n</script>\n\n<svelte:head>\n\t<title>#{channel?.name ?? 'Channel'} â€¢ Open WebUI</title>\n</svelte:head>\n\n<div\n\tclass=\"h-screen max-h-[100dvh] transition-width duration-200 ease-in-out {$showSidebar\n\t\t? 'md:max-w-[calc(100%-260px)]'\n\t\t: ''} w-full max-w-full flex flex-col\"\n\tid=\"channel-container\"\n>\n\t<PaneGroup direction=\"horizontal\" class=\"w-full h-full\">\n\t\t<Pane defaultSize={50} minSize={50} class=\"h-full flex flex-col w-full relative\">\n\t\t\t<Navbar {channel} />\n\n\t\t\t<div class=\"flex-1 overflow-y-auto\">\n\t\t\t\t{#if channel}\n\t\t\t\t\t<div\n\t\t\t\t\t\tclass=\" pb-2.5 max-w-full z-10 scrollbar-hidden w-full h-full pt-6 flex-1 flex flex-col-reverse overflow-auto\"\n\t\t\t\t\t\tid=\"messages-container\"\n\t\t\t\t\t\tbind:this={messagesContainerElement}\n\t\t\t\t\t\ton:scroll={(e) => {\n\t\t\t\t\t\t\tscrollEnd = Math.abs(messagesContainerElement.scrollTop) <= 50;\n\t\t\t\t\t\t}}\n\t\t\t\t\t>\n\t\t\t\t\t\t{#key id}\n\t\t\t\t\t\t\t<Messages\n\t\t\t\t\t\t\t\t{channel}\n\t\t\t\t\t\t\t\t{messages}\n\t\t\t\t\t\t\t\t{top}\n\t\t\t\t\t\t\t\tonThread={(id) => {\n\t\t\t\t\t\t\t\t\tthreadId = id;\n\t\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\t\tonLoad={async () => {\n\t\t\t\t\t\t\t\t\tconst newMessages = await getChannelMessages(\n\t\t\t\t\t\t\t\t\t\tlocalStorage.token,\n\t\t\t\t\t\t\t\t\t\tid,\n\t\t\t\t\t\t\t\t\t\tmessages.length\n\t\t\t\t\t\t\t\t\t);\n\n\t\t\t\t\t\t\t\t\tmessages = [...messages, ...newMessages];\n\n\t\t\t\t\t\t\t\t\tif (newMessages.length < 50) {\n\t\t\t\t\t\t\t\t\t\ttop = true;\n\t\t\t\t\t\t\t\t\t\treturn;\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t{/key}\n\t\t\t\t\t</div>\n\t\t\t\t{/if}\n\t\t\t</div>\n\n\t\t\t<div class=\" pb-[1rem] px-2.5\">\n\t\t\t\t<MessageInput\n\t\t\t\t\tid=\"root\"\n\t\t\t\t\t{typingUsers}\n\t\t\t\t\t{onChange}\n\t\t\t\t\tonSubmit={submitHandler}\n\t\t\t\t\t{scrollToBottom}\n\t\t\t\t\t{scrollEnd}\n\t\t\t\t/>\n\t\t\t</div>\n\t\t</Pane>\n\n\t\t{#if !largeScreen}\n\t\t\t{#if threadId !== null}\n\t\t\t\t<Drawer\n\t\t\t\t\tshow={threadId !== null}\n\t\t\t\t\tonClose={() => {\n\t\t\t\t\t\tthreadId = null;\n\t\t\t\t\t}}\n\t\t\t\t>\n\t\t\t\t\t<div class=\" {threadId !== null ? ' h-screen  w-full' : 'px-6 py-4'} h-full\">\n\t\t\t\t\t\t<Thread\n\t\t\t\t\t\t\t{threadId}\n\t\t\t\t\t\t\t{channel}\n\t\t\t\t\t\t\tonClose={() => {\n\t\t\t\t\t\t\t\tthreadId = null;\n\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t/>\n\t\t\t\t\t</div>\n\t\t\t\t</Drawer>\n\t\t\t{/if}\n\t\t{:else if threadId !== null}\n\t\t\t<PaneResizer\n\t\t\t\tclass=\"relative flex w-[3px] items-center justify-center bg-background group bg-gray-50 dark:bg-gray-850\"\n\t\t\t>\n\t\t\t\t<div class=\"z-10 flex h-7 w-5 items-center justify-center rounded-xs\">\n\t\t\t\t\t<EllipsisVertical className=\"size-4 invisible group-hover:visible\" />\n\t\t\t\t</div>\n\t\t\t</PaneResizer>\n\n\t\t\t<Pane defaultSize={50} minSize={30} class=\"h-full w-full\">\n\t\t\t\t<div class=\"h-full w-full shadow-xl\">\n\t\t\t\t\t<Thread\n\t\t\t\t\t\t{threadId}\n\t\t\t\t\t\t{channel}\n\t\t\t\t\t\tonClose={() => {\n\t\t\t\t\t\t\tthreadId = null;\n\t\t\t\t\t\t}}\n\t\t\t\t\t/>\n\t\t\t\t</div>\n\t\t\t</Pane>\n\t\t{/if}\n\t</PaneGroup>\n</div>\n","<script lang=\"ts\">\n\timport { page } from '$app/stores';\n\n\timport Channel from '$lib/components/channel/Channel.svelte';\n</script>\n\n<Channel id={$page.params.id} />\n"],"names":["t1_value","ctx","create_if_block_1","_a","WEBUI_BASE_URL","attr","img","img_src_value","insert_hydration","target","div4","anchor","append_hydration","div0","div3","div1","span","div2","dirty","set_data","t1","create_if_block","flyAndScale","state","side","$$props","align","user","show","active","getActiveStatus","res","getUserActiveStatusById","error","$$invalidate","value","svg","path","className","strokeWidth","get_default_slot_context","svelte_virtual_list_row","get_key","i","svelte_virtual_list_viewport","svelte_virtual_list_contents","items","height","itemHeight","start","end","height_map","rows","viewport","contents","viewport_height","visible","mounted","top","bottom","average_height","refresh","scrollTop","tick","content_height","row","row_height","remaining","handle_scroll","old_start","v","y","expected_height","actual_height","d","onMount","$$value","data","ROW_HEIGHT","div","each_blocks","t","t_value","src_url_equal","img_alt_value","button","func","tooltip_changes","input","code","onClose","onSubmit","name","emojis","emojiShortCodes","search","flattenedEmojis","emojiRows","selectEmoji","emoji","selectedCode","click_handler","emojiItem","acc","key","filtered","emojiGroups","group","groupEmojis","currentRow","item","create_if_block_13","create_if_block_9","if_block3","_b","create_if_block_7","div0_class_value","div2_class_value","div2_id_value","div2_dir_value","current","_c","_d","create_if_block_15","create_if_block_14","if_block","create_if_block_12","profilepreview_changes","dayjs","formatDate","create_if_block_10","t0","t0_value","fileitem_changes","image_changes","if_block0","create_if_block_6","if_block1","create_if_block_3","if_block2","create_if_block_2","markdown_changes","button0","button1","t3","t3_value","each_value","ensure_array_like","create_if_block_5","create_if_block_4","button_class_value","span0","span1","span2","t2","t2_value","t4","t4_value","relativeTime","isToday","isYesterday","localizedFormat","i18n","getContext","message","showUserProfile","thread","onDelete","onEdit","onThread","onReaction","showButtons","edit","editedContent","showDeleteConfirmDialog","func_1","click_handler_3","e","isCmdOrCtrlPressed","isEnterPressed","reaction","child_ctx","hr","message_1_changes","get_if_ctx","id","channel","messages","onLoad","messagesLoading","loadMoreMessages","element","m","deleteMessage","toast","content","updateMessage","$user","r","removeReaction","addReaction","usermenu_changes","nav","div6","div5","showSidebar","$showSidebar","showArchivedChats","threadId","typingUsers","typingUsersTimeout","messagesContainerElement","scrollToBottom","initHandler","getChannelThreadMessages","goto","channelEventHandler","event","type","idx","submitHandler","sendMessage","onChange","$socket","onDestroy","newMessages","drawer_changes","div_class_value","scrollEnd","getChannelById","getChannelMessages","mediaQuery","largeScreen","$chatId","chatId","handleMediaQuery"],"mappings":"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","x_google_ignoreList":[3]}