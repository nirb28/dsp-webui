import{s as Ae,l as lt,i as S,d,q as Bt,J as hn,y as ge,k as G,o as Z,A as be,e as E,c as I,a as k,f as c,n as re,r as vt,v as bt,w as wt,x as kt,g as w,t as de,b as me,F as At,B as gt,K as gn,R as Tt,u as ce,h as ke,S as $t,G as Et,j as He,p as _t,T as _n,D as Oe,E as Be,C as ft,z as Kn,W as xn,m as es}from"../chunks/osRMcaoZ.js";import{S as We,i as Ue,g as Ye,a as T,c as qe,t as N,f as we,b as A,d as W,m as U,e as j}from"../chunks/Cz_TVcYH.js";import{p as ts}from"../chunks/DfjoWiH-.js";import{g as ns}from"../chunks/D0QH3NT1.js";import{c as ss,b as pn,P as ls,h as os}from"../chunks/DdKTxnuc.js";import{f as rs}from"../chunks/CyTOOynw.js";import{h as as,E as is}from"../chunks/Bo__pBor.js";import{m as Vt,r as vn,v as Ut,d as jt,p as fs}from"../chunks/C3cxvGum.js";import{t as Se}from"../chunks/CvcJvn8o.js";import{g as Pt}from"../chunks/1eR21JWE.js";import{d as Ve,r as cs}from"../chunks/I1CDPYOB.js";import"../chunks/BXP-4RTu.js";import{c as us}from"../chunks/DOWKdgXc.js";import{d as ds}from"../chunks/BQWQRICs.js";import{m as Wt,e as Ot,o as ms,c as hs,a as gs,W as _s,s as Rt,u as ps,d as vs}from"../chunks/DUlFqCOB.js";import{u as bs}from"../chunks/DSe3e2a0.js";import{c as bn,g as ws}from"../chunks/-Lmj9_YH.js";import{D as ks,R as Es,V as Is}from"../chunks/Dp4U4rP8.js";import{E as $s}from"../chunks/Dsx5TKO5.js";import{e as st}from"../chunks/DCwEHxc-.js";import{X as wn}from"../chunks/YHUoul5_.js";import{aq as Ns,aL as Cs}from"../chunks/RzT9Pn6s.js";import{F as Ds}from"../chunks/5RhMWXVw.js";import{S as Ts,a as kn}from"../chunks/DuxTsn3k.js";import{P as Ms}from"../chunks/BeAkhgfO.js";import{T as Ss}from"../chunks/B3sn4-90.js";import{T as nt}from"../chunks/BOoEfdYa.js";import{M as ys}from"../chunks/2FJBVD-A.js";import{P as zs}from"../chunks/DqQWfcuJ.js";import{A as Vs}from"../chunks/ORN_DGL0.js";import{b as Os,u as Bs,d as As}from"../chunks/hij3okPn.js";import{S as En}from"../chunks/XYvaYOQu.js";import{M as Ws}from"../chunks/BukT31lW.js";import{C as Us}from"../chunks/CxRe37LO.js";import{M as js}from"../chunks/D4CPDuR7.js";import{C as In}from"../chunks/wOjkWnDL.js";/* empty css                */import"../chunks/BWrnINzs.js";import{F as Ps}from"../chunks/0VwBZy6c.js";import{M as $n,a as Nn,b as Cn}from"../chunks/zuTWMoVs.js";import{f as Dn}from"../chunks/DMHG7wso.js";import{C as Rs}from"../chunks/Cfz980HS.js";import{N as Hs}from"../chunks/Bhv2Hw3l.js";import{E as Ls}from"../chunks/B2AZZEdi.js";function Fs(l){let e,t,n,s,r;e=new ss({props:{class:"relative flex w-2 items-center justify-center bg-background group bg-white dark:shadow-lg dark:bg-gray-850 border-l border-gray-50 dark:border-gray-850",$$slots:{default:[qs]},$$scope:{ctx:l}}});function o(a){l[8](a)}let i={defaultSize:Math.max(20,l[3]),minSize:l[3],onCollapse:l[7],collapsible:!0,class:" z-10 ",$$slots:{default:[Js]},$$scope:{ctx:l}};return l[1]!==void 0&&(i.pane=l[1]),n=new pn({props:i}),ge.push(()=>we(n,"pane",o)),{c(){A(e.$$.fragment),t=G(),A(n.$$.fragment)},l(a){W(e.$$.fragment,a),t=Z(a),W(n.$$.fragment,a)},m(a,f){U(e,a,f),S(a,t,f),U(n,a,f),r=!0},p(a,f){const h={};f&512&&(h.$$scope={dirty:f,ctx:a}),e.$set(h);const p={};f&8&&(p.defaultSize=Math.max(20,a[3])),f&8&&(p.minSize=a[3]),f&1&&(p.onCollapse=a[7]),f&513&&(p.$$scope={dirty:f,ctx:a}),!s&&f&2&&(s=!0,p.pane=a[1],be(()=>s=!1)),n.$set(p)},i(a){r||(N(e.$$.fragment,a),N(n.$$.fragment,a),r=!0)},o(a){T(e.$$.fragment,a),T(n.$$.fragment,a),r=!1},d(a){a&&d(t),j(e,a),j(n,a)}}}function Ys(l){let e,t,n=l[0]&&Lt(l);return{c(){n&&n.c(),e=lt()},l(s){n&&n.l(s),e=lt()},m(s,r){n&&n.m(s,r),S(s,e,r),t=!0},p(s,r){s[0]?n?(n.p(s,r),r&1&&N(n,1)):(n=Lt(s),n.c(),N(n,1),n.m(e.parentNode,e)):n&&(Ye(),T(n,1,1,()=>{n=null}),qe())},i(s){t||(N(n),t=!0)},o(s){T(n),t=!1},d(s){s&&d(e),n&&n.d(s)}}}function qs(l){let e,t,n;return t=new $s({props:{className:"size-4 invisible group-hover:visible"}}),{c(){e=E("div"),A(t.$$.fragment),this.h()},l(s){e=I(s,"DIV",{class:!0});var r=k(e);W(t.$$.fragment,r),r.forEach(d),this.h()},h(){c(e,"class","z-10 flex h-7 w-5 items-center justify-center rounded-xs")},m(s,r){S(s,e,r),U(t,e,null),n=!0},p:re,i(s){n||(N(t.$$.fragment,s),n=!0)},o(s){T(t.$$.fragment,s),n=!1},d(s){s&&d(e),j(t)}}}function Ht(l){let e,t,n;const s=l[5].default,r=vt(s,l,l[9],null);return{c(){e=E("div"),t=E("div"),r&&r.c(),this.h()},l(o){e=I(o,"DIV",{class:!0});var i=k(e);t=I(i,"DIV",{class:!0});var a=k(t);r&&r.l(a),a.forEach(d),i.forEach(d),this.h()},h(){c(t,"class","w-full pl-1.5 pr-2.5 pt-2 bg-white dark:shadow-lg dark:bg-gray-850 z-40 pointer-events-auto overflow-y-auto scrollbar-hidden flex flex-col"),c(e,"class","flex max-h-full min-h-full")},m(o,i){S(o,e,i),w(e,t),r&&r.m(t,null),n=!0},p(o,i){r&&r.p&&(!n||i&512)&&bt(r,s,o,o[9],n?kt(s,o[9],i,null):wt(o[9]),null)},i(o){n||(N(r,o),n=!0)},o(o){T(r,o),n=!1},d(o){o&&d(e),r&&r.d(o)}}}function Js(l){let e,t,n=l[0]&&Ht(l);return{c(){n&&n.c(),e=lt()},l(s){n&&n.l(s),e=lt()},m(s,r){n&&n.m(s,r),S(s,e,r),t=!0},p(s,r){s[0]?n?(n.p(s,r),r&1&&N(n,1)):(n=Ht(s),n.c(),N(n,1),n.m(e.parentNode,e)):n&&(Ye(),T(n,1,1,()=>{n=null}),qe())},i(s){t||(N(n),t=!0)},o(s){T(n),t=!1},d(s){s&&d(e),n&&n.d(s)}}}function Lt(l){let e,t;return e=new ks({props:{show:l[0],onClose:l[6],$$slots:{default:[Gs]},$$scope:{ctx:l}}}),{c(){A(e.$$.fragment)},l(n){W(e.$$.fragment,n)},m(n,s){U(e,n,s),t=!0},p(n,s){const r={};s&1&&(r.show=n[0]),s&1&&(r.onClose=n[6]),s&512&&(r.$$scope={dirty:s,ctx:n}),e.$set(r)},i(n){t||(N(e.$$.fragment,n),t=!0)},o(n){T(e.$$.fragment,n),t=!1},d(n){j(e,n)}}}function Gs(l){let e,t;const n=l[5].default,s=vt(n,l,l[9],null);return{c(){e=E("div"),s&&s.c(),this.h()},l(r){e=I(r,"DIV",{class:!0});var o=k(e);s&&s.l(o),o.forEach(d),this.h()},h(){c(e,"class","px-3.5 py-2.5 h-screen max-h-dvh flex flex-col")},m(r,o){S(r,e,o),s&&s.m(e,null),t=!0},p(r,o){s&&s.p&&(!t||o&512)&&bt(s,n,r,r[9],t?kt(n,r[9],o,null):wt(r[9]),null)},i(r){t||(N(s,r),t=!0)},o(r){T(s,r),t=!1},d(r){r&&d(e),s&&s.d(r)}}}function Zs(l){let e,t,n,s;const r=[Ys,Fs],o=[];function i(a,f){return a[2]?a[0]?1:-1:0}return~(e=i(l))&&(t=o[e]=r[e](l)),{c(){t&&t.c(),n=lt()},l(a){t&&t.l(a),n=lt()},m(a,f){~e&&o[e].m(a,f),S(a,n,f),s=!0},p(a,[f]){let h=e;e=i(a),e===h?~e&&o[e].p(a,f):(t&&(Ye(),T(o[h],1,1,()=>{o[h]=null}),qe()),~e?(t=o[e],t?t.p(a,f):(t=o[e]=r[e](a),t.c()),N(t,1),t.m(n.parentNode,n)):t=null)},i(a){s||(N(t),s=!0)},o(a){T(t),s=!1},d(a){a&&d(n),~e&&o[e].d(a)}}}function Xs(l,e,t){let{$$slots:n={},$$scope:s}=e,{show:r=!1}=e,{pane:o=null}=e,{containerId:i="note-container"}=e,a,f=!1,h=0;const p=async _=>{_.matches?t(2,f=!0):(t(2,f=!1),t(1,o=null))};Bt(()=>{a=window.matchMedia("(min-width: 1000px)"),a.addEventListener("change",p),p(a);const _=document.getElementById(i);t(3,h=Math.floor(400/_.clientWidth*100)),new ResizeObserver(b=>{for(let m of b){const H=400/m.contentRect.width*100;t(3,h=Math.floor(H)),r&&o&&o.isExpanded()&&o.getSize()<h&&o.resize(h)}}).observe(_)}),hn(()=>{a.removeEventListener("change",p)});const C=()=>{t(0,r=!1)},D=()=>{t(0,r=!1)};function $(_){o=_,t(1,o)}return l.$$set=_=>{"show"in _&&t(0,r=_.show),"pane"in _&&t(1,o=_.pane),"containerId"in _&&t(4,i=_.containerId),"$$scope"in _&&t(9,s=_.$$scope)},[r,o,f,h,i,n,C,D,$,s]}class Qs extends We{constructor(e){super(),Ue(this,e,Xs,Zs,Ae,{show:0,pane:1,containerId:4})}}function Ft(l,e,t){const n=l.slice();return n[12]=e[t],n}function Yt(l,e,t){const n=l.slice();return n[15]=e[t],n[17]=t,n}function qt(l,e,t){const n=l.slice();return n[15]=e[t],n[17]=t,n}function Jt(l){let e,t="Files",n,s,r,o,i,a,f,h=st(l[2].filter(Qt)),p=[];for(let u=0;u<h.length;u+=1)p[u]=Gt(qt(l,h,u));const C=u=>T(p[u],1,1,()=>{p[u]=null});let D=st(l[2].filter(Kt)),$=[];for(let u=0;u<D.length;u+=1)$[u]=Zt(Yt(l,D,u));const _=u=>T($[u],1,1,()=>{$[u]=null});return{c(){e=E("div"),e.textContent=t,n=G(),s=E("div");for(let u=0;u<p.length;u+=1)p[u].c();r=G(),o=E("div");for(let u=0;u<$.length;u+=1)$[u].c();i=G(),a=E("hr"),this.h()},l(u){e=I(u,"DIV",{class:!0,"data-svelte-h":!0}),At(e)!=="svelte-1ep46ko"&&(e.textContent=t),n=Z(u),s=I(u,"DIV",{class:!0});var b=k(s);for(let v=0;v<p.length;v+=1)p[v].l(b);r=Z(b),o=I(b,"DIV",{class:!0});var m=k(o);for(let v=0;v<$.length;v+=1)$[v].l(m);m.forEach(d),b.forEach(d),i=Z(u),a=I(u,"HR",{class:!0}),this.h()},h(){c(e,"class","text-xs font-medium pb-1"),c(o,"class","flex items-center flex-wrap gap-2 mt-1.5"),c(s,"class","flex flex-col gap-1"),c(a,"class","my-2 border-gray-50 dark:border-gray-700/10")},m(u,b){S(u,e,b),S(u,n,b),S(u,s,b);for(let m=0;m<p.length;m+=1)p[m]&&p[m].m(s,null);w(s,r),w(s,o);for(let m=0;m<$.length;m+=1)$[m]&&$[m].m(o,null);S(u,i,b),S(u,a,b),f=!0},p(u,b){if(b&12){h=st(u[2].filter(Qt));let m;for(m=0;m<h.length;m+=1){const v=qt(u,h,m);p[m]?(p[m].p(v,b),N(p[m],1)):(p[m]=Gt(v),p[m].c(),N(p[m],1),p[m].m(s,r))}for(Ye(),m=h.length;m<p.length;m+=1)C(m);qe()}if(b&12){D=st(u[2].filter(Kt));let m;for(m=0;m<D.length;m+=1){const v=Yt(u,D,m);$[m]?($[m].p(v,b),N($[m],1)):($[m]=Zt(v),$[m].c(),N($[m],1),$[m].m(o,null))}for(Ye(),m=D.length;m<$.length;m+=1)_(m);qe()}},i(u){if(!f){for(let b=0;b<h.length;b+=1)N(p[b]);for(let b=0;b<D.length;b+=1)N($[b]);f=!0}},o(u){p=p.filter(Boolean);for(let b=0;b<p.length;b+=1)T(p[b]);$=$.filter(Boolean);for(let b=0;b<$.length;b+=1)T($[b]);f=!1},d(u){u&&(d(e),d(n),d(s),d(i),d(a)),$t(p,u),$t($,u)}}}function Gt(l){var r;let e,t;function n(){return l[8](l[15])}function s(){return l[9](l[15])}return e=new Ds({props:{className:"w-full",item:l[15],small:!0,edit:!0,dismissible:!0,url:l[15].url,name:l[15].name,type:l[15].type,size:(r=l[15])==null?void 0:r.size,loading:l[15].status==="uploading"}}),e.$on("dismiss",n),e.$on("click",s),{c(){A(e.$$.fragment)},l(o){W(e.$$.fragment,o)},m(o,i){U(e,o,i),t=!0},p(o,i){var f;l=o;const a={};i&4&&(a.item=l[15]),i&4&&(a.url=l[15].url),i&4&&(a.name=l[15].name),i&4&&(a.type=l[15].type),i&4&&(a.size=(f=l[15])==null?void 0:f.size),i&4&&(a.loading=l[15].status==="uploading"),e.$set(a)},i(o){t||(N(e.$$.fragment,o),t=!0)},o(o){T(e.$$.fragment,o),t=!1},d(o){j(e,o)}}}function Zt(l){let e,t;function n(){return l[10](l[15])}return e=new Ns({props:{src:l[15].url,imageClassName:" size-14 rounded-xl object-cover",dismissible:!0,onDismiss:n}}),{c(){A(e.$$.fragment)},l(s){W(e.$$.fragment,s)},m(s,r){U(e,s,r),t=!0},p(s,r){l=s;const o={};r&4&&(o.src=l[15].url),r&12&&(o.onDismiss=n),e.$set(o)},i(s){t||(N(e.$$.fragment,s),t=!0)},o(s){T(e.$$.fragment,s),t=!1},d(s){j(e,s)}}}function Xt(l){let e,t=l[12].name+"",n,s;return{c(){e=E("option"),n=de(t),this.h()},l(r){e=I(r,"OPTION",{class:!0});var o=k(e);n=me(o,t),o.forEach(d),this.h()},h(){e.__value=s=l[12].id,gt(e,e.__value),c(e,"class","bg-gray-50 dark:bg-gray-700")},m(r,o){S(r,e,o),w(e,n)},p(r,o){o&32&&t!==(t=r[12].name+"")&&ke(n,t),o&32&&s!==(s=r[12].id)&&(e.__value=s,gt(e,e.__value))},d(r){r&&d(e)}}}function Ks(l){let e,t,n,s,r,o,i,a=l[4].t("Controls")+"",f,h,p,C,D,$,_="Model",u,b,m,v,H=l[4].t("Select a model")+"",y,z,q,L,B;s=new wn({props:{className:"size-5",strokeWidth:"2.5"}});let P=l[2].length>0&&Jt(l),X=st(l[5].filter(xt)),J=[];for(let Q=0;Q<X.length;Q+=1)J[Q]=Xt(Ft(l,X,Q));return{c(){e=E("div"),t=E("div"),n=E("button"),A(s.$$.fragment),r=G(),o=E("div"),i=E("div"),f=de(a),h=G(),p=E("div"),C=E("div"),P&&P.c(),D=G(),$=E("div"),$.textContent=_,u=G(),b=E("div"),m=E("select"),v=E("option"),y=de(H),z=G();for(let Q=0;Q<J.length;Q+=1)J[Q].c();this.h()},l(Q){e=I(Q,"DIV",{class:!0});var oe=k(e);t=I(oe,"DIV",{class:!0});var se=k(t);n=I(se,"BUTTON",{class:!0});var De=k(n);W(s.$$.fragment,De),De.forEach(d),se.forEach(d),r=Z(oe),o=I(oe,"DIV",{class:!0});var ee=k(o);i=I(ee,"DIV",{});var ue=k(i);f=me(ue,a),ue.forEach(d),ee.forEach(d),oe.forEach(d),h=Z(Q),p=I(Q,"DIV",{class:!0});var $e=k(p);C=I($e,"DIV",{class:!0});var R=k(C);P&&P.l(R),D=Z(R),$=I(R,"DIV",{class:!0,"data-svelte-h":!0}),At($)!=="svelte-vz1bvh"&&($.textContent=_),u=Z(R),b=I(R,"DIV",{class:!0});var x=k(b);m=I(x,"SELECT",{class:!0});var V=k(m);v=I(V,"OPTION",{class:!0});var le=k(v);y=me(le,H),z=Z(le),le.forEach(d);for(let te=0;te<J.length;te+=1)J[te].l(V);V.forEach(d),x.forEach(d),R.forEach(d),$e.forEach(d),this.h()},h(){c(n,"class","p-0.5 bg-transparent transition rounded-lg"),c(t,"class","-translate-x-1.5 flex items-center"),c(o,"class","font-medium text-base flex items-center gap-1"),c(e,"class","flex items-center mb-1.5 pt-1.5"),c($,"class","text-xs font-medium mb-1"),v.__value="",gt(v,v.__value),c(v,"class","bg-gray-50 dark:bg-gray-700"),v.disabled=!0,c(m,"class","w-full bg-transparent text-sm outline-hidden"),l[1]===void 0&&gn(()=>l[11].call(m)),c(b,"class","w-full"),c(C,"class","pb-10"),c(p,"class","mt-1")},m(Q,oe){S(Q,e,oe),w(e,t),w(t,n),U(s,n,null),w(e,r),w(e,o),w(o,i),w(i,f),S(Q,h,oe),S(Q,p,oe),w(p,C),P&&P.m(C,null),w(C,D),w(C,$),w(C,u),w(C,b),w(b,m),w(m,v),w(v,y),w(v,z);for(let se=0;se<J.length;se+=1)J[se]&&J[se].m(m,null);Tt(m,l[1],!0),q=!0,L||(B=[ce(n,"click",l[7]),ce(m,"change",l[11])],L=!0)},p(Q,[oe]){if((!q||oe&16)&&a!==(a=Q[4].t("Controls")+"")&&ke(f,a),Q[2].length>0?P?(P.p(Q,oe),oe&4&&N(P,1)):(P=Jt(Q),P.c(),N(P,1),P.m(C,D)):P&&(Ye(),T(P,1,1,()=>{P=null}),qe()),(!q||oe&16)&&H!==(H=Q[4].t("Select a model")+"")&&ke(y,H),oe&32){X=st(Q[5].filter(xt));let se;for(se=0;se<X.length;se+=1){const De=Ft(Q,X,se);J[se]?J[se].p(De,oe):(J[se]=Xt(De),J[se].c(),J[se].m(m,null))}for(;se<J.length;se+=1)J[se].d(1);J.length=X.length}oe&34&&Tt(m,Q[1])},i(Q){q||(N(s.$$.fragment,Q),N(P),q=!0)},o(Q){T(s.$$.fragment,Q),T(P),q=!1},d(Q){Q&&(d(e),d(h),d(p)),j(s),P&&P.d(),$t(J,Q),L=!1,Et(B)}}}const Qt=l=>l.type!=="image",Kt=l=>l.type==="image",xt=l=>{var e,t;return!(((t=(e=l==null?void 0:l.info)==null?void 0:e.meta)==null?void 0:t.hidden)??!1)};function xs(l,e,t){let n,s;He(l,Wt,_=>t(5,s=_));const r=_t("i18n");He(l,r,_=>t(4,n=_));let{show:o=!1}=e,{selectedModelId:i=""}=e,{files:a=[]}=e,{onUpdate:f=_=>{}}=e;const h=()=>{t(0,o=!o)},p=_=>{t(2,a=a.filter(u=>u.id!==_.id)),t(2,a),f(a)},C=_=>{},D=_=>{t(2,a=a.filter(u=>u.id!==_.id)),t(2,a),f(a)};function $(){i=_n(this),t(1,i)}return l.$$set=_=>{"show"in _&&t(0,o=_.show),"selectedModelId"in _&&t(1,i=_.selectedModelId),"files"in _&&t(2,a=_.files),"onUpdate"in _&&t(3,f=_.onUpdate)},[o,i,a,f,n,s,r,h,p,C,D,$]}class el extends We{constructor(e){super(),Ue(this,e,xs,Ks,Ae,{show:0,selectedModelId:1,files:2,onUpdate:3})}}function tl(l){let e,t;return{c(){e=Oe("svg"),t=Oe("path"),this.h()},l(n){e=Be(n,"svg",{xmlns:!0,fill:!0,viewBox:!0,"stroke-width":!0,stroke:!0,class:!0});var s=k(e);t=Be(s,"path",{"stroke-linecap":!0,"stroke-linejoin":!0,d:!0}),k(t).forEach(d),s.forEach(d),this.h()},h(){c(t,"stroke-linecap","round"),c(t,"stroke-linejoin","round"),c(t,"d","m19.5 19.5-15-15m0 0v11.25m0-11.25h11.25"),c(e,"xmlns","http://www.w3.org/2000/svg"),c(e,"fill","none"),c(e,"viewBox","0 0 24 24"),c(e,"stroke-width",l[1]),c(e,"stroke","currentColor"),c(e,"class",l[0])},m(n,s){S(n,e,s),w(e,t)},p(n,[s]){s&2&&c(e,"stroke-width",n[1]),s&1&&c(e,"class",n[0])},i:re,o:re,d(n){n&&d(e)}}}function nl(l,e,t){let{className:n="size-4"}=e,{strokeWidth:s="1.5"}=e;return l.$$set=r=>{"className"in r&&t(0,n=r.className),"strokeWidth"in r&&t(1,s=r.strokeWidth)},[n,s]}class sl extends We{constructor(e){super(),Ue(this,e,nl,tl,Ae,{className:0,strokeWidth:1})}}function ll(l){let e,t,n,s,r;return t=new sl({props:{className:"size-3.5",strokeWidth:"2"}}),{c(){e=E("button"),A(t.$$.fragment),this.h()},l(o){e=I(o,"BUTTON",{class:!0});var i=k(e);W(t.$$.fragment,i),i.forEach(d),this.h()},h(){c(e,"class","text-transparent group-hover:text-gray-500 dark:hover:text-gray-300 transition")},m(o,i){S(o,e,i),U(t,e,null),n=!0,s||(r=ce(e,"click",l[7]),s=!0)},p:re,i(o){n||(N(t.$$.fragment,o),n=!0)},o(o){T(t.$$.fragment,o),n=!1},d(o){o&&d(e),j(t),s=!1,r()}}}function ol(l){let e,t,n,s,r;return t=new Ms({props:{className:"size-3.5",strokeWidth:"2"}}),{c(){e=E("button"),A(t.$$.fragment),this.h()},l(o){e=I(o,"BUTTON",{class:!0});var i=k(e);W(t.$$.fragment,i),i.forEach(d),this.h()},h(){c(e,"class","text-transparent group-hover:text-gray-500 dark:hover:text-gray-300 transition")},m(o,i){S(o,e,i),U(t,e,null),n=!0,s||(r=ce(e,"click",l[8]),s=!0)},p:re,i(o){n||(N(t.$$.fragment,o),n=!0)},o(o){T(t.$$.fragment,o),n=!1},d(o){o&&d(e),j(t),s=!1,r()}}}function rl(l){let e,t='<svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" class="size-4"><path stroke-linecap="round" stroke-linejoin="round" d="M15 12H9m12 0a9 9 0 1 1-18 0 9 9 0 0 1 18 0Z"></path></svg>',n,s;return{c(){e=E("button"),e.innerHTML=t,this.h()},l(r){e=I(r,"BUTTON",{class:!0,"data-svelte-h":!0}),At(e)!=="svelte-n6kawc"&&(e.innerHTML=t),this.h()},h(){c(e,"class","text-transparent group-hover:text-gray-500 dark:hover:text-gray-300 transition")},m(r,o){S(r,e,o),n||(s=ce(e,"click",l[9]),n=!0)},p:re,d(r){r&&d(e),n=!1,s()}}}function al(l){let e,t,n;return t=new Cs({props:{id:`note-message-${l[1]}`,content:l[0].content}}),{c(){e=E("div"),A(t.$$.fragment),this.h()},l(s){e=I(s,"DIV",{class:!0});var r=k(e);W(t.$$.fragment,r),r.forEach(d),this.h()},h(){c(e,"class","markdown-prose-sm text-sm")},m(s,r){S(s,e,r),U(t,e,null),n=!0},p(s,r){const o={};r&2&&(o.id=`note-message-${s[1]}`),r&1&&(o.content=s[0].content),t.$set(o)},i(s){n||(N(t.$$.fragment,s),n=!0)},o(s){T(t.$$.fragment,s),n=!1},d(s){s&&d(e),j(t)}}}function il(l){let e,t,n;function s(o){l[11](o)}let r={className:"w-full bg-transparent outline-hidden text-sm resize-none overflow-hidden",placeholder:l[5].t("Enter {{role}} message here",{role:l[0].role==="user"?l[5].t("a user"):l[5].t("an assistant")}),onBlur:l[10]};return l[0].content!==void 0&&(r.value=l[0].content),e=new Ss({props:r}),ge.push(()=>we(e,"value",s)),{c(){A(e.$$.fragment)},l(o){W(e.$$.fragment,o)},m(o,i){U(e,o,i),n=!0},p(o,i){const a={};i&33&&(a.placeholder=o[5].t("Enter {{role}} message here",{role:o[0].role==="user"?o[5].t("a user"):o[5].t("an assistant")})),i&1&&(a.onBlur=o[10]),!t&&i&1&&(t=!0,a.value=o[0].content,be(()=>t=!1)),e.$set(a)},i(o){n||(N(e.$$.fragment,o),n=!0)},o(o){T(e.$$.fragment,o),n=!1},d(o){j(e,o)}}}function fl(l){let e,t,n;return t=new Ts({props:{size:"sm"}}),{c(){e=E("div"),A(t.$$.fragment),this.h()},l(s){e=I(s,"DIV",{class:!0});var r=k(e);W(t.$$.fragment,r),r.forEach(d),this.h()},h(){c(e,"class","")},m(s,r){S(s,e,r),U(t,e,null),n=!0},p:re,i(s){n||(N(t.$$.fragment,s),n=!0)},o(s){T(t.$$.fragment,s),n=!1},d(s){s&&d(e),j(t)}}}function cl(l){let e,t,n,s=l[5].t(l[0].role)+"",r,o,i,a,f,h,p,C,D,$,_,u,b;a=new nt({props:{placement:"top",content:l[5].t("Insert"),$$slots:{default:[ll]},$$scope:{ctx:l}}}),h=new nt({props:{placement:"top",content:l[5].t("Edit"),$$slots:{default:[ol]},$$scope:{ctx:l}}}),C=new nt({props:{placement:"top",content:l[5].t("Delete"),$$slots:{default:[rl]},$$scope:{ctx:l}}});const m=[fl,il,al],v=[];function H(y,z){var q,L,B;return!(((q=y[0])==null?void 0:q.done)??!0)&&((L=y[0])==null?void 0:L.content)===""?0:((B=y[0])==null?void 0:B.edit)===!0?1:2}return _=H(l),u=v[_]=m[_](l),{c(){e=E("div"),t=E("div"),n=E("div"),r=de(s),o=G(),i=E("div"),A(a.$$.fragment),f=G(),A(h.$$.fragment),p=G(),A(C.$$.fragment),D=G(),$=E("div"),u.c(),this.h()},l(y){e=I(y,"DIV",{class:!0});var z=k(e);t=I(z,"DIV",{class:!0});var q=k(t);n=I(q,"DIV",{class:!0});var L=k(n);r=me(L,s),L.forEach(d),o=Z(q),i=I(q,"DIV",{class:!0});var B=k(i);W(a.$$.fragment,B),f=Z(B),W(h.$$.fragment,B),p=Z(B),W(C.$$.fragment,B),B.forEach(d),q.forEach(d),D=Z(z),$=I(z,"DIV",{class:!0});var P=k($);u.l(P),P.forEach(d),z.forEach(d),this.h()},h(){c(n,"class","py-1 text-sm font-semibold uppercase min-w-[6rem] text-left rounded-lg transition"),c(i,"class","flex items-center gap-2"),c(t,"class","flex items-center justify-between pt-1"),c($,"class","flex-1"),c(e,"class","flex flex-col gap-1 group")},m(y,z){S(y,e,z),w(e,t),w(t,n),w(n,r),w(t,o),w(t,i),U(a,i,null),w(i,f),U(h,i,null),w(i,p),U(C,i,null),w(e,D),w(e,$),v[_].m($,null),b=!0},p(y,[z]){(!b||z&33)&&s!==(s=y[5].t(y[0].role)+"")&&ke(r,s);const q={};z&32&&(q.content=y[5].t("Insert")),z&8208&&(q.$$scope={dirty:z,ctx:y}),a.$set(q);const L={};z&32&&(L.content=y[5].t("Edit")),z&8200&&(L.$$scope={dirty:z,ctx:y}),h.$set(L);const B={};z&32&&(B.content=y[5].t("Delete")),z&8196&&(B.$$scope={dirty:z,ctx:y}),C.$set(B);let P=_;_=H(y),_===P?v[_].p(y,z):(Ye(),T(v[P],1,1,()=>{v[P]=null}),qe(),u=v[_],u?u.p(y,z):(u=v[_]=m[_](y),u.c()),N(u,1),u.m($,null))},i(y){b||(N(a.$$.fragment,y),N(h.$$.fragment,y),N(C.$$.fragment,y),N(u),b=!0)},o(y){T(a.$$.fragment,y),T(h.$$.fragment,y),T(C.$$.fragment,y),T(u),b=!1},d(y){y&&d(e),j(a),j(h),j(C),v[_].d()}}}function ul(l,e,t){let n;const s=_t("i18n");He(l,s,_=>t(5,n=_));let{message:r}=e,{idx:o}=e,{onDelete:i}=e,{onEdit:a}=e,{onInsert:f}=e;const h=()=>{f()},p=()=>{a()},C=()=>{i()},D=()=>{t(0,r.edit=!1,r)};function $(_){l.$$.not_equal(r.content,_)&&(r.content=_,t(0,r))}return l.$$set=_=>{"message"in _&&t(0,r=_.message),"idx"in _&&t(1,o=_.idx),"onDelete"in _&&t(2,i=_.onDelete),"onEdit"in _&&t(3,a=_.onEdit),"onInsert"in _&&t(4,f=_.onInsert)},[r,o,i,a,f,n,s,h,p,C,D,$]}class dl extends We{constructor(e){super(),Ue(this,e,ul,cl,Ae,{message:0,idx:1,onDelete:2,onEdit:3,onInsert:4})}}function en(l,e,t){const n=l.slice();return n[6]=e[t],n[8]=t,n}function tn(l){let e,t;function n(){return l[2](l[6])}function s(){return l[3](l[8])}function r(){return l[4](l[8])}return e=new dl({props:{message:l[6],idx:l[8],onInsert:n,onEdit:s,onDelete:r}}),{c(){A(e.$$.fragment)},l(o){W(e.$$.fragment,o)},m(o,i){U(e,o,i),t=!0},p(o,i){l=o;const a={};i&1&&(a.message=l[6]),i&3&&(a.onInsert=n),i&1&&(a.onEdit=s),i&1&&(a.onDelete=r),e.$set(a)},i(o){t||(N(e.$$.fragment,o),t=!0)},o(o){T(e.$$.fragment,o),t=!1},d(o){j(e,o)}}}function ml(l){let e,t,n=st(l[0]),s=[];for(let o=0;o<n.length;o+=1)s[o]=tn(en(l,n,o));const r=o=>T(s[o],1,1,()=>{s[o]=null});return{c(){e=E("div");for(let o=0;o<s.length;o+=1)s[o].c();this.h()},l(o){e=I(o,"DIV",{class:!0});var i=k(e);for(let a=0;a<s.length;a+=1)s[a].l(i);i.forEach(d),this.h()},h(){c(e,"class","space-y-3 pb-12")},m(o,i){S(o,e,i);for(let a=0;a<s.length;a+=1)s[a]&&s[a].m(e,null);t=!0},p(o,[i]){if(i&3){n=st(o[0]);let a;for(a=0;a<n.length;a+=1){const f=en(o,n,a);s[a]?(s[a].p(f,i),N(s[a],1)):(s[a]=tn(f),s[a].c(),N(s[a],1),s[a].m(e,null))}for(Ye(),a=n.length;a<s.length;a+=1)r(a);qe()}},i(o){if(!t){for(let i=0;i<n.length;i+=1)N(s[i]);t=!0}},o(o){s=s.filter(Boolean);for(let i=0;i<s.length;i+=1)T(s[i]);t=!1},d(o){o&&d(e),$t(s,o)}}}function hl(l,e,t){_t("i18n");let{messages:n=[]}=e,{onInsert:s=a=>{}}=e;const r=a=>{s((a==null?void 0:a.content)??"")},o=a=>{t(0,n=n.map((f,h)=>h===a?{...f,edit:!0}:f))},i=a=>{t(0,n=n.filter((f,h)=>h!==a))};return l.$$set=a=>{"messages"in a&&t(0,n=a.messages),"onInsert"in a&&t(1,s=a.onInsert)},[n,s,r,o,i]}class gl extends We{constructor(e){super(),Ue(this,e,hl,ml,Ae,{messages:0,onInsert:1})}}function nn(l,e,t){const n=l.slice();return n[36]=e[t],n}function _l(l){let e,t,n=l[11].t("Experimental")+"",s,r;return{c(){e=E("span"),t=de("("),s=de(n),r=de(")"),this.h()},l(o){e=I(o,"SPAN",{class:!0});var i=k(e);t=me(i,"("),s=me(i,n),r=me(i,")"),i.forEach(d),this.h()},h(){c(e,"class","text-gray-500 text-sm")},m(o,i){S(o,e,i),w(e,t),w(e,s),w(e,r)},p(o,i){i[0]&2048&&n!==(n=o[11].t("Experimental")+"")&&ke(s,n)},d(o){o&&d(e)}}}function sn(l){var o;let e,t,n,s=((o=l[3])==null?void 0:o.text)+"",r;return{c(){e=E("div"),t=E("blockquote"),n=E("div"),r=de(s),this.h()},l(i){e=I(i,"DIV",{class:!0});var a=k(e);t=I(a,"BLOCKQUOTE",{});var f=k(t);n=I(f,"DIV",{class:!0});var h=k(n);r=me(h,s),h.forEach(d),f.forEach(d),a.forEach(d),this.h()},h(){c(n,"class","line-clamp-3"),c(e,"class","text-xs rounded-xl px-3.5 py-3 w-full markdown-prose-xs")},m(i,a){S(i,e,a),w(e,t),w(t,n),w(n,r)},p(i,a){var f;a[0]&8&&s!==(s=((f=i[3])==null?void 0:f.text)+"")&&ke(r,s)},d(i){i&&d(e)}}}function pl(l){let e,t,n,s,r=l[11].t("Edit")+"",o,i,a,f,h,p;return t=new zs({props:{className:"size-4",strokeWidth:"1.75"}}),{c(){e=E("button"),A(t.$$.fragment),n=G(),s=E("span"),o=de(r),this.h()},l(C){e=I(C,"BUTTON",{type:!0,class:!0});var D=k(e);W(t.$$.fragment,D),n=Z(D),s=I(D,"SPAN",{class:!0});var $=k(s);o=me($,r),$.forEach(d),D.forEach(d),this.h()},h(){c(s,"class","block whitespace-nowrap overflow-hidden text-ellipsis leading-none pr-0.5"),e.disabled=i=l[2]||l[7],c(e,"type","button"),c(e,"class",a="px-2 @xl:px-2.5 py-2 flex gap-1.5 items-center text-sm rounded-full transition-colors duration-300 focus:outline-hidden max-w-full overflow-hidden hover:bg-gray-50 dark:hover:bg-gray-800 "+(l[9]?" text-sky-500 dark:text-sky-300 bg-sky-50 dark:bg-sky-200/5":"bg-transparent text-gray-600 dark:text-gray-300 ")+" disabled:opacity-50 disabled:pointer-events-none")},m(C,D){S(C,e,D),U(t,e,null),w(e,n),w(e,s),w(s,o),f=!0,h||(p=ce(e,"click",Kn(l[27])),h=!0)},p(C,D){(!f||D[0]&2048)&&r!==(r=C[11].t("Edit")+"")&&ke(o,r),(!f||D[0]&132&&i!==(i=C[2]||C[7]))&&(e.disabled=i),(!f||D[0]&512&&a!==(a="px-2 @xl:px-2.5 py-2 flex gap-1.5 items-center text-sm rounded-full transition-colors duration-300 focus:outline-hidden max-w-full overflow-hidden hover:bg-gray-50 dark:hover:bg-gray-800 "+(C[9]?" text-sky-500 dark:text-sky-300 bg-sky-50 dark:bg-sky-200/5":"bg-transparent text-gray-600 dark:text-gray-300 ")+" disabled:opacity-50 disabled:pointer-events-none"))&&c(e,"class",a)},i(C){f||(N(t.$$.fragment,C),f=!0)},o(C){T(t.$$.fragment,C),f=!1},d(C){C&&d(e),j(t),h=!1,p()}}}function ln(l){let e,t=l[36].name+"",n,s;return{c(){e=E("option"),n=de(t),this.h()},l(r){e=I(r,"OPTION",{class:!0});var o=k(e);n=me(o,t),o.forEach(d),this.h()},h(){e.__value=s=l[36].id,gt(e,e.__value),c(e,"class","bg-gray-50 dark:bg-gray-700")},m(r,o){S(r,e,o),w(e,n)},p(r,o){o[0]&4096&&t!==(t=r[36].name+"")&&ke(n,t),o[0]&4096&&s!==(s=r[36].id)&&(e.__value=s,gt(e,e.__value))},d(r){r&&d(e)}}}function vl(l){let e,t,n,s=st(l[12]),r=[];for(let o=0;o<s.length;o+=1)r[o]=ln(nn(l,s,o));return{c(){e=E("select");for(let o=0;o<r.length;o+=1)r[o].c();this.h()},l(o){e=I(o,"SELECT",{class:!0});var i=k(e);for(let a=0;a<r.length;a+=1)r[a].l(i);i.forEach(d),this.h()},h(){c(e,"class","bg-transparent rounded-lg py-1 px-2 -mx-0.5 text-sm outline-hidden w-full text-right pr-5"),l[1]===void 0&&gn(()=>l[28].call(e))},m(o,i){S(o,e,i);for(let a=0;a<r.length;a+=1)r[a]&&r[a].m(e,null);Tt(e,l[1],!0),t||(n=ce(e,"change",l[28]),t=!0)},p(o,i){if(i[0]&4096){s=st(o[12]);let a;for(a=0;a<s.length;a+=1){const f=nn(o,s,a);r[a]?r[a].p(f,i):(r[a]=ln(f),r[a].c(),r[a].m(e,null))}for(;a<r.length;a+=1)r[a].d(1);r.length=s.length}i[0]&4098&&Tt(e,o[1])},d(o){o&&d(e),$t(r,o),t=!1,n()}}}function bl(l){let e,t,n,s,r,o;return n=new nt({props:{content:l[11].t("Edit"),placement:"top",$$slots:{default:[pl]},$$scope:{ctx:l}}}),r=new nt({props:{content:l[1],$$slots:{default:[vl]},$$scope:{ctx:l}}}),{c(){e=E("div"),t=E("div"),A(n.$$.fragment),s=G(),A(r.$$.fragment),this.h()},l(i){e=I(i,"DIV",{slot:!0,class:!0});var a=k(e);t=I(a,"DIV",{});var f=k(t);W(n.$$.fragment,f),f.forEach(d),s=Z(a),W(r.$$.fragment,a),a.forEach(d),this.h()},h(){c(e,"slot","menu"),c(e,"class","flex items-center justify-between gap-2 w-full pr-1")},m(i,a){S(i,e,a),w(e,t),U(n,t,null),w(e,s),U(r,e,null),o=!0},p(i,a){const f={};a[0]&2048&&(f.content=i[11].t("Edit")),a[0]&2692|a[1]&256&&(f.$$scope={dirty:a,ctx:i}),n.$set(f);const h={};a[0]&2&&(h.content=i[1]),a[0]&4098|a[1]&256&&(h.$$scope={dirty:a,ctx:i}),r.$set(h)},i(i){o||(N(n.$$.fragment,i),N(r.$$.fragment,i),o=!0)},o(i){T(n.$$.fragment,i),T(r.$$.fragment,i),o=!1},d(i){i&&d(e),j(n),j(r)}}}function wl(l){let e,t,n,s,r,o,i,a=l[11].t("Chat")+"",f,h,p,C,D,$,_,u,b,m,v,H,y,z,q,L,B,P,X,J,Q,oe;s=new wn({props:{className:"size-5",strokeWidth:"2.5"}}),C=new nt({props:{content:l[11].t("This feature is experimental and may be modified or discontinued without notice."),position:"top",className:"inline-block",$$slots:{default:[_l]},$$scope:{ctx:l}}});function se(R){l[25](R)}let De={onInsert:l[5]};l[4]!==void 0&&(De.messages=l[4]),y=new gl({props:De}),ge.push(()=>we(y,"messages",se));let ee=l[3]&&sn(l);function ue(R){l[29](R)}let $e={acceptFiles:!1,inputLoading:l[7],showFormattingButtons:!1,onSubmit:l[15],onStop:l[6],$$slots:{menu:[bl]},$$scope:{ctx:l}};return l[10]!==void 0&&($e.chatInputElement=l[10]),P=new ys({props:$e}),ge.push(()=>we(P,"chatInputElement",ue)),{c(){e=E("div"),t=E("div"),n=E("button"),A(s.$$.fragment),r=G(),o=E("div"),i=E("div"),f=de(a),h=G(),p=E("div"),A(C.$$.fragment),D=G(),$=E("div"),_=E("div"),u=E("div"),b=E("div"),m=E("div"),v=E("div"),H=E("div"),A(y.$$.fragment),q=G(),L=E("div"),ee&&ee.c(),B=G(),A(P.$$.fragment),this.h()},l(R){e=I(R,"DIV",{class:!0});var x=k(e);t=I(x,"DIV",{class:!0});var V=k(t);n=I(V,"BUTTON",{class:!0});var le=k(n);W(s.$$.fragment,le),le.forEach(d),V.forEach(d),r=Z(x),o=I(x,"DIV",{class:!0});var te=k(o);i=I(te,"DIV",{});var Pe=k(i);f=me(Pe,a),Pe.forEach(d),h=Z(te),p=I(te,"DIV",{});var ve=k(p);W(C.$$.fragment,ve),ve.forEach(d),te.forEach(d),x.forEach(d),D=Z(R),$=I(R,"DIV",{class:!0});var Je=k($);_=I(Je,"DIV",{class:!0});var Ne=k(_);u=I(Ne,"DIV",{class:!0});var Ge=k(u);b=I(Ge,"DIV",{class:!0});var Ze=k(b);m=I(Ze,"DIV",{class:!0,id:!0});var Le=k(m);v=I(Le,"DIV",{class:!0});var Te=k(v);H=I(Te,"DIV",{class:!0});var xe=k(H);W(y.$$.fragment,xe),xe.forEach(d),Te.forEach(d),Le.forEach(d),q=Z(Ze),L=I(Ze,"DIV",{class:!0});var Me=k(L);ee&&ee.l(Me),B=Z(Me),W(P.$$.fragment,Me),Me.forEach(d),Ze.forEach(d),Ge.forEach(d),Ne.forEach(d),Je.forEach(d),this.h()},h(){c(n,"class","p-0.5 bg-transparent transition rounded-lg"),c(t,"class","-translate-x-1.5 flex items-center"),c(o,"class","font-medium text-base flex items-center gap-1"),c(e,"class","flex items-center mb-1.5 pt-1.5"),c(H,"class","flex-1 p-1"),c(v,"class","h-full w-full flex flex-col"),c(m,"class","pb-2.5 flex flex-col justify-between w-full flex-auto overflow-auto h-0 scrollbar-hidden"),c(m,"id","messages-container"),c(L,"class","pb-2"),c(b,"class","flex flex-col h-full"),c(u,"class","mx-auto w-full md:px-0 h-full relative"),c(_,"class","flex flex-col justify-between w-full overflow-y-auto h-full"),c($,"class","flex flex-col items-center mb-2 flex-1 @container")},m(R,x){S(R,e,x),w(e,t),w(t,n),U(s,n,null),w(e,r),w(e,o),w(o,i),w(i,f),w(o,h),w(o,p),U(C,p,null),S(R,D,x),S(R,$,x),w($,_),w(_,u),w(u,b),w(b,m),w(m,v),w(v,H),U(y,H,null),l[26](m),w(b,q),w(b,L),ee&&ee.m(L,null),w(L,B),U(P,L,null),J=!0,Q||(oe=[ce(n,"click",l[24]),ce(m,"scroll",l[14])],Q=!0)},p(R,x){(!J||x[0]&2048)&&a!==(a=R[11].t("Chat")+"")&&ke(f,a);const V={};x[0]&2048&&(V.content=R[11].t("This feature is experimental and may be modified or discontinued without notice.")),x[0]&2048|x[1]&256&&(V.$$scope={dirty:x,ctx:R}),C.$set(V);const le={};x[0]&32&&(le.onInsert=R[5]),!z&&x[0]&16&&(z=!0,le.messages=R[4],be(()=>z=!1)),y.$set(le),R[3]?ee?ee.p(R,x):(ee=sn(R),ee.c(),ee.m(L,B)):ee&&(ee.d(1),ee=null);const te={};x[0]&128&&(te.inputLoading=R[7]),x[0]&64&&(te.onStop=R[6]),x[0]&6790|x[1]&256&&(te.$$scope={dirty:x,ctx:R}),!X&&x[0]&1024&&(X=!0,te.chatInputElement=R[10],be(()=>X=!1)),P.$set(te)},i(R){J||(N(s.$$.fragment,R),N(C.$$.fragment,R),N(y.$$.fragment,R),N(P.$$.fragment,R),J=!0)},o(R){T(s.$$.fragment,R),T(C.$$.fragment,R),T(y.$$.fragment,R),T(P.$$.fragment,R),J=!1},d(R){R&&(d(e),d(D),d($)),j(s),j(C),j(y),l[26](null),ee&&ee.d(),j(P),Q=!1,Et(oe)}}}function kl(l,e,t){let n,s;He(l,Wt,V=>t(12,s=V));let{show:r=!1}=e,{selectedModelId:o=""}=e;Vt.use({breaks:!0,gfm:!0,renderer:{list(V,le,te){if(V.includes("data-checked="))return`<ul data-type="taskList">${V}</ul>`;const ve=le?"ol":"ul",Je=le&&te!==1?` start="${te}"`:"";return`<${ve}${Je}>${V}</${ve}>`},listitem(V,le,te){return le?`<li data-type="taskItem" data-checked="${te?"true":"false"}">${V}</li>`:`<li>${V}</li>`}}});const i=_t("i18n");He(l,i,V=>t(11,n=V));let{editor:a=null}=e,{editing:f=!1}=e,{streaming:h=!1}=e,{stopResponseFlag:p=!1}=e,{note:C=null}=e,{selectedContent:D=null}=e,{files:$=[]}=e,{messages:_=[]}=e,{onInsert:u=V=>{}}=e,{onStop:b=()=>{}}=e,{onEdited:m=()=>{}}=e,{insertNoteHandler:v=()=>{}}=e,{scrollToBottomHandler:H=()=>{}}=e,y=!1,z,q="",L=!1,B=null;const P=`You are an expert document editor.

## Task
Based on the user's instruction, update and enhance the existing notes or selection by incorporating relevant and accurate information from the provided context in the content's primary language. Ensure all edits strictly follow the user’s intent.

## Input Structure
- Existing notes: Enclosed within <notes></notes> XML tags.
- Additional context: Enclosed within <context></context> XML tags.
- Current note selection: Enclosed within <selection></selection> XML tags.
- Editing instruction: Provided in the user message.

## Output Instructions
- If a selection is provided, edit **only** the content within <selection></selection>. Leave unselected parts unchanged.
- If no selection is provided, edit the entire notes.
- Deliver a single, rewritten version of the notes in markdown format.
- Integrate information from the context only if it directly supports the user's instruction.
- Use clear, organized markdown elements: headings, lists, task lists ([ ]) where tasks or checklists are strongly implied, bold and italic text as appropriate.
- Focus on improving clarity, completeness, and usefulness of the notes.
- Return only the final, fully-edited markdown notes—do not include explanations, reasoning, or XML tags.
`;let X=!0;const J=()=>{z&&X&&t(8,z.scrollTop=z.scrollHeight,z)},Q=()=>{z&&(X=z.scrollHeight-z.scrollTop<=z.clientHeight+10)},oe=async()=>{var Ge,Ze,Le,Te,xe;if(o===""){Se.error(n.t("Please select a model."));return}const V=s.find(Me=>Me.id===o);if(!V){t(1,o="");return}let le;((Ge=_.at(-1))==null?void 0:Ge.role)==="assistant"?le=_.at(-1):(le={role:"assistant",content:"",done:!1},_.push(le),t(4,_)),await ft(),J(),t(17,p=!1);let te={json:null,html:"",md:""};q="",L?q=`${P}

`:q=`You are a helpful assistant. Please answer the user's questions based on the context provided.

`,q+=`<notes>${((Le=(Ze=C==null?void 0:C.data)==null?void 0:Ze.content)==null?void 0:Le.md)??""}</notes>`+($&&$.length>0?`
<context>${$.map(Me=>{var ae,ie;return`${Me.name}: ${((ie=(ae=Me==null?void 0:Me.file)==null?void 0:ae.data)==null?void 0:ie.content)??"Could not extract content"}
`}).join("")}</context>`:"")+(D?`
<selection>${D==null?void 0:D.text}</selection>`:"");const Pe=JSON.parse(JSON.stringify([{role:"system",content:`${q}`},..._])),[ve,Je]=await bn(localStorage.token,{model:V.id,stream:!0,messages:Pe},`${Ot}/api`);await ft(),J();let Ne="";if(ve&&ve.ok){const Me=ve.body.pipeThrough(new TextDecoderStream).pipeThrough(vn(`
`)).getReader();for(;;){const{value:ae,done:ie}=await Me.read();if(ie||p){p&&Je.abort("User: Stop Response"),L&&(t(16,f=!1),t(2,h=!1),m());break}try{let ct=ae.split(`
`);for(const Ke of ct)if(Ke!=="")if(Ke==="data: [DONE]")L&&(le.content=`<status title="${n.t("Edited")}" done="true" />`,D&&(D!=null&&D.text)&&a&&(a.commands.insertContentAt({from:D.from,to:D.to},te.html||te.md||""),t(3,D=null))),le.done=!0,t(4,_);else{let Re=JSON.parse(Ke.replace(/^data: /,"")),Ee=((xe=(Te=Re.choices[0])==null?void 0:Te.delta)==null?void 0:xe.content)??"";if(le.content==""&&Ee==`
`)continue;L?(t(16,f=!0),t(2,h=!0),te.md+=Ee,te.html=Vt.parse(te.md),(!D||!(D!=null&&D.text))&&(t(18,C.data.content.md=te.md,C),t(18,C.data.content.html=te.html,C),t(18,C.data.content.json=null,C)),H(),le.content=`<status title="${n.t("Editing")}" done="false" />`,t(4,_)):(Ne+=Ee,le.content=Ne,t(4,_)),await ft()}}catch(ct){}J()}}},se=async V=>{const{content:le,data:te}=V;o&&le&&(_.push({role:"user",content:le}),t(4,_),await ft(),J(),t(7,y=!0),await oe(),t(4,_=_.map(Pe=>(Pe.done=!0,Pe))),t(7,y=!1),t(17,p=!1))};Bt(async()=>{t(9,L=localStorage.getItem("noteEditEnabled")==="true"),await ft(),J()});const De=()=>{t(0,r=!r)};function ee(V){_=V,t(4,_)}function ue(V){ge[V?"unshift":"push"](()=>{z=V,t(8,z)})}const $e=()=>{t(9,L=!L),localStorage.setItem("noteEditEnabled",L?"true":"false")};function R(){o=_n(this),t(1,o)}function x(V){B=V,t(10,B)}return l.$$set=V=>{"show"in V&&t(0,r=V.show),"selectedModelId"in V&&t(1,o=V.selectedModelId),"editor"in V&&t(19,a=V.editor),"editing"in V&&t(16,f=V.editing),"streaming"in V&&t(2,h=V.streaming),"stopResponseFlag"in V&&t(17,p=V.stopResponseFlag),"note"in V&&t(18,C=V.note),"selectedContent"in V&&t(3,D=V.selectedContent),"files"in V&&t(20,$=V.files),"messages"in V&&t(4,_=V.messages),"onInsert"in V&&t(5,u=V.onInsert),"onStop"in V&&t(6,b=V.onStop),"onEdited"in V&&t(21,m=V.onEdited),"insertNoteHandler"in V&&t(22,v=V.insertNoteHandler),"scrollToBottomHandler"in V&&t(23,H=V.scrollToBottomHandler)},[r,o,h,D,_,u,b,y,z,L,B,n,s,i,Q,se,f,p,C,a,$,m,v,H,De,ee,ue,$e,R,x]}class El extends We{constructor(e){super(),Ue(this,e,kl,wl,Ae,{show:0,selectedModelId:1,editor:19,editing:16,streaming:2,stopResponseFlag:17,note:18,selectedContent:3,files:20,messages:4,onInsert:5,onStop:6,onEdited:21,insertNoteHandler:22,scrollToBottomHandler:23},null,[-1,-1])}}function Il(l){let e,t;return{c(){e=Oe("svg"),t=Oe("path"),this.h()},l(n){e=Be(n,"svg",{xmlns:!0,fill:!0,viewBox:!0,"stroke-width":!0,stroke:!0,class:!0});var s=k(e);t=Be(s,"path",{"stroke-linecap":!0,"stroke-linejoin":!0,d:!0}),k(t).forEach(d),s.forEach(d),this.h()},h(){c(t,"stroke-linecap","round"),c(t,"stroke-linejoin","round"),c(t,"d","M6.75 3v2.25M17.25 3v2.25M3 18.75V7.5a2.25 2.25 0 0 1 2.25-2.25h13.5A2.25 2.25 0 0 1 21 7.5v11.25m-18 0A2.25 2.25 0 0 0 5.25 21h13.5A2.25 2.25 0 0 0 21 18.75m-18 0v-7.5A2.25 2.25 0 0 1 5.25 9h13.5A2.25 2.25 0 0 1 21 11.25v7.5"),c(e,"xmlns","http://www.w3.org/2000/svg"),c(e,"fill","none"),c(e,"viewBox","0 0 24 24"),c(e,"stroke-width",l[1]),c(e,"stroke","currentColor"),c(e,"class",l[0])},m(n,s){S(n,e,s),w(e,t)},p(n,[s]){s&2&&c(e,"stroke-width",n[1]),s&1&&c(e,"class",n[0])},i:re,o:re,d(n){n&&d(e)}}}function $l(l,e,t){let{className:n="size-3"}=e,{strokeWidth:s="1.5"}=e;return l.$$set=r=>{"className"in r&&t(0,n=r.className),"strokeWidth"in r&&t(1,s=r.strokeWidth)},[n,s]}class Nl extends We{constructor(e){super(),Ue(this,e,$l,Il,Ae,{className:0,strokeWidth:1})}}function Cl(l){let e,t;return{c(){e=Oe("svg"),t=Oe("path"),this.h()},l(n){e=Be(n,"svg",{xmlns:!0,fill:!0,viewBox:!0,"stroke-width":!0,stroke:!0,class:!0});var s=k(e);t=Be(s,"path",{"stroke-linecap":!0,"stroke-linejoin":!0,d:!0}),k(t).forEach(d),s.forEach(d),this.h()},h(){c(t,"stroke-linecap","round"),c(t,"stroke-linejoin","round"),c(t,"d","M15 19.128a9.38 9.38 0 0 0 2.625.372 9.337 9.337 0 0 0 4.121-.952 4.125 4.125 0 0 0-7.533-2.493M15 19.128v-.003c0-1.113-.285-2.16-.786-3.07M15 19.128v.106A12.318 12.318 0 0 1 8.624 21c-2.331 0-4.512-.645-6.374-1.766l-.001-.109a6.375 6.375 0 0 1 11.964-3.07M12 6.375a3.375 3.375 0 1 1-6.75 0 3.375 3.375 0 0 1 6.75 0Zm8.25 2.25a2.625 2.625 0 1 1-5.25 0 2.625 2.625 0 0 1 5.25 0Z"),c(e,"xmlns","http://www.w3.org/2000/svg"),c(e,"fill","none"),c(e,"viewBox","0 0 24 24"),c(e,"stroke-width",l[1]),c(e,"stroke","currentColor"),c(e,"class",l[0])},m(n,s){S(n,e,s),w(e,t)},p(n,[s]){s&2&&c(e,"stroke-width",n[1]),s&1&&c(e,"class",n[0])},i:re,o:re,d(n){n&&d(e)}}}function Dl(l,e,t){let{className:n="size-3"}=e,{strokeWidth:s="1.5"}=e;return l.$$set=r=>{"className"in r&&t(0,n=r.className),"strokeWidth"in r&&t(1,s=r.strokeWidth)},[n,s]}class Tl extends We{constructor(e){super(),Ue(this,e,Dl,Cl,Ae,{className:0,strokeWidth:1})}}function Ml(l){let e,t;return{c(){e=Oe("svg"),t=Oe("path"),this.h()},l(n){e=Be(n,"svg",{xmlns:!0,fill:!0,viewBox:!0,"stroke-width":!0,stroke:!0,class:!0});var s=k(e);t=Be(s,"path",{"stroke-linecap":!0,"stroke-linejoin":!0,d:!0}),k(t).forEach(d),s.forEach(d),this.h()},h(){c(t,"stroke-linecap","round"),c(t,"stroke-linejoin","round"),c(t,"d","M12 18.75a6 6 0 0 0 6-6v-1.5m-6 7.5a6 6 0 0 1-6-6v-1.5m6 7.5v3.75m-3.75 0h7.5M12 15.75a3 3 0 0 1-3-3V4.5a3 3 0 1 1 6 0v8.25a3 3 0 0 1-3 3Z"),c(e,"xmlns","http://www.w3.org/2000/svg"),c(e,"fill","none"),c(e,"viewBox","0 0 24 24"),c(e,"stroke-width",l[1]),c(e,"stroke","currentColor"),c(e,"class",l[0])},m(n,s){S(n,e,s),w(e,t)},p(n,[s]){s&2&&c(e,"stroke-width",n[1]),s&1&&c(e,"class",n[0])},i:re,o:re,d(n){n&&d(e)}}}function Sl(l,e,t){let{className:n="size-4"}=e,{strokeWidth:s="1.5"}=e;return l.$$set=r=>{"className"in r&&t(0,n=r.className),"strokeWidth"in r&&t(1,s=r.strokeWidth)},[n,s]}class yl extends We{constructor(e){super(),Ue(this,e,Sl,Ml,Ae,{className:0,strokeWidth:1})}}function zl(l){let e,t;return{c(){e=Oe("svg"),t=Oe("path"),this.h()},l(n){e=Be(n,"svg",{xmlns:!0,fill:!0,viewBox:!0,"stroke-width":!0,stroke:!0,class:!0});var s=k(e);t=Be(s,"path",{"stroke-linecap":!0,"stroke-linejoin":!0,d:!0}),k(t).forEach(d),s.forEach(d),this.h()},h(){c(t,"stroke-linecap","round"),c(t,"stroke-linejoin","round"),c(t,"d","M15.042 21.672 13.684 16.6m0 0-2.51 2.225.569-9.47 5.227 7.917-3.286-.672ZM12 2.25V4.5m5.834.166-1.591 1.591M20.25 10.5H18M7.757 14.743l-1.59 1.59M6 10.5H3.75m4.007-4.243-1.59-1.59"),c(e,"xmlns","http://www.w3.org/2000/svg"),c(e,"fill","none"),c(e,"viewBox","0 0 24 24"),c(e,"stroke-width",l[1]),c(e,"stroke","currentColor"),c(e,"class",l[0])},m(n,s){S(n,e,s),w(e,t)},p(n,[s]){s&2&&c(e,"stroke-width",n[1]),s&1&&c(e,"class",n[0])},i:re,o:re,d(n){n&&d(e)}}}function Vl(l,e,t){let{className:n="size-4"}=e,{strokeWidth:s="1.5"}=e;return l.$$set=r=>{"className"in r&&t(0,n=r.className),"strokeWidth"in r&&t(1,s=r.strokeWidth)},[n,s]}class Ol extends We{constructor(e){super(),Ue(this,e,Vl,zl,Ae,{className:0,strokeWidth:1})}}const Bl=l=>({}),on=l=>({});function Al(l){let e;const t=l[8].default,n=vt(t,l,l[15],null);return{c(){n&&n.c()},l(s){n&&n.l(s)},m(s,r){n&&n.m(s,r),e=!0},p(s,r){n&&n.p&&(!e||r&32768)&&bt(n,t,s,s[15],e?kt(t,s[15],r,null):wt(s[15]),null)},i(s){e||(N(n,s),e=!0)},o(s){T(n,s),e=!1},d(s){n&&n.d(s)}}}function Wl(l){let e,t,n,s,r,o=l[5].t("Record")+"",i,a,f,h,p,C,D,$=l[5].t("Capture Audio")+"",_,u,b,m,v,H,y,z=l[5].t("Upload Audio")+"",q,L,B,P;return n=new yl({props:{className:"size-4",strokeWidth:"2"}}),p=new Ol({props:{className:"size-4",strokeWidth:"2"}}),v=new Rs({props:{className:"size-4",strokeWidth:"2"}}),{c(){e=E("button"),t=E("div"),A(n.$$.fragment),s=G(),r=E("div"),i=de(o),a=G(),f=E("button"),h=E("div"),A(p.$$.fragment),C=G(),D=E("div"),_=de($),u=G(),b=E("button"),m=E("div"),A(v.$$.fragment),H=G(),y=E("div"),q=de(z),this.h()},l(X){e=I(X,"BUTTON",{class:!0});var J=k(e);t=I(J,"DIV",{class:!0});var Q=k(t);W(n.$$.fragment,Q),Q.forEach(d),s=Z(J),r=I(J,"DIV",{class:!0});var oe=k(r);i=me(oe,o),oe.forEach(d),J.forEach(d),a=Z(X),f=I(X,"BUTTON",{class:!0});var se=k(f);h=I(se,"DIV",{class:!0});var De=k(h);W(p.$$.fragment,De),De.forEach(d),C=Z(se),D=I(se,"DIV",{class:!0});var ee=k(D);_=me(ee,$),ee.forEach(d),se.forEach(d),u=Z(X),b=I(X,"BUTTON",{class:!0});var ue=k(b);m=I(ue,"DIV",{class:!0});var $e=k(m);W(v.$$.fragment,$e),$e.forEach(d),H=Z(ue),y=I(ue,"DIV",{class:!0});var R=k(y);q=me(R,z),R.forEach(d),ue.forEach(d),this.h()},h(){c(t,"class","self-center mr-2"),c(r,"class","self-center truncate"),c(e,"class","flex rounded-md py-1.5 px-3 w-full hover:bg-gray-50 dark:hover:bg-gray-800 transition"),c(h,"class","self-center mr-2"),c(D,"class","self-center truncate"),c(f,"class","flex rounded-md py-1.5 px-3 w-full hover:bg-gray-50 dark:hover:bg-gray-800 transition"),c(m,"class","self-center mr-2"),c(y,"class","self-center truncate"),c(b,"class","flex rounded-md py-1.5 px-3 w-full hover:bg-gray-50 dark:hover:bg-gray-800 transition")},m(X,J){S(X,e,J),w(e,t),U(n,t,null),w(e,s),w(e,r),w(r,i),S(X,a,J),S(X,f,J),w(f,h),U(p,h,null),w(f,C),w(f,D),w(D,_),S(X,u,J),S(X,b,J),w(b,m),U(v,m,null),w(b,H),w(b,y),w(y,q),L=!0,B||(P=[ce(e,"click",l[9]),ce(f,"click",l[10]),ce(b,"click",l[11])],B=!0)},p(X,J){(!L||J&32)&&o!==(o=X[5].t("Record")+"")&&ke(i,o),(!L||J&32)&&$!==($=X[5].t("Capture Audio")+"")&&ke(_,$),(!L||J&32)&&z!==(z=X[5].t("Upload Audio")+"")&&ke(q,z)},i(X){L||(N(n.$$.fragment,X),N(p.$$.fragment,X),N(v.$$.fragment,X),L=!0)},o(X){T(n.$$.fragment,X),T(p.$$.fragment,X),T(v.$$.fragment,X),L=!1},d(X){X&&(d(e),d(a),d(f),d(u),d(b)),j(n),j(p),j(v),B=!1,Et(P)}}}function Ul(l){let e,t;return e=new Cn({props:{class:"w-full "+l[1]+" text-sm rounded-xl px-1 py-1.5 z-50 bg-white dark:bg-gray-850 dark:text-white shadow-lg font-primary",sideOffset:8,side:"bottom",align:"start",transition:l[12],$$slots:{default:[Wl]},$$scope:{ctx:l}}}),{c(){A(e.$$.fragment)},l(n){W(e.$$.fragment,n)},m(n,s){U(e,n,s),t=!0},p(n,s){const r={};s&2&&(r.class="w-full "+n[1]+" text-sm rounded-xl px-1 py-1.5 z-50 bg-white dark:bg-gray-850 dark:text-white shadow-lg font-primary"),s&32829&&(r.$$scope={dirty:s,ctx:n}),e.$set(r)},i(n){t||(N(e.$$.fragment,n),t=!0)},o(n){T(e.$$.fragment,n),t=!1},d(n){j(e,n)}}}function jl(l){let e,t,n;e=new Nn({props:{$$slots:{default:[Al]},$$scope:{ctx:l}}});const s=l[8].content,r=vt(s,l,l[15],on),o=r||Ul(l);return{c(){A(e.$$.fragment),t=G(),o&&o.c()},l(i){W(e.$$.fragment,i),t=Z(i),o&&o.l(i)},m(i,a){U(e,i,a),S(i,t,a),o&&o.m(i,a),n=!0},p(i,a){const f={};a&32768&&(f.$$scope={dirty:a,ctx:i}),e.$set(f),r?r.p&&(!n||a&32768)&&bt(r,s,i,i[15],n?kt(s,i[15],a,Bl):wt(i[15]),on):o&&o.p&&(!n||a&63)&&o.p(i,n?a:-1)},i(i){n||(N(e.$$.fragment,i),N(o,i),n=!0)},o(i){T(e.$$.fragment,i),T(o,i),n=!1},d(i){i&&d(t),j(e,i),o&&o.d(i)}}}function Pl(l){let e,t,n;function s(o){l[14](o)}let r={onOpenChange:l[13],$$slots:{default:[jl]},$$scope:{ctx:l}};return l[0]!==void 0&&(r.open=l[0]),e=new $n({props:r}),ge.push(()=>we(e,"open",s)),{c(){A(e.$$.fragment)},l(o){W(e.$$.fragment,o)},m(o,i){U(e,o,i),n=!0},p(o,[i]){const a={};i&32831&&(a.$$scope={dirty:i,ctx:o}),!t&&i&1&&(t=!0,a.open=o[0],be(()=>t=!1)),e.$set(a)},i(o){n||(N(e.$$.fragment,o),n=!0)},o(o){T(e.$$.fragment,o),n=!1},d(o){j(e,o)}}}function Rl(l,e,t){let n,{$$slots:s={},$$scope:r}=e;const o=_t("i18n");He(l,o,v=>t(5,n=v));let{show:i=!1}=e,{className:a="max-w-[170px]"}=e,{onRecord:f=()=>{}}=e,{onCaptureAudio:h=()=>{}}=e,{onUpload:p=()=>{}}=e;const C=xn(),D=async()=>{f(),t(0,i=!1)},$=()=>{h(),t(0,i=!1)},_=()=>{p(),t(0,i=!1)},u=v=>Dn(v,{duration:100}),b=v=>{C("change",v)};function m(v){i=v,t(0,i)}return l.$$set=v=>{"show"in v&&t(0,i=v.show),"className"in v&&t(1,a=v.className),"onRecord"in v&&t(2,f=v.onRecord),"onCaptureAudio"in v&&t(3,h=v.onCaptureAudio),"onUpload"in v&&t(4,p=v.onUpload),"$$scope"in v&&t(15,r=v.$$scope)},[i,a,f,h,p,n,o,C,s,D,$,_,u,b,m,r]}class Hl extends We{constructor(e){super(),Ue(this,e,Rl,Pl,Ae,{show:0,className:1,onRecord:2,onCaptureAudio:3,onUpload:4})}}function Ll(l){let e,t;return{c(){e=Oe("svg"),t=Oe("path"),this.h()},l(n){e=Be(n,"svg",{xmlns:!0,viewBox:!0,fill:!0,class:!0});var s=k(e);t=Be(s,"path",{"fill-rule":!0,d:!0,"clip-rule":!0}),k(t).forEach(d),s.forEach(d),this.h()},h(){c(t,"fill-rule","evenodd"),c(t,"d","M9 4.5a.75.75 0 0 1 .721.544l.813 2.846a3.75 3.75 0 0 0 2.576 2.576l2.846.813a.75.75 0 0 1 0 1.442l-2.846.813a3.75 3.75 0 0 0-2.576 2.576l-.813 2.846a.75.75 0 0 1-1.442 0l-.813-2.846a3.75 3.75 0 0 0-2.576-2.576l-2.846-.813a.75.75 0 0 1 0-1.442l2.846-.813A3.75 3.75 0 0 0 7.466 7.89l.813-2.846A.75.75 0 0 1 9 4.5ZM18 1.5a.75.75 0 0 1 .728.568l.258 1.036c.236.94.97 1.674 1.91 1.91l1.036.258a.75.75 0 0 1 0 1.456l-1.036.258c-.94.236-1.674.97-1.91 1.91l-.258 1.036a.75.75 0 0 1-1.456 0l-.258-1.036a2.625 2.625 0 0 0-1.91-1.91l-1.036-.258a.75.75 0 0 1 0-1.456l1.036-.258a2.625 2.625 0 0 0 1.91-1.91l.258-1.036A.75.75 0 0 1 18 1.5ZM16.5 15a.75.75 0 0 1 .712.513l.394 1.183c.15.447.5.799.948.948l1.183.395a.75.75 0 0 1 0 1.422l-1.183.395c-.447.15-.799.5-.948.948l-.395 1.183a.75.75 0 0 1-1.422 0l-.395-1.183a1.5 1.5 0 0 0-.948-.948l-1.183-.395a.75.75 0 0 1 0-1.422l1.183-.395c.447-.15.799-.5.948-.948l.395-1.183A.75.75 0 0 1 16.5 15Z"),c(t,"clip-rule","evenodd"),c(e,"xmlns","http://www.w3.org/2000/svg"),c(e,"viewBox","0 0 24 24"),c(e,"fill","currentColor"),c(e,"class",l[0])},m(n,s){S(n,e,s),w(e,t)},p(n,[s]){s&1&&c(e,"class",n[0])},i:re,o:re,d(n){n&&d(e)}}}function Fl(l,e,t){let{className:n="w-4 h-4"}=e,{strokeWidth:s="1.5"}=e;return l.$$set=r=>{"className"in r&&t(0,n=r.className),"strokeWidth"in r&&t(1,s=r.strokeWidth)},[n,s]}class Yl extends We{constructor(e){super(),Ue(this,e,Fl,Ll,Ae,{className:0,strokeWidth:1})}}function ql(l){let e,t;return{c(){e=Oe("svg"),t=Oe("path"),this.h()},l(n){e=Be(n,"svg",{xmlns:!0,fill:!0,viewBox:!0,"stroke-width":!0,stroke:!0,class:!0});var s=k(e);t=Be(s,"path",{"stroke-linecap":!0,"stroke-linejoin":!0,d:!0}),k(t).forEach(d),s.forEach(d),this.h()},h(){c(t,"stroke-linecap","round"),c(t,"stroke-linejoin","round"),c(t,"d","M9 15 3 9m0 0 6-6M3 9h12a6 6 0 0 1 0 12h-3"),c(e,"xmlns","http://www.w3.org/2000/svg"),c(e,"fill","none"),c(e,"viewBox","0 0 24 24"),c(e,"stroke-width",l[1]),c(e,"stroke","currentColor"),c(e,"class",l[0])},m(n,s){S(n,e,s),w(e,t)},p(n,[s]){s&2&&c(e,"stroke-width",n[1]),s&1&&c(e,"class",n[0])},i:re,o:re,d(n){n&&d(e)}}}function Jl(l,e,t){let{className:n="size-4"}=e,{strokeWidth:s="1.5"}=e;return l.$$set=r=>{"className"in r&&t(0,n=r.className),"strokeWidth"in r&&t(1,s=r.strokeWidth)},[n,s]}class Gl extends We{constructor(e){super(),Ue(this,e,Jl,ql,Ae,{className:0,strokeWidth:1})}}function Zl(l){let e,t;return{c(){e=Oe("svg"),t=Oe("path"),this.h()},l(n){e=Be(n,"svg",{xmlns:!0,fill:!0,viewBox:!0,"stroke-width":!0,stroke:!0,class:!0});var s=k(e);t=Be(s,"path",{"stroke-linecap":!0,"stroke-linejoin":!0,d:!0}),k(t).forEach(d),s.forEach(d),this.h()},h(){c(t,"stroke-linecap","round"),c(t,"stroke-linejoin","round"),c(t,"d","m15 15 6-6m0 0-6-6m6 6H9a6 6 0 0 0 0 12h3"),c(e,"xmlns","http://www.w3.org/2000/svg"),c(e,"fill","none"),c(e,"viewBox","0 0 24 24"),c(e,"stroke-width",l[1]),c(e,"stroke","currentColor"),c(e,"class",l[0])},m(n,s){S(n,e,s),w(e,t)},p(n,[s]){s&2&&c(e,"stroke-width",n[1]),s&1&&c(e,"class",n[0])},i:re,o:re,d(n){n&&d(e)}}}function Xl(l,e,t){let{className:n="size-4"}=e,{strokeWidth:s="1.5"}=e;return l.$$set=r=>{"className"in r&&t(0,n=r.className),"strokeWidth"in r&&t(1,s=r.strokeWidth)},[n,s]}class Ql extends We{constructor(e){super(),Ue(this,e,Xl,Zl,Ae,{className:0,strokeWidth:1})}}const Kl=l=>({}),rn=l=>({});function xl(l){let e;const t=l[7].default,n=vt(t,l,l[12],null);return{c(){n&&n.c()},l(s){n&&n.l(s)},m(s,r){n&&n.m(s,r),e=!0},p(s,r){n&&n.p&&(!e||r&4096)&&bt(n,t,s,s[12],e?kt(t,s[12],r,null):wt(s[12]),null)},i(s){e||(N(n,s),e=!0)},o(s){T(n,s),e=!1},d(s){n&&n.d(s)}}}function eo(l){let e,t,n,s,r,o=l[5].t("Enhance")+"",i,a,f,h,p,C,D,$=l[5].t("Chat")+"",_,u,b,m;return n=new kn({props:{className:"size-4",strokeWidth:"2"}}),p=new In({props:{className:"size-4",strokeWidth:"2"}}),{c(){e=E("button"),t=E("div"),A(n.$$.fragment),s=G(),r=E("div"),i=de(o),a=G(),f=E("button"),h=E("div"),A(p.$$.fragment),C=G(),D=E("div"),_=de($),this.h()},l(v){e=I(v,"BUTTON",{class:!0});var H=k(e);t=I(H,"DIV",{class:!0});var y=k(t);W(n.$$.fragment,y),y.forEach(d),s=Z(H),r=I(H,"DIV",{class:!0});var z=k(r);i=me(z,o),z.forEach(d),H.forEach(d),a=Z(v),f=I(v,"BUTTON",{class:!0});var q=k(f);h=I(q,"DIV",{class:!0});var L=k(h);W(p.$$.fragment,L),L.forEach(d),C=Z(q),D=I(q,"DIV",{class:!0});var B=k(D);_=me(B,$),B.forEach(d),q.forEach(d),this.h()},h(){c(t,"class","self-center mr-2"),c(r,"class","self-center truncate"),c(e,"class","flex rounded-md py-1.5 px-3 w-full hover:bg-gray-50 dark:hover:bg-gray-800 transition"),c(h,"class","self-center mr-2"),c(D,"class","self-center truncate"),c(f,"class","flex rounded-md py-1.5 px-3 w-full hover:bg-gray-50 dark:hover:bg-gray-800 transition")},m(v,H){S(v,e,H),w(e,t),U(n,t,null),w(e,s),w(e,r),w(r,i),S(v,a,H),S(v,f,H),w(f,h),U(p,h,null),w(f,C),w(f,D),w(D,_),u=!0,b||(m=[ce(e,"click",l[8]),ce(f,"click",l[9])],b=!0)},p(v,H){(!u||H&32)&&o!==(o=v[5].t("Enhance")+"")&&ke(i,o),(!u||H&32)&&$!==($=v[5].t("Chat")+"")&&ke(_,$)},i(v){u||(N(n.$$.fragment,v),N(p.$$.fragment,v),u=!0)},o(v){T(n.$$.fragment,v),T(p.$$.fragment,v),u=!1},d(v){v&&(d(e),d(a),d(f)),j(n),j(p),b=!1,Et(m)}}}function to(l){let e,t;return e=new Cn({props:{class:"w-full "+l[1]+" text-sm rounded-xl px-1 py-1.5 z-50 bg-white dark:bg-gray-850 dark:text-white shadow-lg font-primary",sideOffset:8,side:"bottom",align:"end",transition:l[10],$$slots:{default:[eo]},$$scope:{ctx:l}}}),{c(){A(e.$$.fragment)},l(n){W(e.$$.fragment,n)},m(n,s){U(e,n,s),t=!0},p(n,s){const r={};s&2&&(r.class="w-full "+n[1]+" text-sm rounded-xl px-1 py-1.5 z-50 bg-white dark:bg-gray-850 dark:text-white shadow-lg font-primary"),s&4141&&(r.$$scope={dirty:s,ctx:n}),e.$set(r)},i(n){t||(N(e.$$.fragment,n),t=!0)},o(n){T(e.$$.fragment,n),t=!1},d(n){j(e,n)}}}function no(l){let e,t,n;e=new Nn({props:{$$slots:{default:[xl]},$$scope:{ctx:l}}});const s=l[7].content,r=vt(s,l,l[12],rn),o=r||to(l);return{c(){A(e.$$.fragment),t=G(),o&&o.c()},l(i){W(e.$$.fragment,i),t=Z(i),o&&o.l(i)},m(i,a){U(e,i,a),S(i,t,a),o&&o.m(i,a),n=!0},p(i,a){const f={};a&4096&&(f.$$scope={dirty:a,ctx:i}),e.$set(f),r?r.p&&(!n||a&4096)&&bt(r,s,i,i[12],n?kt(s,i[12],a,Kl):wt(i[12]),rn):o&&o.p&&(!n||a&47)&&o.p(i,n?a:-1)},i(i){n||(N(e.$$.fragment,i),N(o,i),n=!0)},o(i){T(e.$$.fragment,i),T(o,i),n=!1},d(i){i&&d(t),j(e,i),o&&o.d(i)}}}function so(l){let e,t,n;function s(o){l[11](o)}let r={onOpenChange:l[4],$$slots:{default:[no]},$$scope:{ctx:l}};return l[0]!==void 0&&(r.open=l[0]),e=new $n({props:r}),ge.push(()=>we(e,"open",s)),{c(){A(e.$$.fragment)},l(o){W(e.$$.fragment,o)},m(o,i){U(e,o,i),n=!0},p(o,[i]){const a={};i&16&&(a.onOpenChange=o[4]),i&4143&&(a.$$scope={dirty:i,ctx:o}),!t&&i&1&&(t=!0,a.open=o[0],be(()=>t=!1)),e.$set(a)},i(o){n||(N(e.$$.fragment,o),n=!0)},o(o){T(e.$$.fragment,o),n=!1},d(o){j(e,o)}}}function lo(l,e,t){let n,{$$slots:s={},$$scope:r}=e;const o=_t("i18n");He(l,o,u=>t(5,n=u));let{show:i=!1}=e,{className:a="max-w-[170px]"}=e,{onEdit:f=()=>{}}=e,{onChat:h=()=>{}}=e,{onChange:p=()=>{}}=e;const C=async()=>{f(),t(0,i=!1)},D=()=>{h(),t(0,i=!1)},$=u=>Dn(u,{duration:100});function _(u){i=u,t(0,i)}return l.$$set=u=>{"show"in u&&t(0,i=u.show),"className"in u&&t(1,a=u.className),"onEdit"in u&&t(2,f=u.onEdit),"onChat"in u&&t(3,h=u.onChat),"onChange"in u&&t(4,p=u.onChange),"$$scope"in u&&t(12,r=u.$$scope)},[i,a,f,h,p,n,o,s,C,D,$,_,r]}class oo extends We{constructor(e){super(),Ue(this,e,lo,so,Ae,{show:0,className:1,onEdit:2,onChat:3,onChange:4})}}function ro(l){let e,t;return{c(){e=Oe("svg"),t=Oe("path"),this.h()},l(n){e=Be(n,"svg",{xmlns:!0,fill:!0,viewBox:!0,"stroke-width":!0,stroke:!0,class:!0});var s=k(e);t=Be(s,"path",{"stroke-linecap":!0,"stroke-linejoin":!0,d:!0}),k(t).forEach(d),s.forEach(d),this.h()},h(){c(t,"stroke-linecap","round"),c(t,"stroke-linejoin","round"),c(t,"d","M10.5 6h9.75M10.5 6a1.5 1.5 0 1 1-3 0m3 0a1.5 1.5 0 1 0-3 0M3.75 6H7.5m3 12h9.75m-9.75 0a1.5 1.5 0 0 1-3 0m3 0a1.5 1.5 0 0 0-3 0m-3.75 0H7.5m9-6h3.75m-3.75 0a1.5 1.5 0 0 1-3 0m3 0a1.5 1.5 0 0 0-3 0m-9.75 0h9.75"),c(e,"xmlns","http://www.w3.org/2000/svg"),c(e,"fill","none"),c(e,"viewBox","0 0 24 24"),c(e,"stroke-width",l[1]),c(e,"stroke","currentColor"),c(e,"class",l[0])},m(n,s){S(n,e,s),w(e,t)},p(n,[s]){s&2&&c(e,"stroke-width",n[1]),s&1&&c(e,"class",n[0])},i:re,o:re,d(n){n&&d(e)}}}function ao(l,e,t){let{className:n="w-4 h-4"}=e,{strokeWidth:s="1.5"}=e;return l.$$set=r=>{"className"in r&&t(0,n=r.className),"strokeWidth"in r&&t(1,s=r.strokeWidth)},[n,s]}class io extends We{constructor(e){super(),Ue(this,e,ao,ro,Ae,{className:0,strokeWidth:1})}}const{document:zt}=ns;function an(l){let e,t,n,s;function r(a){l[42](a)}function o(a){l[43](a)}let i={accessRoles:["read","write"],onChange:l[41]};return l[15]!==void 0&&(i.show=l[15]),l[2].access_control!==void 0&&(i.accessControl=l[2].access_control),e=new Vs({props:i}),ge.push(()=>we(e,"show",r)),ge.push(()=>we(e,"accessControl",o)),{c(){A(e.$$.fragment)},l(a){W(e.$$.fragment,a)},m(a,f){U(e,a,f),s=!0},p(a,f){const h={};!t&&f[0]&32768&&(t=!0,h.show=a[15],be(()=>t=!1)),!n&&f[0]&4&&(n=!0,h.accessControl=a[2].access_control,be(()=>n=!1)),e.$set(h)},i(a){s||(N(e.$$.fragment,a),s=!0)},o(a){T(e.$$.fragment,a),s=!1},d(a){j(e,a)}}}function fo(l){let e,t=l[0].t("This will delete")+"",n,s,r,o=l[2].title+"",i,a;return{c(){e=E("div"),n=de(t),s=G(),r=E("span"),i=de(o),a=de("."),this.h()},l(f){e=I(f,"DIV",{class:!0});var h=k(e);n=me(h,t),s=Z(h),r=I(h,"SPAN",{class:!0});var p=k(r);i=me(p,o),p.forEach(d),a=me(h,"."),h.forEach(d),this.h()},h(){c(r,"class","font-semibold"),c(e,"class","text-sm text-gray-500")},m(f,h){S(f,e,h),w(e,n),w(e,s),w(e,r),w(r,i),w(e,a)},p(f,h){h[0]&1&&t!==(t=f[0].t("This will delete")+"")&&ke(n,t),h[0]&4&&o!==(o=f[2].title+"")&&ke(i,o)},d(f){f&&d(e)}}}function co(l){var Nt,Ct,Dt;let e,t,n,s,r,o,i,a,f,h,p,C,D,$,_,u,b,m,v,H,y,z,q,L,B,P,X,J,Q,oe,se,De,ee,ue,$e,R,x=((Nt=l[2])!=null&&Nt.access_control?l[0].t("Private"):l[0].t("Everyone"))+"",V,le,te,Pe,ve,Je,Ne,Ge,Ze,Le,Te,xe,Me;i=new js({});let ae=l[16]&&!l[17]&&fn(l),ie=l[1]&&cn(l);b=new nt({props:{placement:"top",content:l[0].t("Chat"),className:"cursor-pointer",$$slots:{default:[ho]},$$scope:{ctx:l}}}),v=new nt({props:{placement:"top",content:l[0].t("Controls"),className:"cursor-pointer",$$slots:{default:[go]},$$scope:{ctx:l}}}),y=new Hs({props:{onDownload:l[55],onCopyLink:l[56],onCopyToClipboard:l[57],onDelete:l[58],$$slots:{default:[_o]},$$scope:{ctx:l}}}),X=new Nl({props:{className:"size-3.5",strokeWidth:"2"}});function ct(M,Y){return Y[0]&4&&(Q=null),Y[0]&4&&(oe=null),Y[0]&4&&(se=null),Q==null&&(Q=!!Ve(M[2].created_at/1e6).isSame(Ve(),"day")),Q?wo:(oe==null&&(oe=!!Ve(M[2].created_at/1e6).isSame(Ve().subtract(1,"day"),"day")),oe?bo:(se==null&&(se=!!Ve(M[2].created_at/1e6).isSame(Ve().subtract(1,"week"),"week")),se?vo:po))}let Ke=ct(l,[-1,-1,-1,-1]),Re=Ke(l);ue=new Tl({props:{className:"size-3.5",strokeWidth:"2"}});let Ee=l[1]&&un(l),ye=l[20]&&dn(l);function Mt(M){l[64](M)}function St(M){l[65](M)}let It={id:`note-${l[2].id}`,className:"input-prose-sm px-0.5",json:!0,html:(Dt=(Ct=l[2].data)==null?void 0:Ct.content)==null?void 0:Dt.html,documentId:`note:${l[2].id}`,collaboration:!0,socket:l[24],user:l[27],link:!0,image:!0,files:l[3],placeholder:l[0].t("Write something..."),editable:l[7]===null&&!l[20],onSelectionUpdate:l[60],onChange:l[61],fileHandler:!0,onFileDrop:l[62],onFilePaste:Wo};return l[1]!==void 0&&(It.editor=l[1]),l[2].data.content.json!==void 0&&(It.value=l[2].data.content.json),Ne=new Es({props:It}),l[63](Ne),ge.push(()=>we(Ne,"editor",Mt)),ge.push(()=>we(Ne,"value",St)),Ne.$on("paste",l[66]),{c(){e=E("div"),t=E("div"),n=E("div"),s=E("div"),r=E("button"),o=E("div"),A(i.$$.fragment),f=G(),h=E("input"),D=G(),ae&&ae.c(),$=G(),_=E("div"),ie&&ie.c(),u=G(),A(b.$$.fragment),m=G(),A(v.$$.fragment),H=G(),A(y.$$.fragment),z=G(),q=E("div"),L=E("div"),B=E("div"),P=E("button"),A(X.$$.fragment),J=G(),Re.c(),De=G(),ee=E("button"),A(ue.$$.fragment),$e=G(),R=E("span"),V=de(x),te=G(),Ee&&Ee.c(),Pe=G(),ve=E("div"),ye&&ye.c(),Je=G(),A(Ne.$$.fragment),this.h()},l(M){e=I(M,"DIV",{class:!0});var Y=k(e);t=I(Y,"DIV",{class:!0});var et=k(t);n=I(et,"DIV",{class:!0});var je=k(n);s=I(je,"DIV",{class:!0});var Xe=k(s);r=I(Xe,"BUTTON",{id:!0,class:!0,"aria-label":!0});var Ce=k(r);o=I(Ce,"DIV",{class:!0});var ut=k(o);W(i.$$.fragment,ut),ut.forEach(d),Ce.forEach(d),Xe.forEach(d),f=Z(je),h=I(je,"INPUT",{class:!0,type:!0,placeholder:!0}),D=Z(je),ae&&ae.l(je),$=Z(je),_=I(je,"DIV",{class:!0});var Qe=k(_);ie&&ie.l(Qe),u=Z(Qe),W(b.$$.fragment,Qe),m=Z(Qe),W(v.$$.fragment,Qe),H=Z(Qe),W(y.$$.fragment,Qe),Qe.forEach(d),je.forEach(d),et.forEach(d),z=Z(Y),q=I(Y,"DIV",{class:!0});var dt=k(q);L=I(dt,"DIV",{class:!0});var mt=k(L);B=I(mt,"DIV",{class:!0});var tt=k(B);P=I(tt,"BUTTON",{class:!0});var ot=k(P);W(X.$$.fragment,ot),J=Z(ot),Re.l(ot),ot.forEach(d),De=Z(tt),ee=I(tt,"BUTTON",{class:!0});var rt=k(ee);W(ue.$$.fragment,rt),$e=Z(rt),R=I(rt,"SPAN",{});var ht=k(R);V=me(ht,x),ht.forEach(d),rt.forEach(d),te=Z(tt),Ee&&Ee.l(tt),tt.forEach(d),mt.forEach(d),dt.forEach(d),Pe=Z(Y),ve=I(Y,"DIV",{class:!0,id:!0});var at=k(ve);ye&&ye.l(at),Je=Z(at),W(Ne.$$.fragment,at),at.forEach(d),Y.forEach(d),this.h()},h(){var M,Y,et,je,Xe,Ce;c(o,"class","m-auto self-center"),c(r,"id","sidebar-toggle-button"),c(r,"class","cursor-pointer p-1.5 flex rounded-xl hover:bg-gray-100 dark:hover:bg-gray-850 transition"),c(r,"aria-label","Toggle Sidebar"),c(s,"class",a=(l[26]?"md:hidden pl-0.5":"")+" flex flex-none items-center pr-1 -translate-x-1"),c(h,"class","w-full text-2xl font-medium bg-transparent outline-hidden"),c(h,"type","text"),c(h,"placeholder",p=l[17]?l[0].t("Generating..."):l[0].t("Title")),h.disabled=C=((M=l[2])==null?void 0:M.user_id)!==((Y=l[27])==null?void 0:Y.id)&&((et=l[27])==null?void 0:et.role)!=="admin"||l[17],h.required=!0,c(_,"class","flex items-center gap-0.5 translate-x-1"),c(n,"class","w-full flex items-center"),c(t,"class","shrink-0 w-full flex justify-between items-center px-3.5 mb-1.5"),c(P,"class","flex items-center gap-1 w-fit py-1 px-1.5 rounded-lg min-w-fit"),c(ee,"class","flex items-center gap-1 w-fit py-1 px-1.5 rounded-lg min-w-fit"),ee.disabled=le=((je=l[2])==null?void 0:je.user_id)!==((Xe=l[27])==null?void 0:Xe.id)&&((Ce=l[27])==null?void 0:Ce.role)!=="admin",c(B,"class","flex gap-1 items-center text-xs font-medium text-gray-500 dark:text-gray-500 w-fit"),c(L,"class","flex w-full bg-transparent overflow-x-auto scrollbar-none"),c(q,"class","px-2.5"),c(ve,"class","flex-1 w-full h-full overflow-auto px-3.5 pb-20 relative pt-2.5"),c(ve,"id","note-content-container"),c(e,"class",Le="w-full flex flex-col "+(l[19]?"opacity-20":""))},m(M,Y){S(M,e,Y),w(e,t),w(t,n),w(n,s),w(s,r),w(r,o),U(i,o,null),w(n,f),w(n,h),gt(h,l[2].title),w(n,D),ae&&ae.m(n,null),w(n,$),w(n,_),ie&&ie.m(_,null),w(_,u),U(b,_,null),w(_,m),U(v,_,null),w(_,H),U(y,_,null),w(e,z),w(e,q),w(q,L),w(L,B),w(B,P),U(X,P,null),w(P,J),Re.m(P,null),w(B,De),w(B,ee),U(ue,ee,null),w(ee,$e),w(ee,R),w(R,V),w(B,te),Ee&&Ee.m(B,null),w(e,Pe),w(e,ve),ye&&ye.m(ve,null),w(ve,Je),U(Ne,ve,null),Te=!0,xe||(Me=[ce(r,"click",l[46]),ce(h,"input",l[47]),ce(h,"input",l[29]),ce(h,"focus",l[48]),ce(h,"blur",l[49]),ce(ee,"click",l[59]),ce(L,"wheel",Ao)],xe=!0)},p(M,Y){var ut,Qe,dt,mt,tt,ot,rt,ht,at;(!Te||Y[0]&67108864&&a!==(a=(M[26]?"md:hidden pl-0.5":"")+" flex flex-none items-center pr-1 -translate-x-1"))&&c(s,"class",a),(!Te||Y[0]&131073&&p!==(p=M[17]?M[0].t("Generating..."):M[0].t("Title")))&&c(h,"placeholder",p),(!Te||Y[0]&134348804&&C!==(C=((ut=M[2])==null?void 0:ut.user_id)!==((Qe=M[27])==null?void 0:Qe.id)&&((dt=M[27])==null?void 0:dt.role)!=="admin"||M[17]))&&(h.disabled=C),Y[0]&4&&h.value!==M[2].title&&gt(h,M[2].title),M[16]&&!M[17]?ae?(ae.p(M,Y),Y[0]&196608&&N(ae,1)):(ae=fn(M),ae.c(),N(ae,1),ae.m(n,$)):ae&&(Ye(),T(ae,1,1,()=>{ae=null}),qe()),M[1]?ie?(ie.p(M,Y),Y[0]&2&&N(ie,1)):(ie=cn(M),ie.c(),N(ie,1),ie.m(_,u)):ie&&(Ye(),T(ie,1,1,()=>{ie=null}),qe());const et={};Y[0]&1&&(et.content=M[0].t("Chat")),Y[0]&6144|Y[3]&16384&&(et.$$scope={dirty:Y,ctx:M}),b.$set(et);const je={};Y[0]&1&&(je.content=M[0].t("Controls")),Y[0]&6144|Y[3]&16384&&(je.$$scope={dirty:Y,ctx:M}),v.$set(je);const Xe={};Y[0]&5&&(Xe.onCopyLink=M[56]),Y[0]&5&&(Xe.onCopyToClipboard=M[57]),Y[0]&16384&&(Xe.onDelete=M[58]),Y[3]&16384&&(Xe.$$scope={dirty:Y,ctx:M}),y.$set(Xe),Ke===(Ke=ct(M,Y))&&Re?Re.p(M,Y):(Re.d(1),Re=Ke(M),Re&&(Re.c(),Re.m(P,null))),(!Te||Y[0]&5)&&x!==(x=((mt=M[2])!=null&&mt.access_control?M[0].t("Private"):M[0].t("Everyone"))+"")&&ke(V,x),(!Te||Y[0]&134217732&&le!==(le=((tt=M[2])==null?void 0:tt.user_id)!==((ot=M[27])==null?void 0:ot.id)&&((rt=M[27])==null?void 0:rt.role)!=="admin"))&&(ee.disabled=le),M[1]?Ee?Ee.p(M,Y):(Ee=un(M),Ee.c(),Ee.m(B,null)):Ee&&(Ee.d(1),Ee=null),M[20]?ye?ye.p(M,Y):(ye=dn(M),ye.c(),ye.m(ve,Je)):ye&&(ye.d(1),ye=null);const Ce={};Y[0]&4&&(Ce.id=`note-${M[2].id}`),Y[0]&4&&(Ce.html=(at=(ht=M[2].data)==null?void 0:ht.content)==null?void 0:at.html),Y[0]&4&&(Ce.documentId=`note:${M[2].id}`),Y[0]&16777216&&(Ce.socket=M[24]),Y[0]&134217728&&(Ce.user=M[27]),Y[0]&8&&(Ce.files=M[3]),Y[0]&1&&(Ce.placeholder=M[0].t("Write something...")),Y[0]&1048704&&(Ce.editable=M[7]===null&&!M[20]),Y[0]&8192&&(Ce.onSelectionUpdate=M[60]),Y[0]&102&&(Ce.onChange=M[61]),!Ge&&Y[0]&2&&(Ge=!0,Ce.editor=M[1],be(()=>Ge=!1)),!Ze&&Y[0]&4&&(Ze=!0,Ce.value=M[2].data.content.json,be(()=>Ze=!1)),Ne.$set(Ce),(!Te||Y[0]&524288&&Le!==(Le="w-full flex flex-col "+(M[19]?"opacity-20":"")))&&c(e,"class",Le)},i(M){Te||(N(i.$$.fragment,M),N(ae),N(ie),N(b.$$.fragment,M),N(v.$$.fragment,M),N(y.$$.fragment,M),N(X.$$.fragment,M),N(ue.$$.fragment,M),N(Ne.$$.fragment,M),Te=!0)},o(M){T(i.$$.fragment,M),T(ae),T(ie),T(b.$$.fragment,M),T(v.$$.fragment,M),T(y.$$.fragment,M),T(X.$$.fragment,M),T(ue.$$.fragment,M),T(Ne.$$.fragment,M),Te=!1},d(M){M&&d(e),j(i),ae&&ae.d(),ie&&ie.d(),j(b),j(v),j(y),j(X),Re.d(),j(ue),Ee&&Ee.d(),ye&&ye.d(),l[63](null),j(Ne),xe=!1,Et(Me)}}}function uo(l){let e,t,n,s;return n=new En({props:{className:"size-5"}}),{c(){e=E("div"),t=E("div"),A(n.$$.fragment),this.h()},l(r){e=I(r,"DIV",{class:!0});var o=k(e);t=I(o,"DIV",{class:!0});var i=k(t);W(n.$$.fragment,i),i.forEach(d),o.forEach(d),this.h()},h(){c(t,"class","m-auto"),c(e,"class","absolute top-0 bottom-0 left-0 right-0 flex")},m(r,o){S(r,e,o),w(e,t),U(n,t,null),s=!0},p:re,i(r){s||(N(n.$$.fragment,r),s=!0)},o(r){T(n.$$.fragment,r),s=!1},d(r){r&&d(e),j(n)}}}function fn(l){let e,t,n;return t=new nt({props:{content:l[0].t("Generate"),$$slots:{default:[mo]},$$scope:{ctx:l}}}),{c(){e=E("div"),A(t.$$.fragment),this.h()},l(s){e=I(s,"DIV",{class:!0});var r=k(e);W(t.$$.fragment,r),r.forEach(d),this.h()},h(){c(e,"class","flex self-center items-center space-x-1.5 z-10 translate-y-[0.5px] -translate-x-[0.5px] pl-2")},m(s,r){S(s,e,r),U(t,e,null),n=!0},p(s,r){const o={};r[0]&1&&(o.content=s[0].t("Generate")),r[0]&65536|r[3]&16384&&(o.$$scope={dirty:r,ctx:s}),t.$set(o)},i(s){n||(N(t.$$.fragment,s),n=!0)},o(s){T(t.$$.fragment,s),n=!1},d(s){s&&d(e),j(t)}}}function mo(l){let e,t,n,s,r;return t=new kn({props:{strokeWidth:"2"}}),{c(){e=E("button"),A(t.$$.fragment),this.h()},l(o){e=I(o,"BUTTON",{class:!0,id:!0});var i=k(e);W(t.$$.fragment,i),i.forEach(d),this.h()},h(){c(e,"class","self-center dark:hover:text-white transition"),c(e,"id","generate-title-button")},m(o,i){S(o,e,i),U(t,e,null),n=!0,s||(r=ce(e,"click",l[50]),s=!0)},p:re,i(o){n||(N(t.$$.fragment,o),n=!0)},o(o){T(t.$$.fragment,o),n=!1},d(o){o&&d(e),j(t),s=!1,r()}}}function cn(l){let e,t,n,s,r,o,i,a,f,h,p,C;return s=new Gl({props:{className:"size-4"}}),a=new Ql({props:{className:"size-4"}}),{c(){e=E("div"),t=E("div"),n=E("button"),A(s.$$.fragment),o=G(),i=E("button"),A(a.$$.fragment),this.h()},l(D){e=I(D,"DIV",{});var $=k(e);t=I($,"DIV",{class:!0,dir:!0});var _=k(t);n=I(_,"BUTTON",{class:!0});var u=k(n);W(s.$$.fragment,u),u.forEach(d),o=Z(_),i=I(_,"BUTTON",{class:!0});var b=k(i);W(a.$$.fragment,b),b.forEach(d),_.forEach(d),$.forEach(d),this.h()},h(){c(n,"class","self-center p-1 hover:enabled:bg-black/5 dark:hover:enabled:bg-white/5 dark:hover:enabled:text-white hover:enabled:text-black rounded-md transition disabled:cursor-not-allowed disabled:text-gray-500 disabled:hover:text-gray-500"),n.disabled=r=!l[1].can().undo(),c(i,"class","self-center p-1 hover:enabled:bg-black/5 dark:hover:enabled:bg-white/5 dark:hover:enabled:text-white hover:enabled:text-black rounded-md transition disabled:cursor-not-allowed disabled:text-gray-500 disabled:hover:text-gray-500"),i.disabled=f=!l[1].can().redo(),c(t,"class","flex items-center gap-0.5 self-center min-w-fit"),c(t,"dir","ltr")},m(D,$){S(D,e,$),w(e,t),w(t,n),U(s,n,null),w(t,o),w(t,i),U(a,i,null),h=!0,p||(C=[ce(n,"click",l[51]),ce(i,"click",l[52])],p=!0)},p(D,$){(!h||$[0]&2&&r!==(r=!D[1].can().undo()))&&(n.disabled=r),(!h||$[0]&2&&f!==(f=!D[1].can().redo()))&&(i.disabled=f)},i(D){h||(N(s.$$.fragment,D),N(a.$$.fragment,D),h=!0)},o(D){T(s.$$.fragment,D),T(a.$$.fragment,D),h=!1},d(D){D&&d(e),j(s),j(a),p=!1,Et(C)}}}function ho(l){let e,t,n,s,r;return t=new In({}),{c(){e=E("button"),A(t.$$.fragment),this.h()},l(o){e=I(o,"BUTTON",{class:!0});var i=k(e);W(t.$$.fragment,i),i.forEach(d),this.h()},h(){c(e,"class","p-1.5 bg-transparent hover:bg-white/5 transition rounded-lg")},m(o,i){S(o,e,i),U(t,e,null),n=!0,s||(r=ce(e,"click",l[53]),s=!0)},p:re,i(o){n||(N(t.$$.fragment,o),n=!0)},o(o){T(t.$$.fragment,o),n=!1},d(o){o&&d(e),j(t),s=!1,r()}}}function go(l){let e,t,n,s,r;return t=new io({}),{c(){e=E("button"),A(t.$$.fragment),this.h()},l(o){e=I(o,"BUTTON",{class:!0});var i=k(e);W(t.$$.fragment,i),i.forEach(d),this.h()},h(){c(e,"class","p-1.5 bg-transparent hover:bg-white/5 transition rounded-lg")},m(o,i){S(o,e,i),U(t,e,null),n=!0,s||(r=ce(e,"click",l[54]),s=!0)},p:re,i(o){n||(N(t.$$.fragment,o),n=!0)},o(o){T(t.$$.fragment,o),n=!1},d(o){o&&d(e),j(t),s=!1,r()}}}function _o(l){let e,t,n;return t=new Ls({props:{className:"size-5"}}),{c(){e=E("div"),A(t.$$.fragment),this.h()},l(s){e=I(s,"DIV",{class:!0});var r=k(e);W(t.$$.fragment,r),r.forEach(d),this.h()},h(){c(e,"class","p-1 bg-transparent hover:bg-white/5 transition rounded-lg")},m(s,r){S(s,e,r),U(t,e,null),n=!0},p:re,i(s){n||(N(t.$$.fragment,s),n=!0)},o(s){T(t.$$.fragment,s),n=!1},d(s){s&&d(e),j(t)}}}function po(l){let e,t=Ve(l[2].created_at/1e6).format(l[0].t("DD/MM/YYYY"))+"",n;return{c(){e=E("span"),n=de(t)},l(s){e=I(s,"SPAN",{});var r=k(e);n=me(r,t),r.forEach(d)},m(s,r){S(s,e,r),w(e,n)},p(s,r){r[0]&5&&t!==(t=Ve(s[2].created_at/1e6).format(s[0].t("DD/MM/YYYY"))+"")&&ke(n,t)},d(s){s&&d(e)}}}function vo(l){let e,t=Ve(l[2].created_at/1e6).format(l[0].t("[Last] dddd [at] h:mm A"))+"",n;return{c(){e=E("span"),n=de(t)},l(s){e=I(s,"SPAN",{});var r=k(e);n=me(r,t),r.forEach(d)},m(s,r){S(s,e,r),w(e,n)},p(s,r){r[0]&5&&t!==(t=Ve(s[2].created_at/1e6).format(s[0].t("[Last] dddd [at] h:mm A"))+"")&&ke(n,t)},d(s){s&&d(e)}}}function bo(l){let e,t=Ve(l[2].created_at/1e6).format(l[0].t("[Yesterday at] h:mm A"))+"",n;return{c(){e=E("span"),n=de(t)},l(s){e=I(s,"SPAN",{});var r=k(e);n=me(r,t),r.forEach(d)},m(s,r){S(s,e,r),w(e,n)},p(s,r){r[0]&5&&t!==(t=Ve(s[2].created_at/1e6).format(s[0].t("[Yesterday at] h:mm A"))+"")&&ke(n,t)},d(s){s&&d(e)}}}function wo(l){let e,t=Ve(l[2].created_at/1e6).format(l[0].t("[Today at] h:mm A"))+"",n;return{c(){e=E("span"),n=de(t)},l(s){e=I(s,"SPAN",{});var r=k(e);n=me(r,t),r.forEach(d)},m(s,r){S(s,e,r),w(e,n)},p(s,r){r[0]&5&&t!==(t=Ve(s[2].created_at/1e6).format(s[0].t("[Today at] h:mm A"))+"")&&ke(n,t)},d(s){s&&d(e)}}}function un(l){let e,t,n=l[0].t("{{COUNT}} words",{COUNT:l[5]})+"",s,r,o,i=l[0].t("{{COUNT}} characters",{COUNT:l[6]})+"",a;return{c(){e=E("div"),t=E("div"),s=de(n),r=G(),o=E("div"),a=de(i),this.h()},l(f){e=I(f,"DIV",{class:!0});var h=k(e);t=I(h,"DIV",{});var p=k(t);s=me(p,n),p.forEach(d),r=Z(h),o=I(h,"DIV",{});var C=k(o);a=me(C,i),C.forEach(d),h.forEach(d),this.h()},h(){c(e,"class","flex items-center gap-1 px-1 min-w-fit")},m(f,h){S(f,e,h),w(e,t),w(t,s),w(e,r),w(e,o),w(o,a)},p(f,h){h[0]&33&&n!==(n=f[0].t("{{COUNT}} words",{COUNT:f[5]})+"")&&ke(s,n),h[0]&65&&i!==(i=f[0].t("{{COUNT}} characters",{COUNT:f[6]})+"")&&ke(a,i)},d(f){f&&d(e)}}}function dn(l){let e,t;return{c(){e=E("div"),this.h()},l(n){e=I(n,"DIV",{class:!0}),k(e).forEach(d),this.h()},h(){c(e,"class",t="w-full h-full fixed top-0 left-0 "+(l[21]?"":" backdrop-blur-xs  bg-white/10 dark:bg-gray-900/10")+" flex items-center justify-center z-10 cursor-not-allowed")},m(n,s){S(n,e,s)},p(n,s){s[0]&2097152&&t!==(t="w-full h-full fixed top-0 left-0 "+(n[21]?"":" backdrop-blur-xs  bg-white/10 dark:bg-gray-900/10")+" flex items-center justify-center z-10 cursor-not-allowed")&&c(e,"class",t)},d(n){n&&d(e)}}}function ko(l){let e,t,n,s,r;return e=new Hl({props:{onRecord:l[70],onCaptureAudio:l[71],onUpload:l[72],$$slots:{default:[$o]},$$scope:{ctx:l}}}),s=new nt({props:{content:l[0].t("AI"),placement:"top",$$slots:{default:[To]},$$scope:{ctx:l}}}),{c(){A(e.$$.fragment),t=G(),n=E("div"),A(s.$$.fragment),this.h()},l(o){W(e.$$.fragment,o),t=Z(o),n=I(o,"DIV",{class:!0});var i=k(n);W(s.$$.fragment,i),i.forEach(d),this.h()},h(){c(n,"class","cursor-pointer flex gap-0.5 rounded-full border border-gray-50 dark:border-gray-850 dark:bg-gray-850 transition shadow-xl")},m(o,i){U(e,o,i),S(o,t,i),S(o,n,i),U(s,n,null),r=!0},p(o,i){const a={};i[0]&1537&&(a.onRecord=o[70]),i[0]&1536&&(a.onCaptureAudio=o[71]),i[0]&1|i[3]&16384&&(a.$$scope={dirty:i,ctx:o}),e.$set(a);const f={};i[0]&1&&(f.content=o[0].t("AI")),i[0]&1054720|i[3]&16384&&(f.$$scope={dirty:i,ctx:o}),s.$set(f)},i(o){r||(N(e.$$.fragment,o),N(s.$$.fragment,o),r=!0)},o(o){T(e.$$.fragment,o),T(s.$$.fragment,o),r=!1},d(o){o&&(d(t),d(n)),j(e,o),j(s)}}}function Eo(l){let e,t,n,s;function r(i){l[69](i)}let o={className:"p-1 w-full max-w-full",transcribe:!1,displayMedia:l[10],echoCancellation:!1,noiseSuppression:!1,onCancel:l[67],onConfirm:l[68]};return l[9]!==void 0&&(o.recording=l[9]),t=new Is({props:o}),ge.push(()=>we(t,"recording",r)),{c(){e=E("div"),A(t.$$.fragment),this.h()},l(i){e=I(i,"DIV",{class:!0});var a=k(e);W(t.$$.fragment,a),a.forEach(d),this.h()},h(){c(e,"class","flex-1 w-full")},m(i,a){S(i,e,a),U(t,e,null),s=!0},p(i,a){const f={};a[0]&1024&&(f.displayMedia=i[10]),a[0]&1536&&(f.onCancel=i[67]),a[0]&1536&&(f.onConfirm=i[68]),!n&&a[0]&512&&(n=!0,f.recording=i[9],be(()=>n=!1)),t.$set(f)},i(i){s||(N(t.$$.fragment,i),s=!0)},o(i){T(t.$$.fragment,i),s=!1},d(i){i&&d(e),j(t)}}}function Io(l){let e,t,n;return t=new Ws({props:{className:"size-4.5"}}),{c(){e=E("div"),A(t.$$.fragment),this.h()},l(s){e=I(s,"DIV",{class:!0});var r=k(e);W(t.$$.fragment,r),r.forEach(d),this.h()},h(){c(e,"class","cursor-pointer p-2.5 flex rounded-full border border-gray-50 bg-white dark:border-none dark:bg-gray-850 hover:bg-gray-50 dark:hover:bg-gray-800 transition shadow-xl")},m(s,r){S(s,e,r),U(t,e,null),n=!0},p:re,i(s){n||(N(t.$$.fragment,s),n=!0)},o(s){T(t.$$.fragment,s),n=!1},d(s){s&&d(e),j(t)}}}function $o(l){let e,t;return e=new nt({props:{content:l[0].t("Record"),placement:"top",$$slots:{default:[Io]},$$scope:{ctx:l}}}),{c(){A(e.$$.fragment)},l(n){W(e.$$.fragment,n)},m(n,s){U(e,n,s),t=!0},p(n,s){const r={};s[0]&1&&(r.content=n[0].t("Record")),s[3]&16384&&(r.$$scope={dirty:s,ctx:n}),e.$set(r)},i(n){t||(N(e.$$.fragment,n),t=!0)},o(n){T(e.$$.fragment,n),t=!1},d(n){j(e,n)}}}function No(l){let e,t;return e=new oo({props:{onEdit:l[74],onChat:l[75],$$slots:{default:[Do]},$$scope:{ctx:l}}}),{c(){A(e.$$.fragment)},l(n){W(e.$$.fragment,n)},m(n,s){U(e,n,s),t=!0},p(n,s){const r={};s[0]&6144&&(r.onChat=n[75]),s[3]&16384&&(r.$$scope={dirty:s,ctx:n}),e.$set(r)},i(n){t||(N(e.$$.fragment,n),t=!0)},o(n){T(e.$$.fragment,n),t=!1},d(n){j(e,n)}}}function Co(l){let e,t,n,s,r;return t=new En({props:{className:"size-5"}}),{c(){e=E("button"),A(t.$$.fragment),this.h()},l(o){e=I(o,"BUTTON",{class:!0,type:!0});var i=k(e);W(t.$$.fragment,i),i.forEach(d),this.h()},h(){c(e,"class","p-2 flex justify-center items-center hover:bg-gray-50 dark:hover:bg-gray-800 rounded-full transition shrink-0"),c(e,"type","button")},m(o,i){S(o,e,i),U(t,e,null),n=!0,s||(r=ce(e,"click",l[73]),s=!0)},p:re,i(o){n||(N(t.$$.fragment,o),n=!0)},o(o){T(t.$$.fragment,o),n=!1},d(o){o&&d(e),j(t),s=!1,r()}}}function Do(l){let e,t,n;return t=new Yl({}),{c(){e=E("div"),A(t.$$.fragment),this.h()},l(s){e=I(s,"DIV",{class:!0});var r=k(e);W(t.$$.fragment,r),r.forEach(d),this.h()},h(){c(e,"class","cursor-pointer p-2.5 flex rounded-full border border-gray-50 bg-white dark:border-none dark:bg-gray-850 hover:bg-gray-50 dark:hover:bg-gray-800 transition shadow-xl")},m(s,r){S(s,e,r),U(t,e,null),n=!0},p:re,i(s){n||(N(t.$$.fragment,s),n=!0)},o(s){T(t.$$.fragment,s),n=!1},d(s){s&&d(e),j(t)}}}function To(l){let e,t,n,s;const r=[Co,No],o=[];function i(a,f){return a[20]?0:1}return e=i(l),t=o[e]=r[e](l),{c(){t.c(),n=lt()},l(a){t.l(a),n=lt()},m(a,f){o[e].m(a,f),S(a,n,f),s=!0},p(a,f){let h=e;e=i(a),e===h?o[e].p(a,f):(Ye(),T(o[h],1,1,()=>{o[h]=null}),qe(),t=o[e],t?t.p(a,f):(t=o[e]=r[e](a),t.c()),N(t,1),t.m(n.parentNode,n))},i(a){s||(N(t),s=!0)},o(a){T(t),s=!1},d(a){a&&d(n),o[e].d(a)}}}function Mo(l){let e,t,n,s,r,o,i,a,f;const h=[uo,co],p=[];function C(u,b){return u[19]?0:1}t=C(l),n=p[t]=h[t](l);const D=[Eo,ko],$=[];function _(u,b){return u[9]?0:1}return i=_(l),a=$[i]=D[i](l),{c(){e=E("div"),n.c(),s=G(),r=E("div"),o=E("div"),a.c(),this.h()},l(u){e=I(u,"DIV",{class:!0,id:!0});var b=k(e);n.l(b),b.forEach(d),s=Z(u),r=I(u,"DIV",{class:!0});var m=k(r);o=I(m,"DIV",{class:!0});var v=k(o);a.l(v),v.forEach(d),m.forEach(d),this.h()},h(){c(e,"class","relative flex-1 w-full h-full flex justify-center pt-[11px]"),c(e,"id","note-editor"),c(o,"class","flex gap-1 w-full min-w-full justify-between"),c(r,"class","absolute z-20 bottom-0 right-0 p-3.5 max-w-full w-full flex")},m(u,b){S(u,e,b),p[t].m(e,null),S(u,s,b),S(u,r,b),w(r,o),$[i].m(o,null),f=!0},p(u,b){let m=t;t=C(u),t===m?p[t].p(u,b):(Ye(),T(p[m],1,1,()=>{p[m]=null}),qe(),n=p[t],n?n.p(u,b):(n=p[t]=h[t](u),n.c()),N(n,1),n.m(e,null));let v=i;i=_(u),i===v?$[i].p(u,b):(Ye(),T($[v],1,1,()=>{$[v]=null}),qe(),a=$[i],a?a.p(u,b):(a=$[i]=D[i](u),a.c()),N(a,1),a.m(o,null))},i(u){f||(N(n),N(a),f=!0)},o(u){T(n),T(a),f=!1},d(u){u&&(d(e),d(s),d(r)),p[t].d(),$[i].d()}}}function So(l){let e,t,n,s,r;function o(h){l[85](h)}function i(h){l[86](h)}function a(h){l[87](h)}let f={onUpdate:l[84]};return l[11]!==void 0&&(f.show=l[11]),l[8]!==void 0&&(f.selectedModelId=l[8]),l[3]!==void 0&&(f.files=l[3]),e=new el({props:f}),ge.push(()=>we(e,"show",o)),ge.push(()=>we(e,"selectedModelId",i)),ge.push(()=>we(e,"files",a)),{c(){A(e.$$.fragment)},l(h){W(e.$$.fragment,h)},m(h,p){U(e,h,p),r=!0},p(h,p){const C={};!t&&p[0]&2048&&(t=!0,C.show=h[11],be(()=>t=!1)),!n&&p[0]&256&&(n=!0,C.selectedModelId=h[8],be(()=>n=!1)),!s&&p[0]&8&&(s=!0,C.files=h[3],be(()=>s=!1)),e.$set(C)},i(h){r||(N(e.$$.fragment,h),r=!0)},o(h){T(e.$$.fragment,h),r=!1},d(h){j(e,h)}}}function yo(l){let e,t,n,s,r,o,i,a,f;function h(m){l[77](m)}function p(m){l[78](m)}function C(m){l[79](m)}function D(m){l[80](m)}function $(m){l[81](m)}function _(m){l[82](m)}function u(m){l[83](m)}let b={editor:l[1],inputElement:l[23],selectedContent:l[13],files:l[3],onInsert:l[39],onStop:l[33],onEdited:l[30],insertNoteHandler:l[76],scrollToBottomHandler:l[38]};return l[11]!==void 0&&(b.show=l[11]),l[8]!==void 0&&(b.selectedModelId=l[8]),l[4]!==void 0&&(b.messages=l[4]),l[2]!==void 0&&(b.note=l[2]),l[20]!==void 0&&(b.editing=l[20]),l[21]!==void 0&&(b.streaming=l[21]),l[22]!==void 0&&(b.stopResponseFlag=l[22]),e=new El({props:b}),ge.push(()=>we(e,"show",h)),ge.push(()=>we(e,"selectedModelId",p)),ge.push(()=>we(e,"messages",C)),ge.push(()=>we(e,"note",D)),ge.push(()=>we(e,"editing",$)),ge.push(()=>we(e,"streaming",_)),ge.push(()=>we(e,"stopResponseFlag",u)),{c(){A(e.$$.fragment)},l(m){W(e.$$.fragment,m)},m(m,v){U(e,m,v),f=!0},p(m,v){const H={};v[0]&2&&(H.editor=m[1]),v[0]&8388608&&(H.inputElement=m[23]),v[0]&8192&&(H.selectedContent=m[13]),v[0]&8&&(H.files=m[3]),v[0]&4&&(H.insertNoteHandler=m[76]),!t&&v[0]&2048&&(t=!0,H.show=m[11],be(()=>t=!1)),!n&&v[0]&256&&(n=!0,H.selectedModelId=m[8],be(()=>n=!1)),!s&&v[0]&16&&(s=!0,H.messages=m[4],be(()=>s=!1)),!r&&v[0]&4&&(r=!0,H.note=m[2],be(()=>r=!1)),!o&&v[0]&1048576&&(o=!0,H.editing=m[20],be(()=>o=!1)),!i&&v[0]&2097152&&(i=!0,H.streaming=m[21],be(()=>i=!1)),!a&&v[0]&4194304&&(a=!0,H.stopResponseFlag=m[22],be(()=>a=!1)),e.$set(H)},i(m){f||(N(e.$$.fragment,m),f=!0)},o(m){T(e.$$.fragment,m),f=!1},d(m){j(e,m)}}}function zo(l){let e,t,n,s;const r=[yo,So],o=[];function i(a,f){return a[12]==="chat"?0:a[12]==="settings"?1:-1}return~(e=i(l))&&(t=o[e]=r[e](l)),{c(){t&&t.c(),n=lt()},l(a){t&&t.l(a),n=lt()},m(a,f){~e&&o[e].m(a,f),S(a,n,f),s=!0},p(a,f){let h=e;e=i(a),e===h?~e&&o[e].p(a,f):(t&&(Ye(),T(o[h],1,1,()=>{o[h]=null}),qe()),~e?(t=o[e],t?t.p(a,f):(t=o[e]=r[e](a),t.c()),N(t,1),t.m(n.parentNode,n)):t=null)},i(a){s||(N(t),s=!0)},o(a){T(t),s=!1},d(a){a&&d(n),~e&&o[e].d(a)}}}function Vo(l){let e,t,n,s,r;e=new pn({props:{defaultSize:70,minSize:30,class:"h-full flex flex-col w-full relative",$$slots:{default:[Mo]},$$scope:{ctx:l}}});function o(a){l[88](a)}let i={$$slots:{default:[zo]},$$scope:{ctx:l}};return l[11]!==void 0&&(i.show=l[11]),n=new Qs({props:i}),ge.push(()=>we(n,"show",o)),{c(){A(e.$$.fragment),t=G(),A(n.$$.fragment)},l(a){W(e.$$.fragment,a),t=Z(a),W(n.$$.fragment,a)},m(a,f){U(e,a,f),S(a,t,f),U(n,a,f),r=!0},p(a,f){const h={};f[0]&230424303|f[3]&16384&&(h.$$scope={dirty:f,ctx:a}),e.$set(h);const p={};f[0]&15743262|f[3]&16384&&(p.$$scope={dirty:f,ctx:a}),!s&&f[0]&2048&&(s=!0,p.show=a[11],be(()=>s=!1)),n.$set(p)},i(a){r||(N(e.$$.fragment,a),N(n.$$.fragment,a),r=!0)},o(a){T(e.$$.fragment,a),T(n.$$.fragment,a),r=!1},d(a){a&&d(t),j(e,a),j(n,a)}}}function Oo(l){var $,_,u,b;let e,t,n,s,r,o,i,a,f,h;zt.title=e=`
		`+(($=l[2])!=null&&$.title?`${((_=l[2])==null?void 0:_.title.length)>30?`${(u=l[2])==null?void 0:u.title.slice(0,30)}...`:(b=l[2])==null?void 0:b.title} • ${l[25]}`:`${l[25]}`)+`
	`;let p=l[2]&&an(l);s=new Ps({props:{show:l[18]}});function C(m){l[44](m)}let D={title:l[0].t("Delete note?"),$$slots:{default:[fo]},$$scope:{ctx:l}};return l[14]!==void 0&&(D.show=l[14]),o=new Us({props:D}),ge.push(()=>we(o,"show",C)),o.$on("confirm",l[45]),f=new ls({props:{direction:"horizontal",class:"w-full h-full",$$slots:{default:[Vo]},$$scope:{ctx:l}}}),{c(){t=G(),p&&p.c(),n=G(),A(s.$$.fragment),r=G(),A(o.$$.fragment),a=G(),A(f.$$.fragment)},l(m){es("svelte-zkgjga",zt.head).forEach(d),t=Z(m),p&&p.l(m),n=Z(m),W(s.$$.fragment,m),r=Z(m),W(o.$$.fragment,m),a=Z(m),W(f.$$.fragment,m)},m(m,v){S(m,t,v),p&&p.m(m,v),S(m,n,v),U(s,m,v),S(m,r,v),U(o,m,v),S(m,a,v),U(f,m,v),h=!0},p(m,v){var q,L,B,P;(!h||v[0]&33554436)&&e!==(e=`
		`+((q=m[2])!=null&&q.title?`${((L=m[2])==null?void 0:L.title.length)>30?`${(B=m[2])==null?void 0:B.title.slice(0,30)}...`:(P=m[2])==null?void 0:P.title} • ${m[25]}`:`${m[25]}`)+`
	`)&&(zt.title=e),m[2]?p?(p.p(m,v),v[0]&4&&N(p,1)):(p=an(m),p.c(),N(p,1),p.m(n.parentNode,n)):p&&(Ye(),T(p,1,1,()=>{p=null}),qe());const H={};v[0]&262144&&(H.show=m[18]),s.$set(H);const y={};v[0]&1&&(y.title=m[0].t("Delete note?")),v[0]&5|v[3]&16384&&(y.$$scope={dirty:v,ctx:m}),!i&&v[0]&16384&&(i=!0,y.show=m[14],be(()=>i=!1)),o.$set(y);const z={};v[0]&234618879|v[3]&16384&&(z.$$scope={dirty:v,ctx:m}),f.$set(z)},i(m){h||(N(p),N(s.$$.fragment,m),N(o.$$.fragment,m),N(f.$$.fragment,m),h=!0)},o(m){T(p),T(s.$$.fragment,m),T(o.$$.fragment,m),T(f.$$.fragment,m),h=!1},d(m){m&&(d(t),d(n),d(r),d(a)),p&&p.d(m),j(s,m),j(o,m),j(f,m)}}}function Bo(l,e){return JSON.stringify(l)===JSON.stringify(e)}function mn(l){var n;const e={json:l.data.content.json,html:l.data.content.html,md:l.data.content.md},t=(n=l.data.versions)==null?void 0:n.at(-1);return!t||!Bo(t,e)?(l.data.versions=(l.data.versions??[]).concat(e),!0):!1}const Ao=l=>{l.deltaY!==0&&(l.preventDefault(),l.currentTarget.scrollLeft+=l.deltaY)},Wo=()=>{};function Uo(l,e,t){let n,s,r,o,i,a,f,h;He(l,ms,g=>t(24,n=g)),He(l,Wt,g=>t(90,s=g)),He(l,hs,g=>t(91,r=g)),He(l,gs,g=>t(92,o=g)),He(l,_s,g=>t(25,a=g)),He(l,Rt,g=>t(26,f=g)),He(l,ps,g=>t(27,h=g));const{saveAs:p}=rs,C=_t("i18n");He(l,C,g=>t(0,i=g)),Ve.extend(us),Ve.extend(ds),Ve.extend(cs);async function D(g){for(const O of g)try{Ve.locale(O);break}catch(F){console.error(`Could not load locale '${O}':`,F)}}let{id:$=null}=e,_=null,u=null,b=[],m=[],v=0,H=0,y=null,z=null,q=!1,L=!1,B=!1,P="chat",X=null,J=!1,Q=!1,oe=!1,se=!1,De=!1,ee=!1,ue=!1,$e=!1,R=!1,x=null;const V=async()=>{t(19,ee=!0);const g=await Os(localStorage.token,$).catch(O=>(Se.error(`${O}`),null));if(t(4,m=[]),g)t(2,u=g),t(3,b=g.data.files||[]);else{Pt("/");return}t(19,ee=!1)};let le=null;const te=()=>{le&&clearTimeout(le),le=setTimeout(async()=>{await Bs(localStorage.token,$,{title:(u==null?void 0:u.title)===""?i.t("Untitled"):u.title,data:{files:b},access_control:u==null?void 0:u.access_control}).catch(g=>{Se.error(`${g}`)})},200)},Pe=async()=>{_&&_.commands.setContent(u.data.content.html)},ve=async()=>{var _e,pe;const O=`### Task:
Generate a concise, 3-5 word title with an emoji summarizing the content in the content's primary language.
### Guidelines:
- The title should clearly represent the main theme or subject of the content.
- Use emojis that enhance understanding of the topic, but avoid quotation marks or special formatting.
- Write the title in the content's primary language.
- Prioritize accuracy over excessive creativity; keep it clear and simple.
- Your entire response must consist solely of the JSON object, without any introductory or concluding text.
- The output must be a single, raw JSON object, without any markdown code fences or other encapsulating text.
- Ensure no conversational text, affirmations, or explanations precede or follow the raw JSON output, as this will cause direct parsing failure.
### Output:
JSON format: { "title": "your concise title here" }
### Examples:
- { "title": "📉 Stock Market Trends" },
- { "title": "🍪 Perfect Chocolate Chip Recipe" },
- { "title": "Evolution of Music Streaming" },
- { "title": "Remote Work Productivity Tips" },
- { "title": "Artificial Intelligence in Healthcare" },
- { "title": "🎮 Video Game Development Insights" }
### Content:
<content>
${u.data.content.md}
</content>`,F=JSON.parse(JSON.stringify(u.title));t(2,u.title="",u),t(17,se=!0);const ne=await ws(localStorage.token,{model:z,stream:!1,messages:[{role:"user",content:O}]},`${Ot}/api`);if(ne){const fe=((pe=(_e=ne==null?void 0:ne.choices[0])==null?void 0:_e.message)==null?void 0:pe.content)??"";try{const he=fe.indexOf("{"),ze=fe.lastIndexOf("}");if(he!==-1&&ze!==-1){const Ie=fe.substring(he,ze+1),K=JSON.parse(Ie);K&&K.title&&t(2,u.title=K.title.trim(),u)}}catch(he){console.error("Error parsing JSON response:",he),Se.error(i.t("Failed to generate title"))}}u.title||t(2,u.title=F,u),t(17,se=!1),await ft(),te()};async function Je(){if(z===""){Se.error(i.t("Please select a model."));return}const g=s.filter(O=>{var F,ne;return O.id===z&&!(((ne=(F=O==null?void 0:O.info)==null?void 0:F.meta)==null?void 0:ne.hidden)??!1)}).find(O=>O.id===z);if(!g){t(8,z="");return}t(20,ue=!0),await ie(g),t(20,ue=!1),Pe(),t(7,y=null)}const Ne=async()=>{t(22,R=!0)},Ge=async g=>{var ne,_e,pe,fe,he,ze;const O=Ut(),F={type:"file",file:"",id:null,url:"",name:g.name,collection_name:"",status:"uploading",size:g.size,error:"",itemId:O};if(F.size==0)return Se.error(i.t("You cannot upload an empty file.")),null;t(3,b=[...b,F]),t(12,P="settings"),B||t(11,B=!0);try{let Ie=null;(g.type.startsWith("audio/")||g.type.startsWith("video/"))&&((_e=(ne=o==null?void 0:o.audio)==null?void 0:ne.stt)!=null&&_e.language)&&(Ie={language:(fe=(pe=o==null?void 0:o.audio)==null?void 0:pe.stt)==null?void 0:fe.language});const K=await bs(localStorage.token,g,Ie);K?(K.id,F.name,(he=K==null?void 0:K.meta)==null||he.collection_name,K.error&&(console.warn("File upload warning:",K.error),Se.warning(K.error)),F.status="uploaded",F.file=K,F.id=K.id,F.collection_name=((ze=K==null?void 0:K.meta)==null?void 0:ze.collection_name)||(K==null?void 0:K.collection_name),F.url=`${vs}/files/${K.id}`,t(3,b)):t(3,b=b.filter(Fe=>(Fe==null?void 0:Fe.itemId)!==O))}catch(Ie){Se.error(`${Ie}`),t(3,b=b.filter(K=>(K==null?void 0:K.itemId)!==O))}return b.length>0?t(2,u.data.files=b,u):t(2,u.data.files=null,u),t(1,_.storage.files=b,_),te(),F},Ze=async(g,O={},F={})=>{var ze,Ie,K,Fe,it,pt;const ne=(O==null?void 0:O.imageCompression)??!1,_e=((Ie=(ze=F==null?void 0:F.file)==null?void 0:ze.image_compression)==null?void 0:Ie.width)??null,pe=((Fe=(K=F==null?void 0:F.file)==null?void 0:K.image_compression)==null?void 0:Fe.height)??null;if(!ne&&!_e&&!pe)return g;let fe=null,he=null;return ne&&(fe=((it=O==null?void 0:O.imageCompressionSize)==null?void 0:it.width)??null,he=((pt=O==null?void 0:O.imageCompressionSize)==null?void 0:pt.height)??null),_e&&(fe===null||fe>_e)&&(fe=_e),pe&&(he===null||he>pe)&&(he=pe),fe||he?await fs(g,fe,he):g},Le=async g=>{var O,F,ne,_e;if(g.name,g.type,g.size,g.name.split(".").at(-1),(((O=r==null?void 0:r.file)==null?void 0:O.max_size)??null)!==null&&g.size>(((F=r==null?void 0:r.file)==null?void 0:F.max_size)??0)*1024*1024){g.size,(((ne=r==null?void 0:r.file)==null?void 0:ne.max_size)??0)*1024*1024,Se.error(i.t("File size should not exceed {{maxSize}} MB.",{maxSize:(_e=r==null?void 0:r.file)==null?void 0:_e.max_size}));return}return g.type.startsWith("image/")?await new Promise(async(fe,he)=>{let ze=new FileReader;ze.onload=async Ie=>{try{let K=Ie.target.result;K=await Ze(K,o,r);const it={id:Ut(),type:"image",url:`${K}`};t(3,b=[...b,it]),t(2,u.data.files=b,u),t(1,_.storage.files=b,_),te(),fe(it)}catch(K){he(K)}},ze.readAsDataURL(g.type==="image/heic"?await os({blob:g,toType:"image/jpeg"}):g)}):await Ge(g)},Te=async g=>{if(g==="txt"){const O=new Blob([u.data.content.md],{type:"text/plain"});p(O,`${u.title}.txt`)}else if(g==="md"){const O=new Blob([u.data.content.md],{type:"text/markdown"});p(O,`${u.title}.md`)}else g==="pdf"&&await xe(u)},xe=async g=>{var O,F;try{const pe=((F=(O=g.data)==null?void 0:O.content)==null?void 0:F.html)??"";let fe;pe instanceof HTMLElement?fe=pe:(fe=document.createElement("div"),fe.innerHTML=pe,document.body.appendChild(fe));const he=await as(fe,{useCORS:!0,scale:2,width:1024,windowWidth:1024,windowHeight:1400});pe instanceof HTMLElement||document.body.removeChild(fe);const ze=he.toDataURL("image/png"),Ie=new is("p","mm","a4"),K=210,Fe=297,it=he.height*K/he.width;let pt=it,yt=0;for(Ie.addImage(ze,"PNG",0,yt,K,it),pt-=Fe;pt>0;)yt-=Fe,Ie.addPage(),Ie.addImage(ze,"PNG",0,yt,K,it),pt-=Fe;Ie.save(`${g.title}.pdf`)}catch(ne){console.error("Error generating PDF",ne),Se.error(`${ne}`)}},Me=async g=>{await As(localStorage.token,g).catch(F=>(Se.error(`${F}`),null))?(Se.success(i.t("Note deleted successfully")),Pt("/notes")):Se.error(i.t("Failed to delete note"))},ae=()=>{const g=document.getElementById("note-content-container");g&&(g.scrollTop=g==null?void 0:g.scrollHeight)},ie=async g=>{t(22,R=!1);let O={json:null,html:"",md:""};const F=`Enhance existing notes using additional context provided from audio transcription or uploaded file content in the content's primary language. Your task is to make the notes more useful and comprehensive by incorporating relevant information from the provided context.

Input will be provided within <notes> and <context> XML tags, providing a structure for the existing notes and context respectively.

# Output Format

Provide the enhanced notes in markdown format. Use markdown syntax for headings, lists, task lists ([ ]) where tasks or checklists are strongly implied, and emphasis to improve clarity and presentation. Ensure that all integrated content from the context is accurately reflected. Return only the markdown formatted note.
`,[ne,_e]=await bn(localStorage.token,{model:g.id,stream:!0,messages:[{role:"system",content:F},{role:"user",content:`<notes>${u.data.content.md}</notes>`+(b&&b.length>0?`
<context>${b.map(pe=>{var fe,he;return`${pe.name}: ${((he=(fe=pe==null?void 0:pe.file)==null?void 0:fe.data)==null?void 0:he.content)??"Could not extract content"}
`}).join("")}</context>`:"")}]},`${Ot}/api`);if(await ft(),t(21,$e=!0),ne&&ne.ok){const pe=ne.body.pipeThrough(new TextDecoderStream).pipeThrough(vn(`
`)).getReader();for(;;){const{value:fe,done:he}=await pe.read();if(he||R){R&&_e.abort("User: Stop Response"),t(20,ue=!1),t(21,$e=!1);break}try{let ze=fe.split(`
`);for(const Ie of ze)if(Ie!==""&&Ie!=="data: [DONE]"){let K=JSON.parse(Ie.replace(/^data: /,""));if(K.choices&&K.choices.length>0){const Fe=K.choices[0];Fe.delta&&Fe.delta.content&&(O.md+=Fe.delta.content,O.html=Vt.parse(O.md),t(2,u.data.content.md=O.md,u),t(2,u.data.content.html=O.html,u),t(2,u.data.content.json=null,u),ae())}}}catch(ze){}}}t(21,$e=!1)},ct=g=>{mn(u),x==null||x.insertContent(g)},Ke=async g=>{if(g.id===$){g.access_control&&g.access_control!==u.access_control&&t(2,u.access_control=g.access_control,u),g.data&&g.data.files&&(t(3,b=g.data.files),t(2,u.data.files=b,u)),g.title&&g.title&&t(2,u.title=g.title,u),t(1,_.storage.files=b,_),await ft();for(const O of b)if(O.type==="image"){const F=new CustomEvent("data",{files:b}),ne=document.getElementById(`image:${O.id}`);ne&&ne.dispatchEvent(F)}}};Bt(async()=>{var g;await ft(),n==null||n.emit("join-note",{note_id:$,auth:{token:localStorage.token}}),n==null||n.on("note-events",Ke),o!=null&&o.models?t(8,z=o==null?void 0:o.models[0]):r!=null&&r.default_models?t(8,z=r==null?void 0:r.default_models.split(",")[0]):t(8,z=""),z&&(s.filter(F=>{var ne,_e;return F.id===z&&!(((_e=(ne=F==null?void 0:F.info)==null?void 0:ne.meta)==null?void 0:_e.hidden)??!1)}).find(F=>F.id===z)||t(8,z="")),z||t(8,z=((g=s.at(0))==null?void 0:g.id)||""),document.getElementById("note-editor")}),hn(()=>{n==null||n.off("note-events",Ke),document.getElementById("note-editor")});const Re=()=>{te()};function Ee(g){Q=g,t(15,Q)}function ye(g){l.$$.not_equal(u.access_control,g)&&(u.access_control=g,t(2,u))}function Mt(g){J=g,t(14,J)}const St=()=>{Me(u.id),t(14,J=!1)},It=()=>{Rt.set(!f)};function Nt(){u.title=this.value,t(2,u)}const Ct=()=>{t(16,oe=!0)},Dt=g=>{var O;((O=g.relatedTarget)==null?void 0:O.id)!=="generate-title-button"&&(t(16,oe=!1),te())},M=g=>{g.preventDefault(),g.stopImmediatePropagation(),g.stopPropagation(),ve(),t(16,oe=!1)},Y=()=>{_.chain().focus().undo().run()},et=()=>{_.chain().focus().redo().run()},je=()=>{B&&P==="chat"?t(11,B=!1):(B||t(11,B=!0),t(12,P="chat"))},Xe=()=>{B&&P==="settings"?t(11,B=!1):(B||t(11,B=!0),t(12,P="settings"))},Ce=g=>{Te(g)},ut=async()=>{const g=window.location.origin;await jt(`${g}/notes/${u.id}`)?Se.success(i.t("Copied link to clipboard")):Se.error(i.t("Failed to copy link"))},Qe=async()=>{await jt(u.data.content.md,u.data.content.html,!0).catch(O=>(Se.error(`${O}`),null))&&Se.success(i.t("Copied to clipboard"))},dt=()=>{t(14,J=!0)},mt=()=>{t(15,Q=!0)},tt=({editor:g})=>{const{from:O,to:F}=g.state.selection,ne=g.state.doc.textBetween(O,F," ");ne.length===0?t(13,X=null):t(13,X={text:ne,from:O,to:F})},ot=g=>{t(2,u.data.content.html=g.html,u),t(2,u.data.content.md=g.md,u),_&&(t(5,v=_.storage.characterCount.words()),t(6,H=_.storage.characterCount.characters()))},rt=(g,O,F)=>{O.forEach(async ne=>{const _e=await Le(ne).catch(pe=>null);_e.type==="image"&&g.chain().insertContentAt(F,{type:"image",attrs:{src:`data://${_e.id}`}}).focus().run()})};function ht(g){ge[g?"unshift":"push"](()=>{x=g,t(23,x)})}function at(g){_=g,t(1,_)}function Tn(g){l.$$.not_equal(u.data.content.json,g)&&(u.data.content.json=g,t(2,u))}const Mn=async g=>{g=g.detail.event||g;const O=g.clipboardData||window.clipboardData;if(O&&O.items){O.items;for(const F of O.items)if(F.type.indexOf("image")!==-1){const ne=F.getAsFile(),_e=await Le(ne);_&&(_==null||_.chain().insertContentAt(_.state.selection.$anchor.pos,{type:"image",attrs:{src:`data://${_e.id}`}}).focus().run())}else if((F==null?void 0:F.kind)==="file"){const ne=F.getAsFile();await Le(ne),g.preventDefault()}}},Sn=()=>{t(9,q=!1),t(10,L=!1)},yn=g=>{g!=null&&g.file&&Ge(g==null?void 0:g.file),t(9,q=!1),t(10,L=!1)};function zn(g){q=g,t(9,q)}const Vn=async()=>{t(10,L=!1);try{let g=await navigator.mediaDevices.getUserMedia({audio:!0}).catch(function(O){return Se.error(i.t("Permission denied when accessing microphone: {{error}}",{error:O})),null});g&&(t(9,q=!0),g.getTracks().forEach(F=>F.stop())),g=null}catch{Se.error(i.t("Permission denied when accessing microphone"))}},On=async()=>{t(10,L=!0),t(9,q=!0)},Bn=async()=>{const g=document.createElement("input");g.type="file",g.accept="audio/*",g.multiple=!1,g.click(),g.onchange=async O=>{const F=O.target.files;F&&F.length>0&&await Ge(F[0])}},An=()=>{Ne()},Wn=()=>{Je()},Un=()=>{t(11,B=!0),t(12,P="chat")},jn=()=>{mn(u)};function Pn(g){B=g,t(11,B)}function Rn(g){z=g,t(8,z)}function Hn(g){m=g,t(4,m)}function Ln(g){u=g,t(2,u)}function Fn(g){ue=g,t(20,ue)}function Yn(g){$e=g,t(21,$e)}function qn(g){R=g,t(22,R)}const Jn=()=>{te()};function Gn(g){B=g,t(11,B)}function Zn(g){z=g,t(8,z)}function Xn(g){b=g,t(3,b)}function Qn(g){B=g,t(11,B)}return l.$$set=g=>{"id"in g&&t(40,$=g.id)},l.$$.update=()=>{l.$$.dirty[0]&1&&D(i.languages),l.$$.dirty[1]&512&&$&&V()},[i,_,u,b,m,v,H,y,z,q,L,B,P,X,J,Q,oe,se,De,ee,ue,$e,R,x,n,a,f,h,C,te,Pe,ve,Je,Ne,Ge,Le,Te,Me,ae,ct,$,Re,Ee,ye,Mt,St,It,Nt,Ct,Dt,M,Y,et,je,Xe,Ce,ut,Qe,dt,mt,tt,ot,rt,ht,at,Tn,Mn,Sn,yn,zn,Vn,On,Bn,An,Wn,Un,jn,Pn,Rn,Hn,Ln,Fn,Yn,qn,Jn,Gn,Zn,Xn,Qn]}class jo extends We{constructor(e){super(),Ue(this,e,Uo,Oo,Ae,{id:40},null,[-1,-1,-1,-1])}}function Po(l){let e,t,n;return t=new jo({props:{id:l[0].params.id}}),{c(){e=E("div"),A(t.$$.fragment),this.h()},l(s){e=I(s,"DIV",{id:!0,class:!0});var r=k(e);W(t.$$.fragment,r),r.forEach(d),this.h()},h(){c(e,"id","note-container"),c(e,"class","w-full h-full")},m(s,r){S(s,e,r),U(t,e,null),n=!0},p(s,[r]){const o={};r&1&&(o.id=s[0].params.id),t.$set(o)},i(s){n||(N(t.$$.fragment,s),n=!0)},o(s){T(t.$$.fragment,s),n=!1},d(s){s&&d(e),j(t)}}}function Ro(l,e,t){let n;return He(l,ts,s=>t(0,n=s)),[n]}class zr extends We{constructor(e){super(),Ue(this,e,Ro,Po,Ae,{})}}export{zr as component};
//# sourceMappingURL=23.nm9H2k26.js.map
